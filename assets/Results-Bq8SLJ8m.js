const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/feature-path-coach-DvhzPNyQ.js","assets/vendor-react-Ah1pgjPn.js","assets/data-question-bank-F-s7nTqV.js","assets/vendor-supabase-BZ0N5lZN.js","assets/vendor-motion-DURBmaq0.js","assets/feature-strategy-hub-DZoh82vu.js"])))=>i.map(i=>d[i]);
import{u as ta,r as Ee,g as sa,l as Pe,a as na,i as ia,s as ra,b as oa,L as ca,_ as Fe}from"./index-8WQrT5pX.js";import{r as l,j as e}from"./vendor-react-Ah1pgjPn.js";import{g as la,a as da,r as Y,c as ma,h as ua,u as ha,d as pa}from"./feature-path-coach-DvhzPNyQ.js";import{v as fa}from"./data-question-bank-F-s7nTqV.js";import{t as j}from"./feature-strategy-hub-DZoh82vu.js";import{u as ga,m as p,A as q}from"./vendor-motion-DURBmaq0.js";import"./vendor-supabase-BZ0N5lZN.js";function T(t,s,n,o,c,f,d=""){return{title:t,description:s,potentialGain:n,difficulty:o,timeframe:c,icon:f,action:d}}function xa(t,s){const n=[],o=la(t),c=da(t),f=t.firstOfficialLanguage==="french"?"french":"english",d=f==="french"||t.hasFrench==="yes";if(o<10){const r=Math.min(o+1,10),i=["listening","reading","writing","speaking"];let x="First official language";const y={};if(f==="french"){x="French (NCLC)",y.hasFrench="yes",y.frenchTestType="clb";for(const L of i){const C=`french_${L}`,I=parseInt(t[C],10)||0;y[C]=String(Math.max(I,r))}}else{x=t.langTestType==="celpip"?"CELPIP":"IELTS";for(const L of i){const C=t.langTestType==="celpip"?`celpip_${L}`:`ielts_${L}`,I=t.langTestType==="celpip"?parseInt(t[C],10)||0:parseFloat(t[C])||0;t.langTestType==="celpip"?y[C]=Math.max(I,r):y[C]=Math.max(I,I+.5)}}const w=Y(t,y).total-s.total;w>0&&n.push(T(`Improve ${x} Scores`,`Raising your weakest ${x} skill to CLB ${r} could add significant points. Focus on your lowest band.`,w,"Medium","3-5 months","language",`Current min CLB ${o} → target CLB ${r} = +${w} CRS`))}const m=["less_than_secondary","secondary","one_year_post","two_year_post","bachelors","two_or_more","masters","doctoral"],u=m.indexOf(t.education);if(u>=0&&u<m.length-1){const r=m[u+1],x=Y(t,{education:r}).total-s.total;if(x>0){const y={secondary:"high school diploma",one_year_post:"1-year diploma",two_year_post:"2-year diploma",bachelors:"bachelor's degree",two_or_more:"two credentials",masters:"master's degree",doctoral:"doctoral degree"};n.push(T("Higher Education",`Completing a ${y[r]||"higher credential"} could boost your score.`,x,"Hard","1-4 years","education",`${t.education||"current level"} → ${r} = +${x} CRS`))}}const g=parseInt(t.canadianWorkExp)||0;if(g<5){const i=Y(t,{canadianWorkExp:String(g+1)}).total-s.total;i>0&&n.push(T("Gain Canadian Work Experience","An additional year of Canadian work experience adds points across multiple categories including skill transferability.",i,"Hard","8-12 months","work",`${g} year(s) → ${g+1} year(s) = +${i} CRS`))}if(d)ma(t)>=7&&s.total<520&&s.total>=370&&n.push(T("Target French-Language Category Draw",`With your French NCLC 7+ scores, you qualify for French-language category draws where recent cutoffs are around 400 — your score of ${s.total} may already be competitive!`,0,"Easy","Immediate","french",`Current score ${s.total} already fits many French-category cutoffs`));else{const x=Y(t,{hasFrench:"yes",french_listening:"7",french_reading:"7",french_writing:"7",french_speaking:"7"}).total-s.total;x>0&&n.push(T("Add French Test Results (TEF/TCF)",`Strong French skills (NCLC 7+) earn ${c>=5?"50":"25"} additional CRS points. Plus, French-language category draws have cutoffs around 400 — much lower than general draws (~520).`,x,"Hard","6-12 months","french",`Reach NCLC 7 in all 4 abilities = +${x} CRS`))}if(t.hasPNP!=="yes"&&n.push(T("Provincial Nominee Program","A PNP nomination adds 600 points, virtually guaranteeing an ITA. Explore programs in provinces like Ontario, BC, Alberta and Saskatchewan.",600,"Hard","2-8 months","province","PNP nomination = +600 CRS")),t.canadianEducation!=="yes"&&n.push(T("Study in Canada","A Canadian credential (1-2 year program) adds 15 points, or 30 points for a 3+ year program.",30,"Hard","12-36 months","study","Canadian credential can add +15 to +30 CRS")),t.hasSibling!=="yes"&&n.push(T("Sibling in Canada (If Applicable)","If you have a sibling who is a Canadian citizen or PR, this adds 15 points. Check if any siblings qualify.",15,"Easy","1-2 weeks","family","Eligible sibling relationship = +15 CRS")),ua(t)){const r=["listening","reading","writing","speaking"];let i=99;for(const x of r){const y=parseInt(t[`spouseLang_${x}`])||0;y<i&&(i=y)}if(i<9){const x=Math.min(i+1,9),y={};for(const L of r)y[`spouseLang_${L}`]=String(Math.max(parseInt(t[`spouseLang_${L}`])||0,x));const w=Y(t,y).total-s.total;w>0&&n.push(T("Improve Spouse's Language Scores",`Your spouse's language improvement to CLB ${x} could add points.`,w,"Medium","3-5 months","language",`Spouse min CLB ${i} → ${x} = +${w} CRS`))}}return n.sort((r,i)=>i.potentialGain-r.potentialGain),n}function va(t){const s=t.total;return s>=500?{label:"Very Strong",months:"1-3",description:"You are very likely to receive an ITA in the next few draws."}:s>=470?{label:"Strong",months:"3-6",description:"Your score is competitive. An ITA is likely within a few months."}:s>=440?{label:"Moderate",months:"6-12",description:"Your score is near recent cutoffs. Category-based draws may help."}:s>=400?{label:"Below Average",months:"12-18",description:"You may need to improve your profile or target a category-based draw."}:{label:"Needs Improvement",months:"18+",description:"Significant profile improvements are recommended before applying."}}const ba=[{id:"on",name:"Ontario",abbr:"ON",streams:["Human Capital Priorities","Skilled Trades","French-Speaking"],demandSectors:["stem","healthcare","trade"],minCLB:7,minEducation:"bachelors",minWorkYears:1,notes:"Largest province. Strong demand for tech, healthcare, and skilled trades. Ontario often sends NOIs to Express Entry candidates with CRS 400+."},{id:"bc",name:"British Columbia",abbr:"BC",streams:["Skills Immigration","Express Entry BC","Tech"],demandSectors:["stem","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:1,notes:"Tech hub (Vancouver). BC PNP Tech targets 29 in-demand occupations including software, data, and engineering roles."},{id:"ab",name:"Alberta",abbr:"AB",streams:["Alberta Advantage Immigration","Express Entry Stream"],demandSectors:["trade","healthcare","stem","transport"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Strong energy/oil sector. Growing tech scene in Calgary and Edmonton. Lower cost of living than ON/BC."},{id:"sk",name:"Saskatchewan",abbr:"SK",streams:["International Skilled Worker","Express Entry"],demandSectors:["agriculture","healthcare","trade","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"In-Demand Occupations list is broad. One of the easiest PNPs to qualify for. Agriculture and mining are key industries."},{id:"mb",name:"Manitoba",abbr:"MB",streams:["Skilled Workers Overseas","Skilled Workers in Manitoba"],demandSectors:["healthcare","agriculture","trade","transport"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Welcoming to newcomers. Strong need for healthcare workers and tradespeople. Lower CRS requirements than federal draws."},{id:"ns",name:"Nova Scotia",abbr:"NS",streams:["Labour Market Priorities","Skilled Worker","Physician"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing tech sector in Halifax. Healthcare workers are highly sought after."},{id:"nb",name:"New Brunswick",abbr:"NB",streams:["Express Entry Labour Market","Skilled Workers with Employer Support"],demandSectors:["healthcare","trade","agriculture"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Bilingual province (English/French). Part of Atlantic Immigration Program. Francophone candidates get priority."},{id:"pe",name:"Prince Edward Island",abbr:"PE",streams:["Express Entry","Labour Impact"],demandSectors:["agriculture","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:2,notes:"Small province with lower competition. Agriculture and tourism are key industries."},{id:"nl",name:"Newfoundland & Labrador",abbr:"NL",streams:["Express Entry","Skilled Worker","Priority Skills"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing need for healthcare and tech workers. Oil and gas sector."},{id:"yt",name:"Yukon",abbr:"YT",streams:["Yukon Express Entry","Skilled Worker"],demandSectors:["trade","healthcare","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"Territory with small population. Job offer typically required. Good for tradespeople and healthcare workers."}],xe={less_than_secondary:0,secondary:1,one_year_post:2,two_year_post:3,bachelors:4,two_or_more:5,masters:6,doctoral:7};function ya(t,s){return(xe[t]||0)>=(xe[s]||0)}function ja(t){const s=Na(t),n=t.education||"secondary",o=Math.max(parseInt(t.canadianWorkExp)||0,parseInt(t.foreignWorkExp)||0),c=t.occupationCategory||"other",f=t.hasFrench==="yes";return ba.map(d=>{let m=0;const u=100;s>=d.minCLB&&(m+=20,s>=d.minCLB+2&&(m+=10)),ya(n,d.minEducation)&&(m+=15,(xe[n]||0)>=4&&(m+=5)),o>=d.minWorkYears&&(m+=15,o>=3&&(m+=5)),d.demandSectors.includes(c)&&(m+=25),f&&(d.id==="nb"||d.id==="on")&&(m+=5);const g=Math.min(Math.round(m/u*100),100);return{...d,matchScore:g}}).sort((d,m)=>m.matchScore-d.matchScore)}function Na(t){if(t.langTestType==="celpip"){const n=["listening","reading","writing","speaking"].map(o=>parseInt(t[`celpip_${o}`])||0);return Math.min(...n)}if(t.langTestType==="ielts"){const n=["listening","reading","writing","speaking"].map(o=>{const c=parseFloat(t[`ielts_${o}`])||0;return c>=8?10:c>=7?9:c>=6.5?8:c>=6?7:c>=5.5?6:c>=5?5:c>=4?4:0});return Math.min(...n)}return 0}const Re="crs-saved-profiles-v1";function We(){try{const t=localStorage.getItem(Re);if(!t)return{};const s=JSON.parse(t);return s&&typeof s=="object"?s:{}}catch{return{}}}function Sa(t){try{localStorage.setItem(Re,JSON.stringify(t))}catch{}}function ka(){const t=Math.random().toString(36).slice(2,8);return`prf_${Date.now().toString(36)}_${t}`}function wa(){return`${Math.random().toString(36).slice(2,10)}${Math.random().toString(36).slice(2,10)}`}function Q(){const t=We();return Object.values(t).sort((s,n)=>String(n.updatedAt).localeCompare(String(s.updatedAt)))}function Ca({id:t,name:s="",answers:n={},score:o=0,email:c="",alertOptIn:f=!1,alertToken:d=null}){const m=We(),u=t||ka(),g=new Date().toISOString(),r=m[u],i={id:u,name:s||r?.name||`Profile ${u.slice(-4)}`,answers:n,score:o,email:c,alertOptIn:!!f,alertToken:f?d||r?.alertToken||wa():null,createdAt:r?.createdAt||g,updatedAt:g};return m[u]=i,Sa(m),i}const _a=l.lazy(()=>Fe(()=>import("./feature-path-coach-DvhzPNyQ.js").then(t=>t.P),__vite__mapDeps([0,1,2,3,4]))),Ea=l.lazy(()=>Fe(()=>import("./feature-strategy-hub-DZoh82vu.js").then(t=>t.R),__vite__mapDeps([5,1,0,2,3,4]))),Le={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},b={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:18}}};function Ae(t){return t==="supabase"?"Live sync":"Local data mode"}function $e(t){return t==="supabase"?"draw-source-live":"draw-source-fallback"}function Oe(t){if(!t)return null;const s=new Date(t);return Number.isNaN(s.getTime())?null:s}function Me(t){const s=Oe(t);if(!s)return{tier:"unknown",label:"Freshness unknown",dateLabel:t||"—"};const o=Math.max(new Date().getTime()-s.getTime(),0),c=Math.floor(o/(1e3*60*60*24)),f=c===0?"Updated today":c===1?"Updated 1 day ago":`Updated ${c} days ago`;return c<=2?{tier:"fresh",label:f,dateLabel:s.toLocaleDateString()}:c<=14?{tier:"recent",label:f,dateLabel:s.toLocaleDateString()}:{tier:"stale",label:f,dateLabel:s.toLocaleDateString()}}function Te(t={}){return[{label:"Age",value:t.age||"—"},{label:"Education",value:t.education||"—"},{label:"Language test",value:t.langTestType||"—"},{label:"Canadian work",value:t.canadianWorkExp||"0"},{label:"Program",value:t.pathway||"—"}]}function Pa({value:t,duration:s=1.2,reduceMotion:n=!1}){const[o,c]=l.useState(t);return l.useEffect(()=>{if(n)return;const f=t,d=performance.now(),m=u=>{const g=(u-d)/(s*1e3);if(g>=1){c(f);return}const r=1-Math.pow(1-g,3);c(Math.round(f*r)),requestAnimationFrame(m)};requestAnimationFrame(m)},[t,s,n]),n?e.jsx(e.Fragment,{children:t}):e.jsx(e.Fragment,{children:o})}function La({score:t,statusColor:s,reduceMotion:n=!1}){const c=2*Math.PI*54,f=Math.min(t/1200,1);return e.jsxs("div",{className:"score-gauge","aria-label":`CRS Score: ${t} out of 1200`,children:[e.jsxs("svg",{viewBox:"0 0 120 120",width:"180",height:"180",children:[e.jsx("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:"var(--surface-2)",strokeWidth:"8"}),e.jsx(p.circle,{cx:"60",cy:"60",r:54,fill:"none",stroke:s,strokeWidth:"8",strokeLinecap:"round",transform:"rotate(-90 60 60)",strokeDasharray:c,initial:n?!1:{strokeDashoffset:c},animate:{strokeDashoffset:c-f*c},transition:n?{duration:0}:{duration:1.4,ease:[.22,1,.36,1]}})]}),e.jsxs("div",{className:"gauge-text",children:[e.jsx("div",{className:"gauge-number","aria-live":"polite",children:e.jsx(Pa,{value:t,reduceMotion:n})}),e.jsx("div",{className:"gauge-max",children:"/ 1,200"})]})]})}function H({id:t,label:s,open:n,onToggle:o}){return e.jsx("h3",{className:"section-toggle-heading",children:e.jsxs("button",{type:"button",className:"section-toggle",onClick:o,"aria-expanded":n,"aria-controls":t,children:[e.jsx("span",{children:s}),e.jsx("span",{className:"toggle-arrow","aria-hidden":"true",children:"▾"})]})})}function Aa({icon:t,label:s,value:n,max:o,note:c}){const f=Math.round(n/o*100);return e.jsxs(p.div,{className:"bd-item",variants:b,children:[e.jsx("span",{className:"bd-icon",children:t}),e.jsxs("div",{className:"bd-info",children:[e.jsxs("div",{className:"bd-top",children:[e.jsxs("span",{className:"bd-label",children:[s,c&&e.jsxs("small",{className:"bd-note",children:[" (",c,")"]})]}),e.jsxs("span",{className:"bd-pts",children:[n," ",e.jsxs("small",{children:["/ ",o]})]})]}),e.jsx("div",{className:"bd-bar-bg",children:e.jsx(p.div,{className:"bd-bar-fill",initial:{width:0},animate:{width:`${f}%`},transition:{duration:.8,delay:.3,ease:"easeOut"}})})]})]})}function fe({draw:t,userScore:s}){const n=s>=t.score;return e.jsxs("div",{className:`draw-row ${n?"draw-above":"draw-below"}`,children:[e.jsx("span",{className:"draw-date",children:t.date}),e.jsx("span",{className:"draw-program",children:t.program}),e.jsx("span",{className:"draw-score",children:t.score})]})}const $a=[{value:"secondary",label:"High School"},{value:"one_year_post",label:"1-Year Diploma"},{value:"two_year_post",label:"2-Year Diploma"},{value:"bachelors",label:"Bachelor's"},{value:"two_or_more",label:"2+ Credentials"},{value:"masters",label:"Master's"},{value:"doctoral",label:"PhD"}];function ge(t,s,n){return{id:t,label:s,age:n.age||"",education:n.education||"",canadianWorkExp:n.canadianWorkExp||"0",minClb:""}}function Ma(t){return{5:5,6:5.5,7:6,8:6.5,9:7,10:7.5}[t]||0}function Ta(t,s){const n={};if(s.age&&s.age!==t.age&&(n.age=s.age),s.education&&s.education!==t.education&&(n.education=s.education),s.canadianWorkExp&&s.canadianWorkExp!==t.canadianWorkExp&&(n.canadianWorkExp=s.canadianWorkExp),s.minClb){const o=parseInt(s.minClb,10),c=["listening","reading","writing","speaking"];if(t.langTestType==="celpip")for(const f of c){const d=`celpip_${f}`;n[d]=String(Math.max(parseInt(t[d],10)||0,o))}else{const f=Ma(o);for(const d of c){const m=`ielts_${d}`;n[m]=String(Math.max(parseFloat(t[m])||0,f))}}}return Object.keys(n).length===0?null:Y(t,n)}function Ba({answers:t,originalScore:s,t:n}){const[o,c]=l.useState(()=>[ge("a","Scenario A",t),ge("b","Scenario B",t)]),f=()=>{o.length>=3||c(u=>[...u,ge("c","Scenario C",t)])},d=u=>{o.length<=2||c(g=>g.filter(r=>r.id!==u))},m=(u,g)=>{c(r=>r.map(i=>i.id===u?{...i,...g}:i))};return e.jsxs("div",{className:"scenario-panel",children:[e.jsx("div",{className:"scenario-grid",children:o.map(u=>{const g=Ta(t,u),r=g?g.total-s:0;return e.jsxs("div",{className:"scenario-card",children:[e.jsxs("div",{className:"scenario-head",children:[e.jsx("strong",{children:u.label}),u.id==="c"&&e.jsx("button",{type:"button",className:"scenario-remove",onClick:()=>d(u.id),children:"Remove"})]}),e.jsxs("div",{className:"wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Age"}),e.jsxs("select",{value:u.age,onChange:i=>m(u.id,{age:i.target.value}),children:[e.jsx("option",{value:"",children:"Current"}),Array.from({length:30},(i,x)=>x+18).map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Education"}),e.jsxs("select",{value:u.education,onChange:i=>m(u.id,{education:i.target.value}),children:[e.jsx("option",{value:"",children:"Current"}),$a.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Canadian Work (yrs)"}),e.jsx("select",{value:u.canadianWorkExp,onChange:i=>m(u.id,{canadianWorkExp:i.target.value}),children:[0,1,2,3,4,5].map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Min Language CLB"}),e.jsxs("select",{value:u.minClb,onChange:i=>m(u.id,{minClb:i.target.value}),children:[e.jsx("option",{value:"",children:"Current"}),[5,6,7,8,9,10].map(i=>e.jsxs("option",{value:i,children:["CLB ",i,"+"]},i))]})]})]}),g&&e.jsx(p.div,{className:"wi-result",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"wi-scores",children:[e.jsxs("div",{className:"wi-score-block",children:[e.jsx("small",{children:n("results.original")}),e.jsx("strong",{children:s})]}),e.jsx("span",{className:"wi-arrow",children:"→"}),e.jsxs("div",{className:"wi-score-block projected",children:[e.jsx("small",{children:n("results.projected")}),e.jsx("strong",{children:g.total})]}),e.jsxs("span",{className:`wi-delta ${r>0?"pos":r<0?"neg":""}`,children:[r>0?"+":"",r," pts"]})]})})]},u.id)})}),o.length<3&&e.jsx("button",{type:"button",className:"btn-toggle scenario-add-btn",onClick:f,children:"Add Scenario C ▼"})]})}function Ia(){return e.jsx(p.div,{className:"loading-screen",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.95,transition:{duration:.3}},children:e.jsx(ca,{})})}function Be({message:t="Loading section…",compact:s=!1}){return e.jsxs("div",{className:`section-load-shell ${s?"compact":""}`,children:[e.jsx("div",{className:"section-load-line"}),e.jsx("div",{className:"section-load-line short"}),e.jsx("p",{children:t})]})}function Fa(t){const s=l.useRef(null);return l.useEffect(()=>{if(!t)return;const n=s.current;if(!n)return;const o=n.getContext("2d");n.width=window.innerWidth,n.height=window.innerHeight;const c=["#22c55e","#4CC9F0","#7C3AED","#f59e0b","#ec4899","#3A0CA3"],f=Array.from({length:120},()=>({x:Math.random()*n.width,y:Math.random()*n.height-n.height,w:Math.random()*8+4,h:Math.random()*6+2,color:c[Math.floor(Math.random()*c.length)],vx:(Math.random()-.5)*4,vy:Math.random()*3+2,rot:Math.random()*360,rv:(Math.random()-.5)*8}));let d;const m=()=>{o.clearRect(0,0,n.width,n.height);let g=!1;for(const r of f)r.x+=r.vx,r.y+=r.vy,r.rot+=r.rv,r.vy+=.05,r.y<n.height+20&&(g=!0),o.save(),o.translate(r.x,r.y),o.rotate(r.rot*Math.PI/180),o.fillStyle=r.color,o.fillRect(-r.w/2,-r.h/2,r.w,r.h),o.restore();g&&(d=requestAnimationFrame(m))};d=requestAnimationFrame(m);const u=setTimeout(()=>{cancelAnimationFrame(d),o.clearRect(0,0,n.width,n.height)},4e3);return()=>{cancelAnimationFrame(d),clearTimeout(u)}},[t]),s}function Ha({answers:t,onRestart:s,drawData:n,drawSource:o="local-fallback",categoryInfo:c,motionIntensity:f="full"}){const{t:d}=ta(),m=ga()||f!=="full",{user:u,isAuthenticated:g}=ha(),r=l.useMemo(()=>Ee(),[]),i=n||na(),x=l.useMemo(()=>Array.isArray(c)&&c.length>0?c:sa(),[c]),[y,X]=l.useState(!0),[w,L]=l.useState(!1),[C,I]=l.useState(!1),[Z,De]=l.useState(!1),[ee,Ye]=l.useState(!1),[ae,Ue]=l.useState(!1),[te,qe]=l.useState(!1),[ve,be]=l.useState(()=>Q()),[W,ye]=l.useState("__current__"),[U,je]=l.useState(()=>Q()[0]?.id||"__current__"),[se,He]=l.useState(()=>r.profileName||""),[Ne,Ge]=l.useState(()=>r.contactEmail||""),[_,Ve]=l.useState(()=>!!r.defaultDrawAlerts),[ne,O]=l.useState(""),[Se,ke]=l.useState(!1),[ie,G]=l.useState([]),[re,D]=l.useState("idle"),oe=r.autoSyncProfiles!==!1;l.useEffect(()=>{const a=setTimeout(()=>X(!1),160);return()=>clearTimeout(a)},[]),l.useEffect(()=>{be(Q())},[]);const B=l.useMemo(()=>{if(t.knowsScore==="yes"){const a=parseInt(t.scoreRange,10)||400;return{total:a,breakdown:{coreHumanCapital:a,spouseFactors:0,skillTransferability:0,additionalPoints:0},details:{age:0,education:0,firstLanguage:0,secondLanguage:0,canadianWork:0,foreignWork:0,spouseTotal:0,skillTotal:0,additionalTotal:0}}}return pa(t)},[t]),E=t.knowsScore!=="yes",v=B.total,F=i.averageCutoff,A=v-F,ce=ia(),le=l.useMemo(()=>Me(i.lastUpdated),[i.lastUpdated]),V=l.useMemo(()=>{const a=x.map(h=>h?.updatedAt).filter(Boolean).map(h=>Oe(h)).filter(Boolean).sort((h,k)=>k.getTime()-h.getTime())[0];return Me(a?a.toISOString():i.lastUpdated)},[x,i.lastUpdated]),we=l.useMemo(()=>x.some(a=>a?.source==="supabase")?"Live sync":"Local data mode",[x]),P=l.useMemo(()=>[{id:"__current__",name:"Current profile",score:v,answers:t},...ve.map(a=>({id:a.id,name:a.name||a.id,score:Number(a.score)||0,answers:a.answers||{}}))],[t,ve,v]),$=l.useMemo(()=>P.find(a=>a.id===W),[W,P]),M=l.useMemo(()=>P.find(a=>a.id===U),[U,P]),de=!!$&&!!M&&$.id!==M.id,z=de?M.score-$.score:0,ze=l.useMemo(()=>Te($?.answers||t),[t,$?.answers]),Je=l.useMemo(()=>Te(M?.answers||t),[t,M?.answers]);l.useEffect(()=>{const a=P.some(k=>k.id===W),h=P.some(k=>k.id===U);if(a||ye("__current__"),!h){const k=P.find(K=>K.id!==W)?.id||"__current__";je(k)}},[W,U,P]),l.useEffect(()=>{if(!g||!ce||!u?.id){G([]),D("idle");return}let a=!0;return D("loading"),Pe(u.id).then(h=>{a&&(h.status==="ok"?(G(h.data||[]),D("ready")):(G([]),D("empty")))}).catch(()=>{a&&D("error")}),()=>{a=!1}},[ce,g,u?.id]);const R=A>=20?{cls:"above",marker:"+",title:"Great News!",desc:`Your score is ${A} points above the recent cut-off (${F}). You have a strong chance of receiving an Invitation to Apply.`,color:"#22c55e"}:A>=-10?{cls:"close",marker:"~",title:"Almost There!",desc:`You're just ${Math.abs(A)} points ${A>=0?"above":"below"} the recent cut-off (${F}). A few small improvements could make the difference.`,color:"#f59e0b"}:{cls:"below",marker:"—",title:"Room to Improve",desc:`You're ${Math.abs(A)} points below the recent cut-off (${F}). Don't worry — see the suggestions below to boost your score.`,color:"#ef4444"},J=l.useMemo(()=>xa(t,B),[t,B]),me=l.useMemo(()=>va(B),[B]),N=B.details,Ke=l.useMemo(()=>{const a=[{icon:"A",label:"Age",value:N.age,max:110},{icon:"E",label:"Education",value:N.education,max:150},{icon:"L",label:"English Language",value:N.firstLanguage,max:136},{icon:"W",label:"Canadian Work",value:N.canadianWork,max:80}];return N.secondLanguage>0&&a.splice(3,0,{icon:"F",label:"French",value:N.secondLanguage,max:24}),N.foreignWork>0?a.push({icon:"S",label:d("results.foreignWork"),value:N.skillTotal,max:100,note:"via skill transferability"}):a.push({icon:"S",label:"Skill Bonus",value:N.skillTotal,max:100}),N.spouseTotal>0&&a.push({icon:"P",label:"Spouse",value:N.spouseTotal,max:40}),N.additionalTotal>0&&a.push({icon:"+",label:"Bonus Points",value:N.additionalTotal,max:600}),a},[N,d]),Qe=J.slice(0,3),ue=J.slice(3),he=fa[t.pathway],pe=l.useMemo(()=>E?ja(t):[],[t,E]),Ce=!m&&!y&&A>=20,Xe=Fa(Ce),Ze=async()=>{const a=Ne.trim()||u?.email||"";if(_&&!a){O("Add an email to enable draw alerts (or sign in).");return}if(a&&!/^\S+@\S+\.\S+$/.test(a)){O("Please enter a valid email address.");return}const h=Ca({name:se.trim(),answers:t,score:v,email:a,alertOptIn:!!_&&!!a});be(Q());const k=Ee();ra({...k,profileName:se.trim(),contactEmail:a,defaultDrawAlerts:!!_}),ke(!0),j("profile_save_started",{has_email:!!a,alerts_opt_in:!!_,is_authenticated:!!g,score:v});try{if(oe&&(a||_))if((await oa(h,{userId:u?.id||null})).status==="ok"){if(g&&u?.id){const _e=await Pe(u.id);_e.status==="ok"&&(G(_e.data||[]),D("ready"))}O(_?"Profile saved, synced, and draw alerts subscribed.":"Profile saved and synced with your account."),j("profile_save_completed",{status:"cloud_synced",alerts_opt_in:!!_,score:v})}else O("Profile saved locally. Configure Supabase env vars to enable cloud sync/alerts."),j("profile_save_completed",{status:"local_only",alerts_opt_in:!!_,score:v});else O(oe?"Profile saved locally.":"Profile saved locally. Auto-sync is off in account settings."),j("profile_save_completed",{status:oe?"local_only":"local_autosync_off",alerts_opt_in:!!_,score:v})}catch(K){O(`Profile saved locally, but cloud sync failed: ${K.message}`),j("profile_save_completed",{status:"cloud_sync_failed",alerts_opt_in:!!_,score:v})}finally{ke(!1)}},ea=()=>{j("results_pdf_print_clicked",{score:v}),window.print()},S=a=>{const h=document.getElementById(a);h&&(h.scrollIntoView({behavior:"smooth",block:"start"}),j("results_section_jump",{section_id:a}))},aa=()=>{window.dispatchEvent(new CustomEvent("crs-open-account-modal")),j("account_modal_open_requested",{source:"results_action_center"})};return l.useEffect(()=>{y||j("results_viewed",{score:v,diff_from_cutoff:A,draw_source:o,category_count:x.length})},[x.length,A,o,y,v]),y?e.jsx(Ia,{}):e.jsxs(p.div,{className:"results",variants:Le,initial:"hidden",animate:"show",exit:{opacity:0,transition:{duration:.2}},children:[Ce&&e.jsx("canvas",{ref:Xe,className:"confetti-canvas"}),e.jsx(p.div,{className:"score-hero",variants:b,children:e.jsx(La,{score:v,statusColor:R.color,reduceMotion:m})}),e.jsx(p.div,{className:"result-actions",variants:b,children:e.jsx("button",{type:"button",className:"action-btn",onClick:ea,"aria-label":"Download PDF",children:d("results.pdf")})}),e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"card",children:e.jsx(Be,{message:"Loading action center and strategy insights…"})}),children:e.jsx(Ea,{answers:t,result:B,suggestions:J,averageCutoff:i.averageCutoff,activeDraws:i,activeCategoryInfo:x,provinces:pe,drawFreshness:le,categoryFreshness:V,saveStatus:ne,onJumpToSection:S,onOpenAccount:aa})}),e.jsxs(p.div,{className:"card quick-nav-card",variants:b,children:[e.jsx("h3",{children:"Quick navigation"}),e.jsxs("div",{className:"quick-nav-grid",children:[e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-action-center"),children:"Action center"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-save"),children:"Save profile"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-optimizer"),children:"Optimizer"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-90-day-plan"),children:"90-day plan"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-pricing"),children:"Plans"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-explainability"),children:"Explainability"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-profile-compare"),children:"Profile compare"}),E&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-breakdown"),children:"Score breakdown"}),E&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-improve"),children:"Improve score"}),E&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-coach"),children:"Expert strategy"}),E&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-category"),children:"Category draws"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-timeline"),children:"Timeline"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>S("section-draws"),children:"Recent draws"})]})]}),e.jsxs(p.div,{className:`card status-card ${R.cls}-card`,variants:b,children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:`status-marker ${R.cls}`,children:R.marker})," ",e.jsx("strong",{children:R.title})]}),e.jsx("p",{className:"status-desc",children:R.desc}),e.jsxs("div",{className:`draw-source-pill ${$e(o)}`,children:["Draw data source: ",Ae(o)," · Updated ",i.lastUpdated||"—",e.jsx("span",{className:`freshness-pill freshness-${le.tier}`,children:le.label})]}),e.jsxs("div",{className:"cutoff-compare",children:[e.jsx(Ie,{label:"Your Score",value:v,max:Math.max(v,F,600),color:"var(--primary)"}),e.jsx(Ie,{label:"Cut-off",value:F,max:Math.max(v,F,600),color:"var(--surface-3)"})]})]}),e.jsxs(p.div,{className:"card save-profile-card",variants:b,id:"section-save",children:[e.jsx("h3",{children:"Save your profile"}),e.jsx("p",{className:"cat-intro",children:"Save this result and optionally subscribe to draw alerts."}),g?e.jsxs("p",{className:"save-note",children:["Signed in as ",u.email,". Saves are synced across your devices."]}):e.jsx("p",{className:"save-note",children:"Tip: sign in to sync profiles and score tracking across devices."}),e.jsxs("div",{className:"save-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Profile name (optional)"}),e.jsx("input",{type:"text",value:se,onChange:a=>He(a.target.value),placeholder:"e.g., Feb 2026 Profile"})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Email (optional)"}),e.jsx("input",{type:"email",value:Ne,onChange:a=>Ge(a.target.value),placeholder:"you@example.com"})]})]}),e.jsxs("label",{className:"save-alert-row",children:[e.jsx("input",{type:"checkbox",checked:_,onChange:a=>Ve(a.target.checked)}),e.jsx("span",{children:"Notify me by email when my score is at/above the latest cutoff"})]}),!ce&&e.jsx("p",{className:"save-note",children:"Cloud alerts need Supabase env vars (`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`)."}),e.jsx("div",{className:"save-actions",children:e.jsx("button",{type:"button",className:"action-btn",onClick:Ze,disabled:Se,children:Se?"Saving…":"Save Profile"})}),ne&&e.jsx("p",{className:"save-status",children:ne}),g&&e.jsxs("div",{className:"save-synced-list",children:[e.jsx("h4",{children:"Synced profiles"}),re==="loading"&&e.jsx("p",{className:"save-note",children:"Loading your synced profiles..."}),re==="error"&&e.jsx("p",{className:"save-note",children:"Could not load synced profiles right now."}),re!=="loading"&&ie.length===0&&e.jsx("p",{className:"save-note",children:"No synced profiles yet. Save your current result to start tracking."}),ie.length>0&&e.jsx("ul",{className:"save-synced-items",children:ie.slice(0,5).map(a=>e.jsxs("li",{children:[e.jsx("span",{children:a.name||a.id}),e.jsx("strong",{children:a.score})]},a.id))})]})]}),e.jsxs(p.div,{className:"card profile-compare-card",variants:b,id:"section-profile-compare",children:[e.jsx(H,{id:"profile-compare-panel",label:"Profile Compare Mode",open:te,onToggle:()=>{const a=!te;qe(a),j("profile_compare_toggled",{open:a})}}),e.jsx(q,{initial:!1,children:te&&e.jsxs(p.div,{id:"profile-compare-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:m?{duration:0}:{duration:.2},children:[e.jsx("p",{className:"cat-intro",children:"Compare your current answers with any locally saved profile to spot score gaps quickly."}),e.jsxs("div",{className:"profile-compare-controls wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Profile A"}),e.jsx("select",{value:W,onChange:a=>ye(a.target.value),children:P.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.score,")"]},`a-${a.id}`))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Profile B"}),e.jsx("select",{value:U,onChange:a=>je(a.target.value),children:P.map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",a.score,")"]},`b-${a.id}`))})]})]}),!de&&e.jsx("p",{className:"path-empty-text",children:"Choose two different profiles to compare."}),de&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"profile-compare-delta",children:[e.jsx("strong",{children:M.name})," vs ",e.jsx("strong",{children:$.name}),":",e.jsxs("span",{className:z>0?"delta-up":z<0?"delta-down":"",children:[" ",z>0?"+":"",z," points"]})]}),e.jsxs("div",{className:"profile-compare-grid",children:[e.jsxs("div",{className:"profile-compare-column",children:[e.jsx("h4",{children:$.name}),e.jsx("strong",{className:"profile-compare-score",children:$.score}),e.jsx("ul",{children:ze.map(a=>e.jsxs("li",{children:[e.jsx("span",{children:a.label}),e.jsx("strong",{children:a.value})]},`${$.id}-${a.label}`))})]}),e.jsxs("div",{className:"profile-compare-column",children:[e.jsx("h4",{children:M.name}),e.jsx("strong",{className:"profile-compare-score",children:M.score}),e.jsx("ul",{children:Je.map(a=>e.jsxs("li",{children:[e.jsx("span",{children:a.label}),e.jsx("strong",{children:a.value})]},`${M.id}-${a.label}`))})]})]})]})]})})]}),E&&e.jsxs(p.div,{className:"card",variants:b,id:"section-breakdown",children:[e.jsx("h3",{children:d("results.breakdown")}),e.jsx(p.div,{className:"breakdown-grid",variants:Le,initial:"hidden",animate:"show",children:Ke.map(a=>e.jsx(Aa,{...a},a.label))}),e.jsxs("div",{className:"bd-total",children:[e.jsx("span",{children:"Total CRS Score"}),e.jsx("span",{className:"bd-total-num",children:v})]})]}),E&&e.jsxs(p.div,{className:"card whatif-card",variants:b,children:[e.jsx(H,{id:"scenario-compare-panel",label:"Scenario Compare (A vs B)",open:Z,onToggle:()=>{const a=!Z;De(a),j("scenario_compare_toggled",{open:a})}}),e.jsx(q,{initial:!1,children:Z&&e.jsxs(p.div,{id:"scenario-compare-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:m?{duration:0}:{duration:.2},children:[e.jsx("p",{className:"cat-intro",children:d("results.whatifDesc")}),e.jsx(Ba,{answers:t,originalScore:v,t:d})]})})]}),J.length>0&&e.jsxs(p.div,{className:"card",variants:b,id:"section-improve",children:[e.jsx("h3",{children:d("results.improve")}),Qe.map((a,h)=>e.jsxs(p.div,{className:"action-card",variants:b,children:[e.jsx("div",{className:"action-rank",children:h+1}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[a.title,a.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",a.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:a.description}),a.action&&e.jsx("div",{className:"action-specific",children:a.action}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:a.timeframe}),e.jsx("span",{className:`action-diff diff-${a.difficulty.toLowerCase()}`,children:a.difficulty})]})]})]},h)),ue.length>0&&e.jsxs(e.Fragment,{children:[w&&ue.map((a,h)=>e.jsxs(p.div,{className:"action-card",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"action-rank",children:h+4}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[a.title,a.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",a.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:a.description}),a.action&&e.jsx("div",{className:"action-specific",children:a.action}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:a.timeframe}),e.jsx("span",{className:`action-diff diff-${a.difficulty.toLowerCase()}`,children:a.difficulty})]})]})]},h+3)),e.jsx("button",{type:"button",className:"btn-toggle",onClick:()=>L(!w),children:w?"Show fewer ▲":`Show ${ue.length} more suggestions ▼`})]})]}),E&&e.jsxs(p.div,{className:"card",variants:b,id:"section-coach",children:[e.jsx(H,{id:"expert-coach-panel",label:"Expert strategy coach",open:ae,onToggle:()=>{const a=!ae;Ue(a),j("path_coach_toggled",{open:a})}}),e.jsx(q,{initial:!1,children:ae&&e.jsx(p.div,{id:"expert-coach-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:m?{duration:0}:{duration:.2},children:e.jsx(l.Suspense,{fallback:e.jsx(Be,{message:"Loading expert strategy coach…",compact:!0}),children:e.jsx(_a,{answers:t,result:B,averageCutoff:i.averageCutoff,categoryInfo:x,motionIntensity:f})})})})]}),E&&e.jsxs(p.div,{className:"card",variants:b,id:"section-category",children:[e.jsx("h3",{children:d("results.category")}),e.jsx("p",{className:"cat-intro",children:d("results.catIntro")}),e.jsxs("div",{className:"category-meta-row",children:[e.jsxs("span",{className:`draw-source-pill ${we==="Live sync"?"draw-source-live":"draw-source-fallback"}`,children:["Category config: ",we]}),e.jsxs("span",{className:`freshness-pill freshness-${V.tier}`,children:[V.label," · ",V.dateLabel]})]}),x.length===0?e.jsx("p",{className:"path-empty-text",children:"Category draw details are temporarily unavailable. The calculator is running in local data mode."}):e.jsx("div",{className:"cat-grid",children:x.map(a=>{const h=a.check(t),k=h&&v>=a.recentCutoff;return e.jsxs(p.div,{className:`cat-card ${h?k?"cat-above":"cat-eligible":"cat-na"}`,variants:b,children:[e.jsxs("div",{className:"cat-header",children:[e.jsx("span",{className:"cat-icon",children:a.icon}),e.jsxs("div",{children:[e.jsx("strong",{className:"cat-name",children:a.name}),h&&e.jsx("span",{className:`cat-badge ${k?"badge-above":"badge-eligible"}`,children:k?"Above Cutoff":"Eligible"}),!h&&e.jsx("span",{className:"cat-badge badge-na",children:"Not Eligible"})]})]}),e.jsx("p",{className:"cat-desc",children:a.description}),e.jsxs("div",{className:"cat-cutoff",children:[e.jsxs("span",{children:["Recent cutoff: ",e.jsx("strong",{children:a.recentCutoff})]}),e.jsxs("span",{className:"cat-range",children:["Range: ",a.cutoffRange]})]}),!h&&e.jsx("p",{className:"cat-req",children:a.eligibility})]},a.id)})})]}),E&&pe.length>0&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx(H,{id:"province-recommender-panel",label:"Province Recommender",open:ee,onToggle:()=>{const a=!ee;Ye(a),j("province_recommender_toggled",{open:a})}}),e.jsx(q,{initial:!1,children:ee&&e.jsxs(p.div,{id:"province-recommender-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:m?{duration:0}:{duration:.2},children:[e.jsx("p",{className:"cat-intro",children:"Based on your profile, these provinces may be good matches for Provincial Nominee Programs."}),e.jsx("div",{className:"prov-grid",children:pe.slice(0,5).map(a=>e.jsxs("div",{className:"prov-card",children:[e.jsxs("div",{className:"prov-header",children:[e.jsx("span",{className:"prov-abbr",children:a.abbr}),e.jsxs("div",{children:[e.jsx("strong",{className:"prov-name",children:a.name}),e.jsxs("span",{className:`prov-match ${a.matchScore>=70?"match-high":a.matchScore>=40?"match-mid":"match-low"}`,children:[a.matchScore,"% match"]})]})]}),e.jsx("div",{className:"prov-bar-wrap",children:e.jsx(p.div,{className:"prov-bar",initial:{width:0},animate:{width:`${a.matchScore}%`},transition:m?{duration:0}:{duration:.8,ease:"easeOut"},style:{background:a.matchScore>=70?"#22c55e":a.matchScore>=40?"#f59e0b":"var(--surface-3)"}})}),e.jsx("p",{className:"prov-notes",children:a.notes})]},a.id))})]})})]}),e.jsxs(p.div,{className:"card",variants:b,id:"section-timeline",children:[e.jsx("h3",{children:d("results.timeline")}),e.jsxs("div",{className:`timeline-badge tl-${R.cls}`,children:[e.jsx("strong",{children:me.label})," — est. ",me.months," months"]}),e.jsx("p",{className:"timeline-desc",children:me.description})]}),e.jsxs(p.div,{className:"card",variants:b,id:"section-draws",children:[e.jsx(H,{id:"recent-draws-panel",label:d("results.draws"),open:C,onToggle:()=>{const a=!C;I(a),j("recent_draws_toggled",{open:a})}}),e.jsxs("div",{className:`draw-source-pill ${$e(o)}`,children:["Source: ",Ae(o)," · Updated ",i.lastUpdated||"—"]}),e.jsx(q,{initial:!1,children:C&&e.jsx(p.div,{id:"recent-draws-panel",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:m?{duration:0}:{duration:.22},className:"draws-content",children:i.generalProgram?.length||i.categoryBased?.length||i.pnpDraws?.length?e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"draws-subhead",children:"General / CEC Draws"}),i.generalProgram.slice(0,4).map((a,h)=>e.jsx(fe,{draw:a,userScore:v},`g${h}`)),e.jsx("h4",{className:"draws-subhead",children:"Category-Based Draws"}),i.categoryBased.slice(0,4).map((a,h)=>e.jsx(fe,{draw:a,userScore:v},`c${h}`)),!!i.pnpDraws?.length&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"draws-subhead",children:"Provincial Nominee (PNP)"}),i.pnpDraws.slice(0,3).map((a,h)=>e.jsx(fe,{draw:a,userScore:v},`p${h}`))]})]}):e.jsx("p",{className:"path-empty-text",children:"Recent draw records are temporarily unavailable. Please check back shortly."})})})]}),he&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{children:[he.name," Requirements"]}),e.jsx("ul",{className:"pathway-list",children:he.requirements.map((a,h)=>e.jsx("li",{children:a},h))})]}),e.jsx(p.div,{className:"card disclaimer",variants:b,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Disclaimer:"})," ",d("results.disclaimer")," ",e.jsx("a",{href:"https://www.canada.ca/en/immigration-refugees-citizenship.html",target:"_blank",rel:"noopener noreferrer",children:"canada.ca"})]})}),e.jsx(p.button,{type:"button",className:"btn-restart",onClick:()=>{j("results_restart_clicked",{score:v}),s()},whileHover:m?void 0:{scale:1.03},whileTap:m?void 0:{scale:.96},variants:b,children:d("results.restart")})]})}function Ie({label:t,value:s,max:n,color:o}){const c=Math.round(s/n*100);return e.jsxs("div",{className:"cutoff-row",children:[e.jsx("span",{className:"cutoff-label",children:t}),e.jsx("div",{className:"cutoff-bar-wrap",children:e.jsx(p.div,{className:"cutoff-bar",style:{background:o},initial:{width:0},animate:{width:`${c}%`},transition:{duration:.8,ease:"easeOut"},children:s})})]})}export{Ha as default};
