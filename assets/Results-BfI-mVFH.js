import{c as se,a as ne,b as te,e as ie,f as re,s as oe,d as ce,g as le,h as de,i as he,j as me,k as ue,l as pe,m as fe,n as ge,o as xe,p as be,q as ye,u as ve,r as x,t as je,v as e,w as p,x as ke,y as T,z as we,L as Ne}from"./index-DMz30Goj.js";const Ce=(a,s,n)=>Math.max(s,Math.min(n,a));function Se(a){const s={...a};if(a.hasFrench==="yes"&&a.frenchTestType==="tef")for(const n of["listening","reading","writing","speaking"])s[`french_${n}`]=String(se(n,parseInt(a[`tef_${n}`])||0));else if(a.hasFrench==="yes"&&a.frenchTestType==="tcf")for(const n of["listening","reading","writing","speaking"])s[`french_${n}`]=String(ne(n,parseInt(a[`tcf_${n}`])||0));return s}function Y(a){return a.hasSpouse==="yes"&&a.spouseIsCanadian!=="yes"&&a.spouseAccompanying!=="no"}const M=a=>Y(a)?1:0;function J(a,s){if(a.langTestType==="celpip")return Ce(parseInt(a[`celpip_${s}`])||0,0,12);const n=parseFloat(a[`ielts_${s}`])||0;return xe(s,n)}function P(a){const s=["listening","reading","writing","speaking"];let n=99;for(const i of s){const r=J(a,i);r<n&&(n=r)}return n===99?0:n}function z(a,s){return parseInt(a[`french_${s}`])||0}function U(a){const s=["listening","reading","writing","speaking"];let n=99;for(const i of s){const r=z(a,i);r<n&&(n=r)}return n===99?0:n}function Ee(a){const s=P(a);return s>=9?2:s>=7?1:0}function _e(a){const s=parseInt(a.canadianWorkExp)||0;return s>=2?2:s>=1?1:0}function Le(a){const s=parseInt(a.foreignWorkExp)||0;return s>=3?2:s>=1?1:0}function Te(a){let s=parseInt(a.age);return isNaN(s)?0:(s<18&&(s=17),s>47&&(s=47),s>44&&(s=45),te[s]?.[M(a)]||0)}function Me(a){return ie[a.education]?.[M(a)]||0}function We(a){const s=["listening","reading","writing","speaking"],n=M(a);return s.reduce((i,r)=>{const h=J(a,r);return i+(re[h]?.[n]||0)},0)}function Pe(a){if(a.hasFrench!=="yes")return 0;const s=["listening","reading","writing","speaking"],n=M(a),i=s.reduce((r,h)=>{const m=z(a,h);return r+(oe[m]?.[n]||0)},0);return Math.min(i,n===0?24:22)}function Ie(a){let s=parseInt(a.canadianWorkExp)||0;return s>5&&(s=5),ce[s]?.[M(a)]||0}function $e(a){if(!Y(a))return 0;let s=0;s+=le[a.spouseEducation]||0;const n=["listening","reading","writing","speaking"];let i=0;for(const h of n){const m=parseInt(a[`spouseLang_${h}`])||0;i+=be[m]||0}s+=Math.min(i,20);let r=parseInt(a.spouseCanadianWork)||0;return r>5&&(r=5),s+=de[r]||0,Math.min(s,40)}function Fe(a){const s=he[a.education]||0,n=Ee(a),i=_e(a),r=Le(a),h=me[s]?.[n]||0,m=ue[s]?.[i]||0,o=Math.min(h+m,50),u=pe[r]?.[n]||0,l=fe[r]?.[i]||0,d=Math.min(u+l,50);let b=0;if(a.pathway==="fst"&&a.hasCertificate==="yes"){const v=P(a);b=ye[v>=7?2:v>=5?1:0]}return Math.min(o+d+b,100)}function Be(a){let s=0;const n=ge;return a.hasPNP==="yes"&&(s+=n.pnp_nomination),a.hasJobOffer==="yes"&&(a.jobOfferTeer==="teer_0"&&a.jobOfferMajorGroup00==="yes"?s+=n.job_offer_00:["teer_0","teer_1","teer_2","teer_3"].includes(a.jobOfferTeer)&&(s+=n.job_offer_other)),a.canadianEducation==="yes"&&(s+=a.canadianEduType==="long"?n.canadian_edu_long:n.canadian_edu_short),a.hasSibling==="yes"&&(s+=n.sibling_in_canada),a.hasFrench==="yes"&&U(a)>=7&&(s+=P(a)>=5?n.french_strong_strong_english:n.french_strong_weak_english),Math.min(s,600)}function V(a){const s=Se(a),n=Te(s),i=Me(s),r=We(s),h=Pe(s),m=Ie(s),o=parseInt(s.foreignWorkExp)||0,u=n+i+r+h+m,l=$e(s),d=Fe(s),b=Be(s);return{total:Math.min(u+l+d+b,1200),breakdown:{coreHumanCapital:u,spouseFactors:l,skillTransferability:d,additionalPoints:b},details:{age:n,education:i,firstLanguage:r,secondLanguage:h,canadianWork:m,foreignWork:o,spouseTotal:l,skillTotal:d,additionalTotal:b}}}function L(a,s){return V({...a,...s})}function N(a,s,n,i,r,h){return{title:a,description:s,potentialGain:n,difficulty:i,timeframe:r,icon:h}}function Ae(a,s){const n=[],i=P(a);if(i<10){const o=Math.min(i+1,10),u=a.langTestType==="celpip"?"CELPIP":"IELTS",l={},d=["listening","reading","writing","speaking"];for(const c of d){const w=a.langTestType==="celpip"?`celpip_${c}`:`ielts_${c}`,k=a.langTestType==="celpip"?parseInt(a[w])||0:parseFloat(a[w])||0;a.langTestType==="celpip"?l[w]=Math.max(k,o):l[w]=Math.max(k,k+.5)}const v=L(a,l).total-s.total;v>0&&n.push(N(`Improve ${u} Scores`,`Raising your weakest ${u} skill to CLB ${o} could add significant points. Focus on your lowest band.`,v,"Medium","2-4 months","language"))}const r=["less_than_secondary","secondary","one_year_post","two_year_post","bachelors","two_or_more","masters","doctoral"],h=r.indexOf(a.education);if(h>=0&&h<r.length-1){const o=r[h+1],l=L(a,{education:o}).total-s.total;if(l>0){const d={secondary:"high school diploma",one_year_post:"1-year diploma",two_year_post:"2-year diploma",bachelors:"bachelor's degree",two_or_more:"two credentials",masters:"master's degree",doctoral:"doctoral degree"};n.push(N("Higher Education",`Completing a ${d[o]||"higher credential"} could boost your score.`,l,"Hard","1-4 years","education"))}}const m=parseInt(a.canadianWorkExp)||0;if(m<5){const u=L(a,{canadianWorkExp:String(m+1)}).total-s.total;u>0&&n.push(N("Gain Canadian Work Experience","An additional year of Canadian work experience adds points across multiple categories including skill transferability.",u,"Hard","1 year","work"))}if(a.hasFrench!=="yes"){const l=L(a,{hasFrench:"yes",french_listening:"7",french_reading:"7",french_writing:"7",french_speaking:"7"}).total-s.total;l>0&&n.push(N("Learn French (TEF/TCF)",`Strong French skills (NCLC 7+) earn ${i>=5?"50":"25"} additional CRS points. Plus, French-language category draws have cutoffs around 400 — much lower than general draws (~520).`,l,"Hard","6-12 months","french"))}else U(a)>=7&&s.total<520&&s.total>=370&&n.push(N("Target French-Language Category Draw",`With your French NCLC 7+ scores, you qualify for French-language category draws where recent cutoffs are around 400 — your score of ${s.total} may already be competitive!`,0,"Easy","Immediate","french"));if(a.hasPNP!=="yes"&&n.push(N("Provincial Nominee Program","A PNP nomination adds 600 points, virtually guaranteeing an ITA. Explore programs in provinces like Ontario, BC, Alberta and Saskatchewan.",600,"Hard","3-12 months","province")),a.hasJobOffer!=="yes"){const u=L(a,{hasJobOffer:"yes",jobOfferTeer:"teer_0"}).total-s.total;u>0&&n.push(N("Obtain LMIA-Backed Job Offer","A valid job offer with LMIA in a TEER 0-3 occupation adds 50-200 points.",u,"Hard","3-6 months","job"))}if(a.canadianEducation!=="yes"&&n.push(N("Study in Canada","A Canadian credential (1-2 year program) adds 15 points, or 30 points for a 3+ year program.",30,"Hard","1-3 years","study")),a.hasSibling!=="yes"&&n.push(N("Sibling in Canada (If Applicable)","If you have a sibling who is a Canadian citizen or PR, this adds 15 points. Check if any siblings qualify.",15,"Easy","N/A","family")),Y(a)){const o=["listening","reading","writing","speaking"];let u=99;for(const l of o){const d=parseInt(a[`spouseLang_${l}`])||0;d<u&&(u=d)}if(u<9){const l=Math.min(u+1,9),d={};for(const c of o)d[`spouseLang_${c}`]=String(Math.max(parseInt(a[`spouseLang_${c}`])||0,l));const v=L(a,d).total-s.total;v>0&&n.push(N("Improve Spouse's Language Scores",`Your spouse's language improvement to CLB ${l} could add points.`,v,"Medium","2-4 months","language"))}}return n.sort((o,u)=>u.potentialGain-o.potentialGain),n}function Re(a){const s=a.total;return s>=500?{label:"Very Strong",months:"1-3",description:"You are very likely to receive an ITA in the next few draws."}:s>=470?{label:"Strong",months:"3-6",description:"Your score is competitive. An ITA is likely within a few months."}:s>=440?{label:"Moderate",months:"6-12",description:"Your score is near recent cutoffs. Category-based draws may help."}:s>=400?{label:"Below Average",months:"12-18",description:"You may need to improve your profile or target a category-based draw."}:{label:"Needs Improvement",months:"18+",description:"Significant profile improvements are recommended before applying."}}const Oe=[{id:"on",name:"Ontario",abbr:"ON",streams:["Human Capital Priorities","Skilled Trades","French-Speaking"],demandSectors:["stem","healthcare","trade"],minCLB:7,minEducation:"bachelors",minWorkYears:1,notes:"Largest province. Strong demand for tech, healthcare, and skilled trades. Ontario often sends NOIs to Express Entry candidates with CRS 400+."},{id:"bc",name:"British Columbia",abbr:"BC",streams:["Skills Immigration","Express Entry BC","Tech"],demandSectors:["stem","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:1,notes:"Tech hub (Vancouver). BC PNP Tech targets 29 in-demand occupations including software, data, and engineering roles."},{id:"ab",name:"Alberta",abbr:"AB",streams:["Alberta Advantage Immigration","Express Entry Stream"],demandSectors:["trade","healthcare","stem","transport"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Strong energy/oil sector. Growing tech scene in Calgary and Edmonton. Lower cost of living than ON/BC."},{id:"sk",name:"Saskatchewan",abbr:"SK",streams:["International Skilled Worker","Express Entry"],demandSectors:["agriculture","healthcare","trade","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"In-Demand Occupations list is broad. One of the easiest PNPs to qualify for. Agriculture and mining are key industries."},{id:"mb",name:"Manitoba",abbr:"MB",streams:["Skilled Workers Overseas","Skilled Workers in Manitoba"],demandSectors:["healthcare","agriculture","trade","transport"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Welcoming to newcomers. Strong need for healthcare workers and tradespeople. Lower CRS requirements than federal draws."},{id:"ns",name:"Nova Scotia",abbr:"NS",streams:["Labour Market Priorities","Skilled Worker","Physician"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing tech sector in Halifax. Healthcare workers are highly sought after."},{id:"nb",name:"New Brunswick",abbr:"NB",streams:["Express Entry Labour Market","Skilled Workers with Employer Support"],demandSectors:["healthcare","trade","agriculture"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Bilingual province (English/French). Part of Atlantic Immigration Program. Francophone candidates get priority."},{id:"pe",name:"Prince Edward Island",abbr:"PE",streams:["Express Entry","Labour Impact"],demandSectors:["agriculture","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:2,notes:"Small province with lower competition. Agriculture and tourism are key industries."},{id:"nl",name:"Newfoundland & Labrador",abbr:"NL",streams:["Express Entry","Skilled Worker","Priority Skills"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing need for healthcare and tech workers. Oil and gas sector."},{id:"yt",name:"Yukon",abbr:"YT",streams:["Yukon Express Entry","Skilled Worker"],demandSectors:["trade","healthcare","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"Territory with small population. Job offer typically required. Good for tradespeople and healthcare workers."}],O={less_than_secondary:0,secondary:1,one_year_post:2,two_year_post:3,bachelors:4,two_or_more:5,masters:6,doctoral:7};function Ye(a,s){return(O[a]||0)>=(O[s]||0)}function De(a){const s=Ge(a),n=a.education||"secondary",i=Math.max(parseInt(a.canadianWorkExp)||0,parseInt(a.foreignWorkExp)||0),r=a.occupationCategory||"other",h=a.hasFrench==="yes";return Oe.map(m=>{let o=0;const u=100;s>=m.minCLB&&(o+=20,s>=m.minCLB+2&&(o+=10)),Ye(n,m.minEducation)&&(o+=15,(O[n]||0)>=4&&(o+=5)),i>=m.minWorkYears&&(o+=15,i>=3&&(o+=5)),m.demandSectors.includes(r)&&(o+=25),h&&(m.id==="nb"||m.id==="on")&&(o+=5);const l=Math.min(Math.round(o/u*100),100);return{...m,matchScore:l}}).sort((m,o)=>o.matchScore-m.matchScore)}function Ge(a){if(a.langTestType==="celpip"){const n=["listening","reading","writing","speaking"].map(i=>parseInt(a[`celpip_${i}`])||0);return Math.min(...n)}if(a.langTestType==="ielts"){const n=["listening","reading","writing","speaking"].map(i=>{const r=parseFloat(a[`ielts_${i}`])||0;return r>=8?10:r>=7?9:r>=6.5?8:r>=6?7:r>=5.5?6:r>=5?5:r>=4?4:0});return Math.min(...n)}return 0}const H={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},y={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:18}}};function He({value:a,duration:s=1.2}){const[n,i]=x.useState(0);return x.useEffect(()=>{const r=a,h=performance.now(),m=o=>{const u=(o-h)/(s*1e3);if(u>=1){i(r);return}const l=1-Math.pow(1-u,3);i(Math.round(r*l)),requestAnimationFrame(m)};requestAnimationFrame(m)},[a,s]),e.jsx(e.Fragment,{children:n})}function qe({score:a,statusColor:s}){const i=2*Math.PI*54,r=Math.min(a/1200,1);return e.jsxs("div",{className:"score-gauge","aria-label":`CRS Score: ${a} out of 1200`,children:[e.jsxs("svg",{viewBox:"0 0 120 120",width:"180",height:"180",children:[e.jsx("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:"var(--surface-2)",strokeWidth:"8"}),e.jsx(p.circle,{cx:"60",cy:"60",r:54,fill:"none",stroke:s,strokeWidth:"8",strokeLinecap:"round",transform:"rotate(-90 60 60)",strokeDasharray:i,initial:{strokeDashoffset:i},animate:{strokeDashoffset:i-r*i},transition:{duration:1.4,ease:[.22,1,.36,1]}})]}),e.jsxs("div",{className:"gauge-text",children:[e.jsx("div",{className:"gauge-number","aria-live":"polite",children:e.jsx(He,{value:a})}),e.jsx("div",{className:"gauge-max",children:"/ 1,200"})]})]})}function Je({icon:a,label:s,value:n,max:i,note:r}){const h=Math.round(n/i*100);return e.jsxs(p.div,{className:"bd-item",variants:y,children:[e.jsx("span",{className:"bd-icon",children:a}),e.jsxs("div",{className:"bd-info",children:[e.jsxs("div",{className:"bd-top",children:[e.jsxs("span",{className:"bd-label",children:[s,r&&e.jsxs("small",{className:"bd-note",children:[" (",r,")"]})]}),e.jsxs("span",{className:"bd-pts",children:[n," ",e.jsxs("small",{children:["/ ",i]})]})]}),e.jsx("div",{className:"bd-bar-bg",children:e.jsx(p.div,{className:"bd-bar-fill",initial:{width:0},animate:{width:`${h}%`},transition:{duration:.8,delay:.3,ease:"easeOut"}})})]})]})}function R({draw:a,userScore:s}){const n=s>=a.score;return e.jsxs("div",{className:`draw-row ${n?"draw-above":"draw-below"}`,children:[e.jsx("span",{className:"draw-date",children:a.date}),e.jsx("span",{className:"draw-program",children:a.program}),e.jsx("span",{className:"draw-score",children:a.score})]})}const ze=[{value:"secondary",label:"High School"},{value:"one_year_post",label:"1-Year Diploma"},{value:"two_year_post",label:"2-Year Diploma"},{value:"bachelors",label:"Bachelor's"},{value:"two_or_more",label:"2+ Credentials"},{value:"masters",label:"Master's"},{value:"doctoral",label:"PhD"}];function Ue({answers:a,originalScore:s,t:n}){const[i,r]=x.useState(a.age||""),[h,m]=x.useState(a.education||""),[o,u]=x.useState(a.canadianWorkExp||"0"),[l,d]=x.useState(""),b=x.useMemo(()=>{const c={};if(i&&i!==a.age&&(c.age=i),h&&h!==a.education&&(c.education=h),o&&o!==a.canadianWorkExp&&(c.canadianWorkExp=o),l){const w=["listening","reading","writing","speaking"],k=a.langTestType==="celpip"?"celpip":"ielts";for(const C of w){const g=`${k}_${C}`;a.langTestType==="celpip"?c[g]=String(Math.max(parseInt(a[g])||0,parseInt(l))):c[g]=String(Math.max(parseFloat(a[g])||0,parseFloat(l)))}}return Object.keys(c).length===0?null:L(a,c)},[a,i,h,o,l]),v=b?b.total-s:0;return e.jsxs("div",{className:"whatif-panel",children:[e.jsxs("div",{className:"wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Age"}),e.jsxs("select",{value:i,onChange:c=>r(c.target.value),children:[e.jsx("option",{value:"",children:"Current"}),Array.from({length:30},(c,w)=>w+18).map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Education"}),e.jsxs("select",{value:h,onChange:c=>m(c.target.value),children:[e.jsx("option",{value:"",children:"Current"}),ze.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Canadian Work (yrs)"}),e.jsx("select",{value:o,onChange:c=>u(c.target.value),children:[0,1,2,3,4,5].map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Min Language CLB"}),e.jsxs("select",{value:l,onChange:c=>d(c.target.value),children:[e.jsx("option",{value:"",children:"Current"}),[5,6,7,8,9,10].map(c=>e.jsxs("option",{value:c,children:["CLB ",c,"+"]},c))]})]})]}),b&&e.jsx(p.div,{className:"wi-result",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"wi-scores",children:[e.jsxs("div",{className:"wi-score-block",children:[e.jsx("small",{children:n("results.original")}),e.jsx("strong",{children:s})]}),e.jsx("span",{className:"wi-arrow",children:"→"}),e.jsxs("div",{className:"wi-score-block projected",children:[e.jsx("small",{children:n("results.projected")}),e.jsx("strong",{children:b.total})]}),e.jsxs("span",{className:`wi-delta ${v>0?"pos":v<0?"neg":""}`,children:[v>0?"+":"",v," pts"]})]})})]})}function Ve(){return e.jsx(p.div,{className:"loading-screen",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.95,transition:{duration:.3}},children:e.jsx(Ne,{})})}function Ke(a){const s=x.useRef(null);return x.useEffect(()=>{if(!a)return;const n=s.current;if(!n)return;const i=n.getContext("2d");n.width=window.innerWidth,n.height=window.innerHeight;const r=["#22c55e","#4CC9F0","#7C3AED","#f59e0b","#ec4899","#3A0CA3"],h=Array.from({length:120},()=>({x:Math.random()*n.width,y:Math.random()*n.height-n.height,w:Math.random()*8+4,h:Math.random()*6+2,color:r[Math.floor(Math.random()*r.length)],vx:(Math.random()-.5)*4,vy:Math.random()*3+2,rot:Math.random()*360,rv:(Math.random()-.5)*8}));let m;const o=()=>{i.clearRect(0,0,n.width,n.height);let l=!1;for(const d of h)d.x+=d.vx,d.y+=d.vy,d.rot+=d.rv,d.vy+=.05,d.y<n.height+20&&(l=!0),i.save(),i.translate(d.x,d.y),i.rotate(d.rot*Math.PI/180),i.fillStyle=d.color,i.fillRect(-d.w/2,-d.h/2,d.w,d.h),i.restore();l&&(m=requestAnimationFrame(o))};m=requestAnimationFrame(o);const u=setTimeout(()=>{cancelAnimationFrame(m),i.clearRect(0,0,n.width,n.height)},4e3);return()=>{cancelAnimationFrame(m),clearTimeout(u)}},[a]),s}function Xe({answers:a,onRestart:s}){const{t:n}=ve(),[i,r]=x.useState(!0),[h,m]=x.useState(!1),[o,u]=x.useState(!1),[l,d]=x.useState(!1),[b,v]=x.useState(!1),[c,w]=x.useState(!1);x.useEffect(()=>{const t=setTimeout(()=>r(!1),2500);return()=>clearTimeout(t)},[]);const k=x.useMemo(()=>{if(a.knowsScore==="yes"){const t=parseInt(a.scoreRange)||400;return{total:t,breakdown:{coreHumanCapital:t,spouseFactors:0,skillTransferability:0,additionalPoints:0},details:{age:0,education:0,firstLanguage:0,secondLanguage:0,canadianWork:0,foreignWork:0,spouseTotal:0,skillTotal:0,additionalTotal:0}}}return V(a)},[a]),C=a.knowsScore!=="yes",g=k.total,S=T.averageCutoff,E=g-S,_=E>=20?{cls:"above",marker:"+",title:"Great News!",desc:`Your score is ${E} points above the recent cut-off (${S}). You have a strong chance of receiving an Invitation to Apply.`,color:"#22c55e"}:E>=-10?{cls:"close",marker:"~",title:"Almost There!",desc:`You're just ${Math.abs(E)} points ${E>=0?"above":"below"} the recent cut-off (${S}). A few small improvements could make the difference.`,color:"#f59e0b"}:{cls:"below",marker:"—",title:"Room to Improve",desc:`You're ${Math.abs(E)} points below the recent cut-off (${S}). Don't worry — see the suggestions below to boost your score.`,color:"#ef4444"},I=x.useMemo(()=>Ae(a,k),[a,k]),$=x.useMemo(()=>Re(k),[k]),j=k.details,K=x.useMemo(()=>{const t=[{icon:"A",label:"Age",value:j.age,max:110},{icon:"E",label:"Education",value:j.education,max:150},{icon:"L",label:"English Language",value:j.firstLanguage,max:136},{icon:"W",label:"Canadian Work",value:j.canadianWork,max:80}];return j.secondLanguage>0&&t.splice(3,0,{icon:"F",label:"French",value:j.secondLanguage,max:24}),j.foreignWork>0?t.push({icon:"S",label:n("results.foreignWork"),value:j.skillTotal,max:100,note:"via skill transferability"}):t.push({icon:"S",label:"Skill Bonus",value:j.skillTotal,max:100}),j.spouseTotal>0&&t.push({icon:"P",label:"Spouse",value:j.spouseTotal,max:40}),j.additionalTotal>0&&t.push({icon:"+",label:"Bonus Points",value:j.additionalTotal,max:600}),t},[j,n]),Q=I.slice(0,3),F=I.slice(3),X=a.pathway,B=ke[X],D=x.useMemo(()=>C?De(a):[],[a,C]),G=!i&&E>=20,Z=Ke(G),A=`${window.location.origin}${window.location.pathname}#${je(a)}`,ee=async()=>{try{if(navigator.share){await navigator.share({title:"My CRS Score",text:`My CRS score is ${g}/1200!`,url:A});return}}catch{}try{await navigator.clipboard.writeText(A)}catch{const t=document.createElement("textarea");t.value=A,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}w(!0),setTimeout(()=>w(!1),2e3)},ae=()=>window.print();return i?e.jsx(Ve,{}):e.jsxs(p.div,{className:"results",variants:H,initial:"hidden",animate:"show",exit:{opacity:0,transition:{duration:.2}},children:[G&&e.jsx("canvas",{ref:Z,className:"confetti-canvas"}),e.jsx(p.div,{className:"score-hero",variants:y,children:e.jsx(qe,{score:g,statusColor:_.color})}),e.jsxs(p.div,{className:"result-actions",variants:y,children:[e.jsx("button",{className:"action-btn",onClick:ee,"aria-label":"Share results",children:c?"✓ Copied!":n("results.share")}),e.jsx("button",{className:"action-btn",onClick:ae,"aria-label":"Download PDF",children:n("results.pdf")})]}),e.jsxs(p.div,{className:`card status-card ${_.cls}-card`,variants:y,children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:`status-marker ${_.cls}`,children:_.marker})," ",e.jsx("strong",{children:_.title})]}),e.jsx("p",{className:"status-desc",children:_.desc}),e.jsxs("div",{className:"cutoff-compare",children:[e.jsx(q,{label:"Your Score",value:g,max:Math.max(g,S,600),color:"var(--primary)"}),e.jsx(q,{label:"Cut-off",value:S,max:Math.max(g,S,600),color:"var(--surface-3)"})]})]}),C&&e.jsxs(p.div,{className:"card",variants:y,children:[e.jsx("h3",{children:n("results.breakdown")}),e.jsx(p.div,{className:"breakdown-grid",variants:H,initial:"hidden",animate:"show",children:K.map(t=>e.jsx(Je,{...t},t.label))}),e.jsxs("div",{className:"bd-total",children:[e.jsx("span",{children:"Total CRS Score"}),e.jsx("span",{className:"bd-total-num",children:g})]})]}),C&&e.jsxs(p.div,{className:"card whatif-card",variants:y,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>d(!l),children:[n("results.whatif")," ",e.jsx("span",{className:"toggle-arrow",children:l?"▲":"▼"})]}),l&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("p",{className:"cat-intro",children:n("results.whatifDesc")}),e.jsx(Ue,{answers:a,originalScore:g,t:n})]})]}),I.length>0&&e.jsxs(p.div,{className:"card",variants:y,children:[e.jsx("h3",{children:n("results.improve")}),Q.map((t,f)=>e.jsxs(p.div,{className:"action-card",variants:y,children:[e.jsx("div",{className:"action-rank",children:f+1}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[t.title,t.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",t.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:t.description}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:t.timeframe}),e.jsx("span",{className:`action-diff diff-${t.difficulty.toLowerCase()}`,children:t.difficulty})]})]})]},f)),F.length>0&&e.jsxs(e.Fragment,{children:[h&&F.map((t,f)=>e.jsxs(p.div,{className:"action-card",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"action-rank",children:f+4}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[t.title,t.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",t.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:t.description}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:t.timeframe}),e.jsx("span",{className:`action-diff diff-${t.difficulty.toLowerCase()}`,children:t.difficulty})]})]})]},f+3)),e.jsx("button",{className:"btn-toggle",onClick:()=>m(!h),children:h?"Show fewer ▲":`Show ${F.length} more suggestions ▼`})]})]}),C&&e.jsxs(p.div,{className:"card",variants:y,children:[e.jsx("h3",{children:n("results.category")}),e.jsx("p",{className:"cat-intro",children:n("results.catIntro")}),e.jsx("div",{className:"cat-grid",children:we.map(t=>{const f=t.check(a),W=f&&g>=t.recentCutoff;return e.jsxs(p.div,{className:`cat-card ${f?W?"cat-above":"cat-eligible":"cat-na"}`,variants:y,children:[e.jsxs("div",{className:"cat-header",children:[e.jsx("span",{className:"cat-icon",children:t.icon}),e.jsxs("div",{children:[e.jsx("strong",{className:"cat-name",children:t.name}),f&&e.jsx("span",{className:`cat-badge ${W?"badge-above":"badge-eligible"}`,children:W?"Above Cutoff":"Eligible"}),!f&&e.jsx("span",{className:"cat-badge badge-na",children:"Not Eligible"})]})]}),e.jsx("p",{className:"cat-desc",children:t.description}),e.jsxs("div",{className:"cat-cutoff",children:[e.jsxs("span",{children:["Recent cutoff: ",e.jsx("strong",{children:t.recentCutoff})]}),e.jsxs("span",{className:"cat-range",children:["Range: ",t.cutoffRange]})]}),f&&e.jsxs("div",{className:"cat-compare",children:[e.jsxs("div",{className:"cat-bar-wrap",children:[e.jsx(p.div,{className:`cat-bar ${W?"bar-above":"bar-below"}`,initial:{width:0},animate:{width:`${Math.min(g/Math.max(g,t.recentCutoff+50)*100,100)}%`},transition:{duration:.8,ease:"easeOut"}}),e.jsx("div",{className:"cat-marker",style:{left:`${t.recentCutoff/Math.max(g,t.recentCutoff+50)*100}%`}})]}),e.jsxs("div",{className:"cat-labels",children:[e.jsxs("span",{children:["Your score: ",g]}),e.jsxs("span",{children:["Cutoff: ",t.recentCutoff]})]})]}),!f&&e.jsx("p",{className:"cat-req",children:t.eligibility})]},t.id)})})]}),C&&D.length>0&&e.jsxs(p.div,{className:"card",variants:y,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>v(!b),children:["Province Recommender ",e.jsx("span",{className:"toggle-arrow",children:b?"▲":"▼"})]}),b&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("p",{className:"cat-intro",children:"Based on your profile, these provinces may be good matches for Provincial Nominee Programs."}),e.jsx("div",{className:"prov-grid",children:D.slice(0,5).map(t=>e.jsxs("div",{className:"prov-card",children:[e.jsxs("div",{className:"prov-header",children:[e.jsx("span",{className:"prov-abbr",children:t.abbr}),e.jsxs("div",{children:[e.jsx("strong",{className:"prov-name",children:t.name}),e.jsxs("span",{className:`prov-match ${t.matchScore>=70?"match-high":t.matchScore>=40?"match-mid":"match-low"}`,children:[t.matchScore,"% match"]})]})]}),e.jsx("div",{className:"prov-bar-wrap",children:e.jsx(p.div,{className:"prov-bar",initial:{width:0},animate:{width:`${t.matchScore}%`},transition:{duration:.8,ease:"easeOut"},style:{background:t.matchScore>=70?"#22c55e":t.matchScore>=40?"#f59e0b":"var(--surface-3)"}})}),e.jsx("p",{className:"prov-notes",children:t.notes}),e.jsx("div",{className:"prov-streams",children:t.streams.map(f=>e.jsx("span",{className:"prov-stream",children:f},f))})]},t.id))})]})]}),e.jsxs(p.div,{className:"card",variants:y,children:[e.jsx("h3",{children:n("results.timeline")}),e.jsxs("div",{className:`timeline-badge tl-${_.cls}`,children:[e.jsx("strong",{children:$.label})," — est. ",$.months," months"]}),e.jsx("p",{className:"timeline-desc",children:$.description})]}),e.jsxs(p.div,{className:"card",variants:y,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>u(!o),children:[n("results.draws")," ",e.jsx("span",{className:"toggle-arrow",children:o?"▲":"▼"})]}),o&&e.jsxs(p.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"draws-content",children:[e.jsx("h4",{className:"draws-subhead",children:"General / CEC Draws"}),T.generalProgram.slice(0,4).map((t,f)=>e.jsx(R,{draw:t,userScore:g},`g${f}`)),e.jsx("h4",{className:"draws-subhead",children:"Category-Based Draws"}),T.categoryBased.slice(0,4).map((t,f)=>e.jsx(R,{draw:t,userScore:g},`c${f}`)),T.pnpDraws?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"draws-subhead",children:"Provincial Nominee (PNP)"}),T.pnpDraws.slice(0,3).map((t,f)=>e.jsx(R,{draw:t,userScore:g},`p${f}`))]})]})]}),B&&e.jsxs(p.div,{className:"card",variants:y,children:[e.jsxs("h3",{children:[B.name," Requirements"]}),e.jsx("ul",{className:"pathway-list",children:B.requirements.map((t,f)=>e.jsx("li",{children:t},f))})]}),e.jsx(p.div,{className:"card disclaimer",variants:y,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Disclaimer:"})," ",n("results.disclaimer")," ",e.jsx("a",{href:"https://www.canada.ca/en/immigration-refugees-citizenship.html",target:"_blank",rel:"noopener noreferrer",children:"canada.ca"})]})}),e.jsx(p.button,{className:"btn-restart",onClick:s,whileHover:{scale:1.03},whileTap:{scale:.96},variants:y,children:n("results.restart")})]})}function q({label:a,value:s,max:n,color:i}){const r=Math.round(s/n*100);return e.jsxs("div",{className:"cutoff-row",children:[e.jsx("span",{className:"cutoff-label",children:a}),e.jsx("div",{className:"cutoff-bar-wrap",children:e.jsx(p.div,{className:"cutoff-bar",style:{background:i},initial:{width:0},animate:{width:`${r}%`},transition:{duration:.8,ease:"easeOut"},children:s})})]})}export{Xe as default};
