import{r as l,j as e}from"./vendor-react-Ah1pgjPn.js";import{u as M}from"./data-question-bank-BGQJyrDZ.js";import{u as V}from"./feature-strategy-hub-DjfosD2y.js";import{S as W}from"./feature-path-coach-BhTfkEQA.js";import{p as G,g as U}from"./questionDataSource-DrI8EsUl.js";import{p as z}from"./index-xsxJh8bE.js";import{u as X,m as j,A as J}from"./vendor-motion-CtNR3TjB.js";const Y=[{noc:"00010",title:"Financial Manager",teer:"teer_0",keywords:"finance banking accounting"},{noc:"00012",title:"Human Resources Manager",teer:"teer_0",keywords:"hr personnel staffing"},{noc:"00013",title:"Purchasing Manager",teer:"teer_0",keywords:"procurement supply chain"},{noc:"00015",title:"Senior Government Manager",teer:"teer_0",keywords:"government public administration"},{noc:"10010",title:"Engineering Manager",teer:"teer_0",keywords:"engineering technical director"},{noc:"10019",title:"IT Manager",teer:"teer_0",keywords:"technology information systems director CTO"},{noc:"10020",title:"Construction Manager",teer:"teer_0",keywords:"building project site superintendent"},{noc:"10029",title:"Restaurant Manager",teer:"teer_0",keywords:"food service hospitality hotel"},{noc:"20010",title:"Sales Manager",teer:"teer_0",keywords:"marketing retail business development"},{noc:"21210",title:"Software Developer",teer:"teer_1",keywords:"programmer coder web app frontend backend fullstack"},{noc:"21211",title:"Data Scientist",teer:"teer_1",keywords:"machine learning AI analytics big data"},{noc:"21220",title:"Cybersecurity Analyst",teer:"teer_1",keywords:"security information network"},{noc:"21230",title:"Systems Analyst",teer:"teer_1",keywords:"IT consultant business analyst ERP"},{noc:"21310",title:"Civil Engineer",teer:"teer_1",keywords:"structural infrastructure roads bridges"},{noc:"21311",title:"Mechanical Engineer",teer:"teer_1",keywords:"machines HVAC automotive manufacturing"},{noc:"21320",title:"Electrical Engineer",teer:"teer_1",keywords:"electronics power systems circuits"},{noc:"21321",title:"Chemical Engineer",teer:"teer_1",keywords:"process plant petroleum refinery"},{noc:"31100",title:"Registered Nurse",teer:"teer_1",keywords:"RN nursing hospital patient care"},{noc:"31110",title:"Physician / Doctor",teer:"teer_1",keywords:"MD medical general practitioner specialist"},{noc:"31120",title:"Pharmacist",teer:"teer_1",keywords:"pharmacy medication dispensing"},{noc:"31121",title:"Dentist",teer:"teer_1",keywords:"dental oral surgeon teeth"},{noc:"31200",title:"Physiotherapist",teer:"teer_1",keywords:"physical therapy rehabilitation"},{noc:"41200",title:"Accountant",teer:"teer_1",keywords:"CPA auditor bookkeeper tax financial"},{noc:"41210",title:"Financial Analyst",teer:"teer_1",keywords:"investment banking equity research"},{noc:"41300",title:"Architect",teer:"teer_1",keywords:"building design urban planning"},{noc:"41400",title:"University Professor",teer:"teer_1",keywords:"teacher lecturer academic research"},{noc:"41401",title:"Secondary School Teacher",teer:"teer_1",keywords:"high school education teaching"},{noc:"41301",title:"Graphic Designer",teer:"teer_1",keywords:"visual UI UX creative design"},{noc:"21234",title:"Web Developer",teer:"teer_1",keywords:"website html css javascript react node"},{noc:"21223",title:"Database Analyst",teer:"teer_1",keywords:"SQL database administrator DBA"},{noc:"22100",title:"Electrician",teer:"teer_2",keywords:"electrical wiring power installation"},{noc:"22101",title:"Plumber",teer:"teer_2",keywords:"plumbing pipes water gas fitting"},{noc:"22110",title:"Welder",teer:"teer_2",keywords:"welding fabrication metal joining"},{noc:"22111",title:"Carpenter",teer:"teer_2",keywords:"woodwork framing construction cabinetry"},{noc:"22210",title:"Paralegal",teer:"teer_2",keywords:"legal assistant law clerk"},{noc:"22300",title:"Dental Hygienist",teer:"teer_2",keywords:"teeth cleaning oral health"},{noc:"22301",title:"Medical Lab Technician",teer:"teer_2",keywords:"laboratory blood test specimen"},{noc:"22220",title:"HVAC Technician",teer:"teer_2",keywords:"heating ventilation air conditioning refrigeration"},{noc:"22230",title:"Heavy Equipment Mechanic",teer:"teer_2",keywords:"machinery diesel repair maintenance"},{noc:"22310",title:"Automotive Mechanic",teer:"teer_2",keywords:"car vehicle repair service technician"},{noc:"33100",title:"Dental Assistant",teer:"teer_3",keywords:"dentistry chairside oral"},{noc:"33101",title:"Nurse Aide / Orderly",teer:"teer_3",keywords:"healthcare support patient nursing assistant"},{noc:"33102",title:"Pharmacy Technician",teer:"teer_3",keywords:"medication dispensing prescription"},{noc:"33110",title:"Baker",teer:"teer_3",keywords:"bakery pastry bread baking"},{noc:"33111",title:"Butcher / Meat Cutter",teer:"teer_3",keywords:"meat processing cutting food"},{noc:"33200",title:"Cook / Chef",teer:"teer_3",keywords:"cooking kitchen restaurant food preparation"},{noc:"73300",title:"Truck Driver",teer:"teer_3",keywords:"transport delivery long haul commercial driving"},{noc:"73301",title:"Bus Driver",teer:"teer_3",keywords:"transit public transport passenger"},{noc:"84100",title:"Farm Worker",teer:"teer_3",keywords:"agriculture livestock crop harvesting"},{noc:"84120",title:"Landscaping Worker",teer:"teer_3",keywords:"gardening grounds maintenance outdoor"}];function Z(t){if(!t||t.trim().length<2)return[];const s=t.toLowerCase().split(/\s+/);return Y.map(n=>{let o=0;for(const c of s)n.title.toLowerCase().includes(c)?o+=3:n.keywords.toLowerCase().includes(c)?o+=2:n.noc.includes(c)&&(o+=1);return{...n,score:o}}).filter(n=>n.score>0).sort((n,o)=>o.score-n.score).slice(0,8)}function F(t,s=220){const[r,n]=l.useState(t);return l.useEffect(()=>{const o=window.setTimeout(()=>n(t),s);return()=>window.clearTimeout(o)},[s,t]),r}function E(t,s){if(!t||!t.key)return!0;const r=s?.[t.key],n=t.value;switch(t.op){case"eq":return r===n;case"neq":return r!==n;case"in":return Array.isArray(n)?n.includes(r):!1;case"not_in":return Array.isArray(n)?!n.includes(r):!0;case"exists":return r!=null&&r!=="";case"not_exists":return r==null||r==="";default:return r===n}}function N(t,s){const r=t?.visibility;if(!r)return!0;const n=Array.isArray(r.all)?r.all:[],o=Array.isArray(r.any)?r.any:[],c=Array.isArray(r.none)?r.none:[],y=n.every(d=>E(d,s)),m=o.length===0||o.some(d=>E(d,s)),w=c.every(d=>!E(d,s));return y&&m&&w}function H(t,s){return t?t.type==="grouped"?t.groups.every(r=>!!s[r.answerKey]):!!s[t.answerKey]:!1}function I(t,s){for(let r=0;r<t.length;r+=1)if(N(t[r],s))return r;return 0}function O(t,s="list"){return t==="grid"?"grid":t==="grid-wide"?"grid-wide":s}const ee={enter:t=>({x:t>0?80:-80,opacity:0}),center:{x:0,opacity:1},exit:t=>({x:t>0?-80:80,opacity:0})};function te({pct:t}){return e.jsxs("div",{className:"wiz-progress-container",children:[e.jsx("div",{className:"uv-progress-bar",style:{width:`${t}%`}}),e.jsxs("div",{className:"uv-progress-text",children:[t,"%"]}),e.jsxs("div",{className:"uv-particles",children:[e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"})]})]})}function re({opt:t,selected:s,layout:r,onSelect:n,reducedMotion:o=!1}){return e.jsxs(j.button,{type:"button",className:`opt-btn${s?" selected":""} ${r}`,onClick:n,"aria-pressed":s,whileHover:o?void 0:{scale:1.02},whileTap:o?void 0:{scale:.97},layout:!0,children:[r==="list"&&e.jsx("span",{className:"radio-dot"}),e.jsxs("span",{className:"opt-content",children:[e.jsx("span",{className:"opt-label",children:t.label}),t.example&&e.jsx("span",{className:"opt-example",children:t.example})]})]})}function se({text:t}){const[s,r]=l.useState(!1),n=l.useId();return e.jsxs("span",{className:"help-tip-wrap",children:[e.jsx("button",{className:"help-tip-btn",onClick:()=>r(!s),"aria-label":"More info","aria-expanded":s,"aria-controls":n,type:"button",children:"?"}),s&&e.jsx("div",{id:n,className:"help-tip-bubble",onClick:()=>r(!1),children:t})]})}function ne({onSelect:t}){const[s,r]=l.useState(""),n=F(s,240),o=l.useMemo(()=>Z(n),[n]);return e.jsxs("div",{className:"noc-search",children:[e.jsxs("div",{className:"option-search-wrap glass-search",children:[e.jsx("span",{className:"option-search-icon",children:"⌕"}),e.jsx("input",{className:"option-search-input",type:"text",placeholder:"Search your job title (e.g. Software Developer, Nurse)",value:s,onChange:c=>r(c.target.value),"aria-label":"Search NOC job titles"})]}),o.length>0&&e.jsx("div",{className:"noc-results",children:o.map(c=>e.jsxs("button",{className:"noc-result",onClick:()=>{t(c.teer),r("")},type:"button",children:[e.jsx("span",{className:"noc-code",children:c.noc}),e.jsx("span",{className:"noc-title",children:c.title}),e.jsx("span",{className:"noc-teer",children:c.teer.replace("teer_","TEER ")})]},c.noc))})]})}function Q({options:t,answerKey:s,layout:r,answers:n,onAnswer:o,searchable:c=!1,searchPlaceholder:y="Search options...",reducedMotion:m=!1}){const[w,d]=l.useState(""),k=F(w,180),u=c||t.length>=12,b=l.useMemo(()=>{if(!u||!k.trim())return t;const p=k.trim().toLowerCase();return t.filter(g=>[g.label,g.example||"",...Array.isArray(g.keywords)?g.keywords:[]].join(" ").toLowerCase().includes(p))},[k,t,u]);return e.jsxs(e.Fragment,{children:[u&&e.jsxs("div",{className:"option-search-wrap glass-search",children:[e.jsx("span",{className:"option-search-icon",children:"⌕"}),e.jsx("input",{className:"option-search-input",type:"text",value:w,onChange:p=>d(p.target.value),placeholder:y,"aria-label":`Search options for ${s}`})]}),e.jsx("div",{className:`opt-${r}`,children:b.map(p=>e.jsx(re,{opt:p,selected:n[s]===p.value,layout:r,onSelect:()=>o(s,p.value),reducedMotion:m},p.value))}),u&&b.length===0&&e.jsx("p",{className:"option-search-empty",children:"No options matched your search."})]})}function pe({onFinish:t,onProgress:s,initialAnswers:r,motionIntensity:n="full"}){const{t:o}=V(),c=X()||n!=="full",y=l.useMemo(()=>r||{},[r]),m=l.useMemo(()=>G(),[]),w=l.useMemo(()=>Array.isArray(m?.data)&&m.data.length>0?m.data:M,[m]),[d,k]=l.useState(y),[u,b]=l.useState(()=>w),[p,g]=l.useState(()=>I(w,y)),[f,C]=l.useState([]),[P,T]=l.useState(1);l.useEffect(()=>{let a=!0;return U().then(h=>{if(!a)return;const _=Array.isArray(h?.data)&&h.data.length>0?h.data:M;b(_),C([]),g(I(_,y))}).catch(()=>{a&&b(M)}),()=>{a=!1}},[y]);const i=u[p],A=l.useCallback((a,h)=>{k(_=>{const B={..._,[a]:h};return s&&s(B),B})},[s]),D=l.useMemo(()=>Math.max(1,u.filter(a=>N(a,d)).length),[d,u]),L=l.useMemo(()=>{let a=0;for(let h=0;h<=p;h+=1)N(u[h],d)&&(a+=1);return Math.max(1,a)},[d,p,u]),x=Math.round(L/D*100),v=l.useMemo(()=>{if(!i)return!1;for(let a=p+1;a<u.length;a+=1)if(N(u[a],d))return!1;return!0},[d,p,i,u]);l.useEffect(()=>{x>=65&&z({idle:!0})},[x]);const R=l.useCallback(()=>{(v||x>=65)&&z()},[v,x]),K=l.useCallback(()=>{if(!i||!H(i,d))return;T(1),C(h=>[...h,p]);let a=p+1;for(;a<u.length&&!N(u[a],d);)a+=1;a>=u.length?t(d):g(a)},[d,p,t,i,u]),$=l.useCallback(()=>{if(f.length===0)return;T(-1);const a=f[f.length-1];C(h=>h.slice(0,-1)),g(a)},[f]);if(!i)return e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Question set unavailable"}),e.jsx("p",{children:"Please refresh and try again."})]});const S=H(i,d),q=O(i.type,i.layout||"list");return e.jsxs(j.div,{className:"wizard",initial:c?!1:{opacity:0,y:30},animate:{opacity:1,y:0},exit:c?{opacity:0}:{opacity:0,y:-30,transition:{duration:.25}},role:"form","aria-label":"CRS Calculator wizard",children:[e.jsxs("div",{className:"progress-bar-wrap",children:[e.jsx("div",{className:"progress-info",children:e.jsxs("span",{children:[o("wizard.step")," ",L," ",o("wizard.of")," ",D]})}),e.jsx(te,{pct:x})]}),e.jsx(J,{mode:"wait",custom:P,children:e.jsxs(j.div,{className:"step-wrap",custom:P,variants:ee,initial:"enter",animate:"center",exit:"exit",transition:c?{duration:0}:{type:"spring",stiffness:200,damping:26},children:[e.jsx("span",{className:"step-label",children:i.label}),e.jsxs("h2",{className:"step-title",children:[i.title," ",i.helpTip&&e.jsx(se,{text:i.helpTip})]}),i.subtitle&&e.jsx("p",{className:"step-subtitle",children:i.subtitle}),i.hasNOCSearch&&e.jsx(ne,{onSelect:a=>A(i.answerKey,a)}),(i.type==="single"||i.type==="grid"||i.type==="grid-wide")&&e.jsx(Q,{options:i.options,answerKey:i.answerKey,layout:q,answers:d,onAnswer:A,searchable:i.searchable,searchPlaceholder:i.searchPlaceholder,reducedMotion:c}),i.type==="grouped"&&i.groups.map(a=>e.jsxs("div",{className:"question-group",children:[e.jsx("h3",{children:a.title}),e.jsx(Q,{options:a.options,answerKey:a.answerKey,layout:O(a.type,"list"),answers:d,onAnswer:A,searchable:a.searchable,searchPlaceholder:a.searchPlaceholder,reducedMotion:c})]},a.answerKey))]},i.id)}),e.jsxs("div",{className:"wizard-nav",children:[f.length>0&&e.jsx(j.button,{type:"button",className:"btn-back",onClick:$,whileHover:c?void 0:{x:-3},whileTap:c?void 0:{scale:.95},"aria-label":"Go back",children:o("wizard.back")}),e.jsx(W,{color:"var(--primary)",speed:"5s",children:e.jsx(j.button,{type:"button",className:`btn-next${v?" finish":""}`,disabled:!S,onClick:K,onMouseEnter:R,onFocus:R,whileHover:S&&!c?{scale:1.02}:void 0,whileTap:S&&!c?{scale:.97}:void 0,"aria-label":v?"Calculate score":"Next step",children:o(v?"wizard.calculate":"wizard.next")})})]})]})}export{pe as default};
