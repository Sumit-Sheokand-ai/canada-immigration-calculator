import{c as te,a as ne,b as ie,e as re,f as oe,s as ce,d as le,g as de,h as he,i as ue,j as me,k as pe,l as fe,m as ge,n as xe,o as ye,p as je,q as be,u as ve,r as f,t as ke,v as e,w as p,x as we,y as M,z as Ne,A as Ce}from"./index-CBy6SNQS.js";const Se=(a,s,t)=>Math.max(s,Math.min(t,a));function Le(a){const s={...a};if(a.hasFrench==="yes"&&a.frenchTestType==="tef")for(const t of["listening","reading","writing","speaking"])s[`french_${t}`]=String(te(t,parseInt(a[`tef_${t}`])||0));else if(a.hasFrench==="yes"&&a.frenchTestType==="tcf")for(const t of["listening","reading","writing","speaking"])s[`french_${t}`]=String(ne(t,parseInt(a[`tcf_${t}`])||0));return s}function Y(a){return a.hasSpouse==="yes"&&a.spouseIsCanadian!=="yes"&&a.spouseAccompanying!=="no"}const T=a=>Y(a)?1:0;function J(a,s){if(a.langTestType==="celpip")return Se(parseInt(a[`celpip_${s}`])||0,0,12);const t=parseFloat(a[`ielts_${s}`])||0;return ye(s,t)}function A(a){const s=["listening","reading","writing","speaking"];let t=99;for(const i of s){const r=J(a,i);r<t&&(t=r)}return t===99?0:t}function U(a,s){return parseInt(a[`french_${s}`])||0}function V(a){const s=["listening","reading","writing","speaking"];let t=99;for(const i of s){const r=U(a,i);r<t&&(t=r)}return t===99?0:t}function Ee(a){const s=A(a);return s>=9?2:s>=7?1:0}function _e(a){const s=parseInt(a.canadianWorkExp)||0;return s>=2?2:s>=1?1:0}function Me(a){const s=parseInt(a.foreignWorkExp)||0;return s>=3?2:s>=1?1:0}function Te(a){let s=parseInt(a.age);return isNaN(s)?0:(s<18&&(s=17),s>47&&(s=47),s>44&&(s=45),ie[s]?.[T(a)]||0)}function We(a){return re[a.education]?.[T(a)]||0}function Pe(a){const s=["listening","reading","writing","speaking"],t=T(a);return s.reduce((i,r)=>{const l=J(a,r);return i+(oe[l]?.[t]||0)},0)}function Ae(a){if(a.hasFrench!=="yes")return 0;const s=["listening","reading","writing","speaking"],t=T(a),i=s.reduce((r,l)=>{const u=U(a,l);return r+(ce[u]?.[t]||0)},0);return Math.min(i,t===0?24:22)}function Ie(a){let s=parseInt(a.canadianWorkExp)||0;return s>5&&(s=5),le[s]?.[T(a)]||0}function Fe(a){if(!Y(a))return 0;let s=0;s+=de[a.spouseEducation]||0;const t=["listening","reading","writing","speaking"];let i=0;for(const l of t){const u=parseInt(a[`spouseLang_${l}`])||0;i+=je[u]||0}s+=Math.min(i,20);let r=parseInt(a.spouseCanadianWork)||0;return r>5&&(r=5),s+=he[r]||0,Math.min(s,40)}function $e(a){const s=ue[a.education]||0,t=Ee(a),i=_e(a),r=Me(a),l=me[s]?.[t]||0,u=pe[s]?.[i]||0,o=Math.min(l+u,50),m=fe[r]?.[t]||0,d=ge[r]?.[i]||0,h=Math.min(m+d,50);let y=0;if(a.pathway==="fst"&&a.hasCertificate==="yes"){const j=A(a);y=be[j>=7?2:j>=5?1:0]}return Math.min(o+h+y,100)}function Be(a){let s=0;const t=xe;return a.hasPNP==="yes"&&(s+=t.pnp_nomination),a.hasJobOffer==="yes"&&(a.jobOfferTeer==="teer_0"&&a.jobOfferMajorGroup00==="yes"?s+=t.job_offer_00:["teer_0","teer_1","teer_2","teer_3"].includes(a.jobOfferTeer)&&(s+=t.job_offer_other)),a.canadianEducation==="yes"&&(s+=a.canadianEduType==="long"?t.canadian_edu_long:t.canadian_edu_short),a.hasSibling==="yes"&&(s+=t.sibling_in_canada),a.hasFrench==="yes"&&V(a)>=7&&(s+=A(a)>=5?t.french_strong_strong_english:t.french_strong_weak_english),Math.min(s,600)}function K(a){const s=Le(a),t=Te(s),i=We(s),r=Pe(s),l=Ae(s),u=Ie(s),o=parseInt(s.foreignWorkExp)||0,m=t+i+r+l+u,d=Fe(s),h=$e(s),y=Be(s);return{total:Math.min(m+d+h+y,1200),breakdown:{coreHumanCapital:m,spouseFactors:d,skillTransferability:h,additionalPoints:y},details:{age:t,education:i,firstLanguage:r,secondLanguage:l,canadianWork:u,foreignWork:o,spouseTotal:d,skillTotal:h,additionalTotal:y}}}function _(a,s){return K({...a,...s})}function N(a,s,t,i,r,l){return{title:a,description:s,potentialGain:t,difficulty:i,timeframe:r,icon:l}}function Oe(a,s){const t=[],i=A(a);if(i<10){const o=Math.min(i+1,10),m=a.langTestType==="celpip"?"CELPIP":"IELTS",d={},h=["listening","reading","writing","speaking"];for(const c of h){const w=a.langTestType==="celpip"?`celpip_${c}`:`ielts_${c}`,k=a.langTestType==="celpip"?parseInt(a[w])||0:parseFloat(a[w])||0;a.langTestType==="celpip"?d[w]=Math.max(k,o):d[w]=Math.max(k,k+.5)}const j=_(a,d).total-s.total;j>0&&t.push(N(`Improve ${m} Scores`,`Raising your weakest ${m} skill to CLB ${o} could add significant points. Focus on your lowest band.`,j,"Medium","2-4 months","language"))}const r=["less_than_secondary","secondary","one_year_post","two_year_post","bachelors","two_or_more","masters","doctoral"],l=r.indexOf(a.education);if(l>=0&&l<r.length-1){const o=r[l+1],d=_(a,{education:o}).total-s.total;if(d>0){const h={secondary:"high school diploma",one_year_post:"1-year diploma",two_year_post:"2-year diploma",bachelors:"bachelor's degree",two_or_more:"two credentials",masters:"master's degree",doctoral:"doctoral degree"};t.push(N("Higher Education",`Completing a ${h[o]||"higher credential"} could boost your score.`,d,"Hard","1-4 years","education"))}}const u=parseInt(a.canadianWorkExp)||0;if(u<5){const m=_(a,{canadianWorkExp:String(u+1)}).total-s.total;m>0&&t.push(N("Gain Canadian Work Experience","An additional year of Canadian work experience adds points across multiple categories including skill transferability.",m,"Hard","1 year","work"))}if(a.hasFrench!=="yes"){const d=_(a,{hasFrench:"yes",french_listening:"7",french_reading:"7",french_writing:"7",french_speaking:"7"}).total-s.total;d>0&&t.push(N("Learn French (TEF/TCF)",`Strong French skills (NCLC 7+) earn ${i>=5?"50":"25"} additional CRS points. Plus, French-language category draws have cutoffs around 400 — much lower than general draws (~520).`,d,"Hard","6-12 months","french"))}else V(a)>=7&&s.total<520&&s.total>=370&&t.push(N("Target French-Language Category Draw",`With your French NCLC 7+ scores, you qualify for French-language category draws where recent cutoffs are around 400 — your score of ${s.total} may already be competitive!`,0,"Easy","Immediate","french"));if(a.hasPNP!=="yes"&&t.push(N("Provincial Nominee Program","A PNP nomination adds 600 points, virtually guaranteeing an ITA. Explore programs in provinces like Ontario, BC, Alberta and Saskatchewan.",600,"Hard","3-12 months","province")),a.hasJobOffer!=="yes"){const m=_(a,{hasJobOffer:"yes",jobOfferTeer:"teer_0"}).total-s.total;m>0&&t.push(N("Obtain LMIA-Backed Job Offer","A valid job offer with LMIA in a TEER 0-3 occupation adds 50-200 points.",m,"Hard","3-6 months","job"))}if(a.canadianEducation!=="yes"&&t.push(N("Study in Canada","A Canadian credential (1-2 year program) adds 15 points, or 30 points for a 3+ year program.",30,"Hard","1-3 years","study")),a.hasSibling!=="yes"&&t.push(N("Sibling in Canada (If Applicable)","If you have a sibling who is a Canadian citizen or PR, this adds 15 points. Check if any siblings qualify.",15,"Easy","N/A","family")),Y(a)){const o=["listening","reading","writing","speaking"];let m=99;for(const d of o){const h=parseInt(a[`spouseLang_${d}`])||0;h<m&&(m=h)}if(m<9){const d=Math.min(m+1,9),h={};for(const c of o)h[`spouseLang_${c}`]=String(Math.max(parseInt(a[`spouseLang_${c}`])||0,d));const j=_(a,h).total-s.total;j>0&&t.push(N("Improve Spouse's Language Scores",`Your spouse's language improvement to CLB ${d} could add points.`,j,"Medium","2-4 months","language"))}}return t.sort((o,m)=>m.potentialGain-o.potentialGain),t}function Re(a){const s=a.total;return s>=500?{label:"Very Strong",months:"1-3",description:"You are very likely to receive an ITA in the next few draws."}:s>=470?{label:"Strong",months:"3-6",description:"Your score is competitive. An ITA is likely within a few months."}:s>=440?{label:"Moderate",months:"6-12",description:"Your score is near recent cutoffs. Category-based draws may help."}:s>=400?{label:"Below Average",months:"12-18",description:"You may need to improve your profile or target a category-based draw."}:{label:"Needs Improvement",months:"18+",description:"Significant profile improvements are recommended before applying."}}const De=[{id:"on",name:"Ontario",abbr:"ON",streams:["Human Capital Priorities","Skilled Trades","French-Speaking"],demandSectors:["stem","healthcare","trade"],minCLB:7,minEducation:"bachelors",minWorkYears:1,notes:"Largest province. Strong demand for tech, healthcare, and skilled trades. Ontario often sends NOIs to Express Entry candidates with CRS 400+."},{id:"bc",name:"British Columbia",abbr:"BC",streams:["Skills Immigration","Express Entry BC","Tech"],demandSectors:["stem","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:1,notes:"Tech hub (Vancouver). BC PNP Tech targets 29 in-demand occupations including software, data, and engineering roles."},{id:"ab",name:"Alberta",abbr:"AB",streams:["Alberta Advantage Immigration","Express Entry Stream"],demandSectors:["trade","healthcare","stem","transport"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Strong energy/oil sector. Growing tech scene in Calgary and Edmonton. Lower cost of living than ON/BC."},{id:"sk",name:"Saskatchewan",abbr:"SK",streams:["International Skilled Worker","Express Entry"],demandSectors:["agriculture","healthcare","trade","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"In-Demand Occupations list is broad. One of the easiest PNPs to qualify for. Agriculture and mining are key industries."},{id:"mb",name:"Manitoba",abbr:"MB",streams:["Skilled Workers Overseas","Skilled Workers in Manitoba"],demandSectors:["healthcare","agriculture","trade","transport"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Welcoming to newcomers. Strong need for healthcare workers and tradespeople. Lower CRS requirements than federal draws."},{id:"ns",name:"Nova Scotia",abbr:"NS",streams:["Labour Market Priorities","Skilled Worker","Physician"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing tech sector in Halifax. Healthcare workers are highly sought after."},{id:"nb",name:"New Brunswick",abbr:"NB",streams:["Express Entry Labour Market","Skilled Workers with Employer Support"],demandSectors:["healthcare","trade","agriculture"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Bilingual province (English/French). Part of Atlantic Immigration Program. Francophone candidates get priority."},{id:"pe",name:"Prince Edward Island",abbr:"PE",streams:["Express Entry","Labour Impact"],demandSectors:["agriculture","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:2,notes:"Small province with lower competition. Agriculture and tourism are key industries."},{id:"nl",name:"Newfoundland & Labrador",abbr:"NL",streams:["Express Entry","Skilled Worker","Priority Skills"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing need for healthcare and tech workers. Oil and gas sector."},{id:"yt",name:"Yukon",abbr:"YT",streams:["Yukon Express Entry","Skilled Worker"],demandSectors:["trade","healthcare","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"Territory with small population. Job offer typically required. Good for tradespeople and healthcare workers."}],D={less_than_secondary:0,secondary:1,one_year_post:2,two_year_post:3,bachelors:4,two_or_more:5,masters:6,doctoral:7};function Ye(a,s){return(D[a]||0)>=(D[s]||0)}function Ge(a){const s=He(a),t=a.education||"secondary",i=Math.max(parseInt(a.canadianWorkExp)||0,parseInt(a.foreignWorkExp)||0),r=a.occupationCategory||"other",l=a.hasFrench==="yes";return De.map(u=>{let o=0;const m=100;s>=u.minCLB&&(o+=20,s>=u.minCLB+2&&(o+=10)),Ye(t,u.minEducation)&&(o+=15,(D[t]||0)>=4&&(o+=5)),i>=u.minWorkYears&&(o+=15,i>=3&&(o+=5)),u.demandSectors.includes(r)&&(o+=25),l&&(u.id==="nb"||u.id==="on")&&(o+=5);const d=Math.min(Math.round(o/m*100),100);return{...u,matchScore:d}}).sort((u,o)=>o.matchScore-u.matchScore)}function He(a){if(a.langTestType==="celpip"){const t=["listening","reading","writing","speaking"].map(i=>parseInt(a[`celpip_${i}`])||0);return Math.min(...t)}if(a.langTestType==="ielts"){const t=["listening","reading","writing","speaking"].map(i=>{const r=parseFloat(a[`ielts_${i}`])||0;return r>=8?10:r>=7?9:r>=6.5?8:r>=6?7:r>=5.5?6:r>=5?5:r>=4?4:0});return Math.min(...t)}return 0}const q={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},b={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:18}}};function qe({value:a,duration:s=1.2}){const[t,i]=f.useState(0);return f.useEffect(()=>{const r=a,l=performance.now(),u=o=>{const m=(o-l)/(s*1e3);if(m>=1){i(r);return}const d=1-Math.pow(1-m,3);i(Math.round(r*d)),requestAnimationFrame(u)};requestAnimationFrame(u)},[a,s]),e.jsx(e.Fragment,{children:t})}function ze({score:a,statusColor:s}){const i=2*Math.PI*54,r=Math.min(a/1200,1);return e.jsxs("div",{className:"score-gauge","aria-label":`CRS Score: ${a} out of 1200`,children:[e.jsxs("svg",{viewBox:"0 0 120 120",width:"180",height:"180",children:[e.jsx("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:"var(--surface-2)",strokeWidth:"8"}),e.jsx(p.circle,{cx:"60",cy:"60",r:54,fill:"none",stroke:s,strokeWidth:"8",strokeLinecap:"round",transform:"rotate(-90 60 60)",strokeDasharray:i,initial:{strokeDashoffset:i},animate:{strokeDashoffset:i-r*i},transition:{duration:1.4,ease:[.22,1,.36,1]}})]}),e.jsxs("div",{className:"gauge-text",children:[e.jsx("div",{className:"gauge-number","aria-live":"polite",children:e.jsx(qe,{value:a})}),e.jsx("div",{className:"gauge-max",children:"/ 1,200"})]})]})}function Je({icon:a,label:s,value:t,max:i,note:r}){const l=Math.round(t/i*100);return e.jsxs(p.div,{className:"bd-item",variants:b,children:[e.jsx("span",{className:"bd-icon",children:a}),e.jsxs("div",{className:"bd-info",children:[e.jsxs("div",{className:"bd-top",children:[e.jsxs("span",{className:"bd-label",children:[s,r&&e.jsxs("small",{className:"bd-note",children:[" (",r,")"]})]}),e.jsxs("span",{className:"bd-pts",children:[t," ",e.jsxs("small",{children:["/ ",i]})]})]}),e.jsx("div",{className:"bd-bar-bg",children:e.jsx(p.div,{className:"bd-bar-fill",initial:{width:0},animate:{width:`${l}%`},transition:{duration:.8,delay:.3,ease:"easeOut"}})})]})]})}function R({draw:a,userScore:s}){const t=s>=a.score;return e.jsxs("div",{className:`draw-row ${t?"draw-above":"draw-below"}`,children:[e.jsx("span",{className:"draw-date",children:a.date}),e.jsx("span",{className:"draw-program",children:a.program}),e.jsx("span",{className:"draw-score",children:a.score})]})}const Ue=[{value:"secondary",label:"High School"},{value:"one_year_post",label:"1-Year Diploma"},{value:"two_year_post",label:"2-Year Diploma"},{value:"bachelors",label:"Bachelor's"},{value:"two_or_more",label:"2+ Credentials"},{value:"masters",label:"Master's"},{value:"doctoral",label:"PhD"}];function Ve({answers:a,originalScore:s,t}){const[i,r]=f.useState(a.age||""),[l,u]=f.useState(a.education||""),[o,m]=f.useState(a.canadianWorkExp||"0"),[d,h]=f.useState(""),y=f.useMemo(()=>{const c={};if(i&&i!==a.age&&(c.age=i),l&&l!==a.education&&(c.education=l),o&&o!==a.canadianWorkExp&&(c.canadianWorkExp=o),d){const w=["listening","reading","writing","speaking"],k=a.langTestType==="celpip"?"celpip":"ielts";for(const C of w){const x=`${k}_${C}`;a.langTestType==="celpip"?c[x]=String(Math.max(parseInt(a[x])||0,parseInt(d))):c[x]=String(Math.max(parseFloat(a[x])||0,parseFloat(d)))}}return Object.keys(c).length===0?null:_(a,c)},[a,i,l,o,d]),j=y?y.total-s:0;return e.jsxs("div",{className:"whatif-panel",children:[e.jsxs("div",{className:"wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Age"}),e.jsxs("select",{value:i,onChange:c=>r(c.target.value),children:[e.jsx("option",{value:"",children:"Current"}),Array.from({length:30},(c,w)=>w+18).map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Education"}),e.jsxs("select",{value:l,onChange:c=>u(c.target.value),children:[e.jsx("option",{value:"",children:"Current"}),Ue.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Canadian Work (yrs)"}),e.jsx("select",{value:o,onChange:c=>m(c.target.value),children:[0,1,2,3,4,5].map(c=>e.jsx("option",{value:c,children:c},c))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Min Language CLB"}),e.jsxs("select",{value:d,onChange:c=>h(c.target.value),children:[e.jsx("option",{value:"",children:"Current"}),[5,6,7,8,9,10].map(c=>e.jsxs("option",{value:c,children:["CLB ",c,"+"]},c))]})]})]}),y&&e.jsx(p.div,{className:"wi-result",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"wi-scores",children:[e.jsxs("div",{className:"wi-score-block",children:[e.jsx("small",{children:t("results.original")}),e.jsx("strong",{children:s})]}),e.jsx("span",{className:"wi-arrow",children:"→"}),e.jsxs("div",{className:"wi-score-block projected",children:[e.jsx("small",{children:t("results.projected")}),e.jsx("strong",{children:y.total})]}),e.jsxs("span",{className:`wi-delta ${j>0?"pos":j<0?"neg":""}`,children:[j>0?"+":"",j," pts"]})]})})]})}const P=["Analyzing profile","Calculating core factors","Evaluating language scores","Computing skill transferability","Checking eligibility","Finalizing CRS score"];function Ke(){const[a,s]=f.useState(0),[t,i]=f.useState(0);f.useEffect(()=>{let o;const m=performance.now(),d=2200,h=y=>{const j=Math.min((y-m)/d,1),c=1-Math.pow(1-j,3);s(Math.round(c*100)),i(Math.min(Math.floor(c*P.length),P.length-1)),j<1&&(o=requestAnimationFrame(h))};return o=requestAnimationFrame(h),()=>cancelAnimationFrame(o)},[]);const r="M 0,45 L 40,10 L 80,45 L 120,10 L 160,45 L 200,10 L 240,45 L 280,10 L 320,45",l=425,u=l*(1-a/100);return e.jsxs(p.div,{className:"loading-screen",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.95,transition:{duration:.3}},children:[e.jsx("div",{className:"loader-pulse"}),e.jsxs("div",{className:"loader-pct-wrap",children:[e.jsx("span",{className:"loader-num",children:a}),e.jsx("span",{className:"loader-pct-sign",children:"%"})]}),e.jsx("div",{className:"tube-perspective",children:e.jsxs("svg",{viewBox:"-4 -4 328 58",className:"tube-svg",preserveAspectRatio:"xMidYMid meet",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"tubeGlass",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.18"}),e.jsx("stop",{offset:"40%",stopColor:"white",stopOpacity:"0.04"}),e.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.10"})]}),e.jsxs("linearGradient",{id:"waterGrad",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"var(--primary)"}),e.jsx("stop",{offset:"50%",stopColor:"var(--accent)"}),e.jsx("stop",{offset:"100%",stopColor:"var(--primary)"})]}),e.jsxs("linearGradient",{id:"waterShine",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.35"}),e.jsx("stop",{offset:"50%",stopColor:"white",stopOpacity:"0"}),e.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.08"})]}),e.jsxs("filter",{id:"tubeGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"b"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"innerShadow",children:[e.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2",result:"blur"}),e.jsx("feOffset",{dx:"0",dy:"2",result:"shifted"}),e.jsx("feComposite",{in2:"SourceAlpha",operator:"arithmetic",k2:"-1",k3:"1",result:"shadow"}),e.jsx("feFlood",{floodColor:"black",floodOpacity:"0.2",result:"color"}),e.jsx("feComposite",{in:"color",in2:"shadow",operator:"in"})]})]}),e.jsx("path",{d:r,fill:"none",stroke:"var(--surface-3)",strokeWidth:"14",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.12",transform:"translate(3, 5)"}),e.jsx("path",{d:r,fill:"none",stroke:"var(--surface-2)",strokeWidth:"14",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5"}),e.jsx("path",{d:r,fill:"none",stroke:"url(#tubeGlass)",strokeWidth:"12",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:r,fill:"none",stroke:"url(#waterGrad)",strokeWidth:"10",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:l,strokeDashoffset:u,filter:"url(#tubeGlow)",opacity:"0.4",className:"tube-water"}),e.jsx("path",{d:r,fill:"none",stroke:"url(#waterGrad)",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:l,strokeDashoffset:u,className:"tube-water"}),e.jsx("path",{d:r,fill:"none",stroke:"url(#waterShine)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:l,strokeDashoffset:u,className:"tube-water",style:{transform:"translateY(-1.5px)"}}),e.jsx("path",{d:r,fill:"none",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.12",style:{transform:"translateY(-5px)"}})]})}),e.jsx(Ce,{mode:"wait",children:e.jsx(p.p,{className:"loader-phase",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.15},children:P[t]},t)}),e.jsx("div",{className:"loader-dots",children:P.map((o,m)=>e.jsx("div",{className:`loader-dot${m<=t?" active":""}`},m))})]})}function Qe(a){const s=f.useRef(null);return f.useEffect(()=>{if(!a)return;const t=s.current;if(!t)return;const i=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const r=["#22c55e","#4CC9F0","#7C3AED","#f59e0b","#ec4899","#3A0CA3"],l=Array.from({length:120},()=>({x:Math.random()*t.width,y:Math.random()*t.height-t.height,w:Math.random()*8+4,h:Math.random()*6+2,color:r[Math.floor(Math.random()*r.length)],vx:(Math.random()-.5)*4,vy:Math.random()*3+2,rot:Math.random()*360,rv:(Math.random()-.5)*8}));let u;const o=()=>{i.clearRect(0,0,t.width,t.height);let d=!1;for(const h of l)h.x+=h.vx,h.y+=h.vy,h.rot+=h.rv,h.vy+=.05,h.y<t.height+20&&(d=!0),i.save(),i.translate(h.x,h.y),i.rotate(h.rot*Math.PI/180),i.fillStyle=h.color,i.fillRect(-h.w/2,-h.h/2,h.w,h.h),i.restore();d&&(u=requestAnimationFrame(o))};u=requestAnimationFrame(o);const m=setTimeout(()=>{cancelAnimationFrame(u),i.clearRect(0,0,t.width,t.height)},4e3);return()=>{cancelAnimationFrame(u),clearTimeout(m)}},[a]),s}function Ze({answers:a,onRestart:s}){const{t}=ve(),[i,r]=f.useState(!0),[l,u]=f.useState(!1),[o,m]=f.useState(!1),[d,h]=f.useState(!1),[y,j]=f.useState(!1),[c,w]=f.useState(!1);f.useEffect(()=>{const n=setTimeout(()=>r(!1),2500);return()=>clearTimeout(n)},[]);const k=f.useMemo(()=>{if(a.knowsScore==="yes"){const n=parseInt(a.scoreRange)||400;return{total:n,breakdown:{coreHumanCapital:n,spouseFactors:0,skillTransferability:0,additionalPoints:0},details:{age:0,education:0,firstLanguage:0,secondLanguage:0,canadianWork:0,foreignWork:0,spouseTotal:0,skillTotal:0,additionalTotal:0}}}return K(a)},[a]),C=a.knowsScore!=="yes",x=k.total,S=M.averageCutoff,L=x-S,E=L>=20?{cls:"above",marker:"+",title:"Great News!",desc:`Your score is ${L} points above the recent cut-off (${S}). You have a strong chance of receiving an Invitation to Apply.`,color:"#22c55e"}:L>=-10?{cls:"close",marker:"~",title:"Almost There!",desc:`You're just ${Math.abs(L)} points ${L>=0?"above":"below"} the recent cut-off (${S}). A few small improvements could make the difference.`,color:"#f59e0b"}:{cls:"below",marker:"—",title:"Room to Improve",desc:`You're ${Math.abs(L)} points below the recent cut-off (${S}). Don't worry — see the suggestions below to boost your score.`,color:"#ef4444"},I=f.useMemo(()=>Oe(a,k),[a,k]),F=f.useMemo(()=>Re(k),[k]),v=k.details,Q=f.useMemo(()=>{const n=[{icon:"A",label:"Age",value:v.age,max:110},{icon:"E",label:"Education",value:v.education,max:150},{icon:"L",label:"English Language",value:v.firstLanguage,max:136},{icon:"W",label:"Canadian Work",value:v.canadianWork,max:80}];return v.secondLanguage>0&&n.splice(3,0,{icon:"F",label:"French",value:v.secondLanguage,max:24}),v.foreignWork>0?n.push({icon:"S",label:t("results.foreignWork"),value:v.skillTotal,max:100,note:"via skill transferability"}):n.push({icon:"S",label:"Skill Bonus",value:v.skillTotal,max:100}),v.spouseTotal>0&&n.push({icon:"P",label:"Spouse",value:v.spouseTotal,max:40}),v.additionalTotal>0&&n.push({icon:"+",label:"Bonus Points",value:v.additionalTotal,max:600}),n},[v,t]),X=I.slice(0,3),$=I.slice(3),Z=a.pathway,B=we[Z],G=f.useMemo(()=>C?Ge(a):[],[a,C]),H=!i&&L>=20,ee=Qe(H),O=`${window.location.origin}${window.location.pathname}#${ke(a)}`,ae=async()=>{try{if(navigator.share){await navigator.share({title:"My CRS Score",text:`My CRS score is ${x}/1200!`,url:O});return}}catch{}try{await navigator.clipboard.writeText(O)}catch{const n=document.createElement("textarea");n.value=O,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}w(!0),setTimeout(()=>w(!1),2e3)},se=()=>window.print();return i?e.jsx(Ke,{}):e.jsxs(p.div,{className:"results",variants:q,initial:"hidden",animate:"show",exit:{opacity:0,transition:{duration:.2}},children:[H&&e.jsx("canvas",{ref:ee,className:"confetti-canvas"}),e.jsx(p.div,{className:"score-hero",variants:b,children:e.jsx(ze,{score:x,statusColor:E.color})}),e.jsxs(p.div,{className:"result-actions",variants:b,children:[e.jsx("button",{className:"action-btn",onClick:ae,"aria-label":"Share results",children:c?"✓ Copied!":t("results.share")}),e.jsx("button",{className:"action-btn",onClick:se,"aria-label":"Download PDF",children:t("results.pdf")})]}),e.jsxs(p.div,{className:`card status-card ${E.cls}-card`,variants:b,children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:`status-marker ${E.cls}`,children:E.marker})," ",e.jsx("strong",{children:E.title})]}),e.jsx("p",{className:"status-desc",children:E.desc}),e.jsxs("div",{className:"cutoff-compare",children:[e.jsx(z,{label:"Your Score",value:x,max:Math.max(x,S,600),color:"var(--primary)"}),e.jsx(z,{label:"Cut-off",value:S,max:Math.max(x,S,600),color:"var(--surface-3)"})]})]}),C&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.breakdown")}),e.jsx(p.div,{className:"breakdown-grid",variants:q,initial:"hidden",animate:"show",children:Q.map(n=>e.jsx(Je,{...n},n.label))}),e.jsxs("div",{className:"bd-total",children:[e.jsx("span",{children:"Total CRS Score"}),e.jsx("span",{className:"bd-total-num",children:x})]})]}),C&&e.jsxs(p.div,{className:"card whatif-card",variants:b,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>h(!d),children:[t("results.whatif")," ",e.jsx("span",{className:"toggle-arrow",children:d?"▲":"▼"})]}),d&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("p",{className:"cat-intro",children:t("results.whatifDesc")}),e.jsx(Ve,{answers:a,originalScore:x,t})]})]}),I.length>0&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.improve")}),X.map((n,g)=>e.jsxs(p.div,{className:"action-card",variants:b,children:[e.jsx("div",{className:"action-rank",children:g+1}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[n.title,n.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",n.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:n.description}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:n.timeframe}),e.jsx("span",{className:`action-diff diff-${n.difficulty.toLowerCase()}`,children:n.difficulty})]})]})]},g)),$.length>0&&e.jsxs(e.Fragment,{children:[l&&$.map((n,g)=>e.jsxs(p.div,{className:"action-card",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"action-rank",children:g+4}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[n.title,n.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",n.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:n.description}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:n.timeframe}),e.jsx("span",{className:`action-diff diff-${n.difficulty.toLowerCase()}`,children:n.difficulty})]})]})]},g+3)),e.jsx("button",{className:"btn-toggle",onClick:()=>u(!l),children:l?"Show fewer ▲":`Show ${$.length} more suggestions ▼`})]})]}),C&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.category")}),e.jsx("p",{className:"cat-intro",children:t("results.catIntro")}),e.jsx("div",{className:"cat-grid",children:Ne.map(n=>{const g=n.check(a),W=g&&x>=n.recentCutoff;return e.jsxs(p.div,{className:`cat-card ${g?W?"cat-above":"cat-eligible":"cat-na"}`,variants:b,children:[e.jsxs("div",{className:"cat-header",children:[e.jsx("span",{className:"cat-icon",children:n.icon}),e.jsxs("div",{children:[e.jsx("strong",{className:"cat-name",children:n.name}),g&&e.jsx("span",{className:`cat-badge ${W?"badge-above":"badge-eligible"}`,children:W?"Above Cutoff":"Eligible"}),!g&&e.jsx("span",{className:"cat-badge badge-na",children:"Not Eligible"})]})]}),e.jsx("p",{className:"cat-desc",children:n.description}),e.jsxs("div",{className:"cat-cutoff",children:[e.jsxs("span",{children:["Recent cutoff: ",e.jsx("strong",{children:n.recentCutoff})]}),e.jsxs("span",{className:"cat-range",children:["Range: ",n.cutoffRange]})]}),g&&e.jsxs("div",{className:"cat-compare",children:[e.jsxs("div",{className:"cat-bar-wrap",children:[e.jsx(p.div,{className:`cat-bar ${W?"bar-above":"bar-below"}`,initial:{width:0},animate:{width:`${Math.min(x/Math.max(x,n.recentCutoff+50)*100,100)}%`},transition:{duration:.8,ease:"easeOut"}}),e.jsx("div",{className:"cat-marker",style:{left:`${n.recentCutoff/Math.max(x,n.recentCutoff+50)*100}%`}})]}),e.jsxs("div",{className:"cat-labels",children:[e.jsxs("span",{children:["Your score: ",x]}),e.jsxs("span",{children:["Cutoff: ",n.recentCutoff]})]})]}),!g&&e.jsx("p",{className:"cat-req",children:n.eligibility})]},n.id)})})]}),C&&G.length>0&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>j(!y),children:["Province Recommender ",e.jsx("span",{className:"toggle-arrow",children:y?"▲":"▼"})]}),y&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("p",{className:"cat-intro",children:"Based on your profile, these provinces may be good matches for Provincial Nominee Programs."}),e.jsx("div",{className:"prov-grid",children:G.slice(0,5).map(n=>e.jsxs("div",{className:"prov-card",children:[e.jsxs("div",{className:"prov-header",children:[e.jsx("span",{className:"prov-abbr",children:n.abbr}),e.jsxs("div",{children:[e.jsx("strong",{className:"prov-name",children:n.name}),e.jsxs("span",{className:`prov-match ${n.matchScore>=70?"match-high":n.matchScore>=40?"match-mid":"match-low"}`,children:[n.matchScore,"% match"]})]})]}),e.jsx("div",{className:"prov-bar-wrap",children:e.jsx(p.div,{className:"prov-bar",initial:{width:0},animate:{width:`${n.matchScore}%`},transition:{duration:.8,ease:"easeOut"},style:{background:n.matchScore>=70?"#22c55e":n.matchScore>=40?"#f59e0b":"var(--surface-3)"}})}),e.jsx("p",{className:"prov-notes",children:n.notes}),e.jsx("div",{className:"prov-streams",children:n.streams.map(g=>e.jsx("span",{className:"prov-stream",children:g},g))})]},n.id))})]})]}),e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.timeline")}),e.jsxs("div",{className:`timeline-badge tl-${E.cls}`,children:[e.jsx("strong",{children:F.label})," — est. ",F.months," months"]}),e.jsx("p",{className:"timeline-desc",children:F.description})]}),e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>m(!o),children:[t("results.draws")," ",e.jsx("span",{className:"toggle-arrow",children:o?"▲":"▼"})]}),o&&e.jsxs(p.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"draws-content",children:[e.jsx("h4",{className:"draws-subhead",children:"General / CEC Draws"}),M.generalProgram.slice(0,4).map((n,g)=>e.jsx(R,{draw:n,userScore:x},`g${g}`)),e.jsx("h4",{className:"draws-subhead",children:"Category-Based Draws"}),M.categoryBased.slice(0,4).map((n,g)=>e.jsx(R,{draw:n,userScore:x},`c${g}`)),M.pnpDraws?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"draws-subhead",children:"Provincial Nominee (PNP)"}),M.pnpDraws.slice(0,3).map((n,g)=>e.jsx(R,{draw:n,userScore:x},`p${g}`))]})]})]}),B&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{children:[B.name," Requirements"]}),e.jsx("ul",{className:"pathway-list",children:B.requirements.map((n,g)=>e.jsx("li",{children:n},g))})]}),e.jsx(p.div,{className:"card disclaimer",variants:b,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Disclaimer:"})," ",t("results.disclaimer")," ",e.jsx("a",{href:"https://www.canada.ca/en/immigration-refugees-citizenship.html",target:"_blank",rel:"noopener noreferrer",children:"canada.ca"})]})}),e.jsx(p.button,{className:"btn-restart",onClick:s,whileHover:{scale:1.03},whileTap:{scale:.96},variants:b,children:t("results.restart")})]})}function z({label:a,value:s,max:t,color:i}){const r=Math.round(s/t*100);return e.jsxs("div",{className:"cutoff-row",children:[e.jsx("span",{className:"cutoff-label",children:a}),e.jsx("div",{className:"cutoff-bar-wrap",children:e.jsx(p.div,{className:"cutoff-bar",style:{background:i},initial:{width:0},animate:{width:`${r}%`},transition:{duration:.8,ease:"easeOut"},children:s})})]})}export{Ze as default};
