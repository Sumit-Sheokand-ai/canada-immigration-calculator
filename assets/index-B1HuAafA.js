const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthModal-BC41ryrr.js","assets/vendor-react-Ah1pgjPn.js","assets/feature-path-coach-BX4hFirh.js","assets/data-question-bank-BGQJyrDZ.js","assets/vendor-supabase-BZ0N5lZN.js","assets/vendor-motion-DURBmaq0.js","assets/questionDataSource-BuXYi3JR.js","assets/feature-strategy-hub-Dpiw6aLk.js","assets/WelcomeScreen-B3fhTNsQ.js","assets/Wizard-GfxaVApE.js","assets/Results-tyCwgIjC.js"])))=>i.map(i=>d[i]);
import{r as i,j as t,c as Le}from"./vendor-react-Ah1pgjPn.js";import{u as pe,t as y,r as O,L as Pe}from"./feature-strategy-hub-Dpiw6aLk.js";import{u as De,i as J,s as b,A as Ie}from"./feature-path-coach-BX4hFirh.js";import{u as Me,m as Te,A as Re}from"./vendor-motion-DURBmaq0.js";import{r as E,t as A}from"./data-question-bank-BGQJyrDZ.js";import"./vendor-supabase-BZ0N5lZN.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Fe="modulepreload",Oe=function(e){return"/"+e},ce={},z=function(r,n,c){let s=Promise.resolve();if(n&&n.length>0){let h=function(u){return Promise.all(u.map(w=>Promise.resolve(w).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),p=l?.nonce||l?.getAttribute("nonce");s=h(n.map(u=>{if(u=Oe(u),u in ce)return;ce[u]=!0;const w=u.endsWith(".css"),d=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=w?"stylesheet":Fe,w||(f.as="script"),f.crossOrigin="",f.href=u,p&&f.setAttribute("nonce",p),document.head.appendChild(f),w)return new Promise((j,k)=>{f.addEventListener("load",j),f.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(l){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=l,window.dispatchEvent(p),!p.defaultPrevented)throw l}return s.then(l=>{for(const p of l||[])p.status==="rejected"&&a(p.reason);return r().catch(a)})},ge=i.createContext();function ze({children:e}){const[r,n]=i.useState(()=>{try{return localStorage.getItem("crs-theme")==="dark"}catch{return!1}});i.useEffect(()=>{document.documentElement.setAttribute("data-theme",r?"dark":"light");try{localStorage.setItem("crs-theme",r?"dark":"light")}catch{}},[r]);const c=()=>n(s=>!s);return t.jsx(ge.Provider,{value:{dark:r,toggle:c},children:e})}function Ue(){return i.useContext(ge)}const Be=i.lazy(()=>z(()=>import("./AuthModal-BC41ryrr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),qe={en:"EN",fr:"FR"};function We({canInstallApp:e=!1,onInstallApp:r=()=>{},motionIntensity:n="full"}){const c=Me()||n!=="full",{dark:s,toggle:a}=Ue(),{lang:l,setLang:p,t:h}=pe(),{user:u}=De(),[w,d]=i.useState(!1);return i.useEffect(()=>{const f=()=>d(!0);return window.addEventListener("crs-open-account-modal",f),()=>{window.removeEventListener("crs-open-account-modal",f)}},[]),t.jsxs(t.Fragment,{children:[t.jsx(Te.header,{className:"header",initial:c?!1:{y:-60,opacity:0},animate:{y:0,opacity:1},transition:c?{duration:0}:{type:"spring",stiffness:120,damping:20},children:t.jsxs("div",{className:"header-inner",children:[t.jsxs("div",{className:"logo",children:[t.jsx("span",{className:"logo-leaf",children:"ðŸ"}),t.jsx("span",{children:h("header.title")})]}),t.jsxs("div",{className:"header-actions",children:[e&&t.jsx("button",{type:"button",className:"install-btn",onClick:r,"aria-label":"Install app",title:"Add app shortcut",children:"Install app"}),t.jsx("button",{type:"button",className:"auth-toggle",onClick:()=>{d(!0),y("account_modal_opened",{source:"header_button",is_authenticated:!!u})},"aria-label":u?"Manage account":"Login or signup",title:u?u.email:"Login / Signup",children:u?"Account":"Login"}),t.jsx("select",{className:"lang-select",value:l,onChange:f=>p(f.target.value),"aria-label":"Select language",children:Object.entries(qe).map(([f,j])=>t.jsx("option",{value:f,children:j},f))}),t.jsx("button",{type:"button",className:"theme-toggle",onClick:a,"aria-label":s?"Switch to light mode":"Switch to dark mode",title:s?"Light mode":"Dark mode",children:s?"Light":"Dark"})]})]})}),w&&t.jsx(i.Suspense,{fallback:t.jsx("div",{className:"auth-modal-backdrop",role:"presentation",children:t.jsx("div",{className:"auth-modal auth-modal-loading",role:"dialog","aria-modal":"true",children:t.jsxs("div",{className:"auth-modal-head",children:[t.jsx("h3",{children:"Loading accountâ€¦"}),t.jsx("button",{type:"button",className:"auth-close",onClick:()=>d(!1),"aria-label":"Close dialog",children:"Ã—"})]})})}),children:t.jsx(Be,{open:w,onClose:()=>d(!1)})})]})}function $(){const e=Array.from({length:9});return t.jsxs("div",{className:"uv-loader",children:[e.map((r,n)=>t.jsx("div",{className:"uv-text",children:t.jsx("span",{children:"Loading"})},n)),t.jsx("div",{className:"uv-line"})]})}function $e(e,r){const n=e.answers||{};return{id:e.id,user_id:r||null,name:e.name||null,score:Number(e.score)||0,email:e.email||null,alert_opt_in:!!e.alertOptIn,alert_token:e.alertToken||null,profile_json:{answers:n,tracking:{userId:r||null,savedAt:new Date().toISOString()}},updated_at:new Date().toISOString()}}function U(e){const r=String(e?.message||"");return/column\s+["']?user_id["']?\s+does not exist/i.test(r)}function L(e,r){const n=r?.message||r?.hint||String(r);return`${e}: ${n}`}function P(){return J&&!!b}async function gt(e,r={}){if(!P())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=r.userId||null,c=$e(e,n);let s,a;if({data:s,error:a}=await b.from("saved_profiles").upsert(c,{onConflict:"id"}).select(),a&&n&&U(a)){const{user_id:l,...p}=c;({data:s,error:a}=await b.from("saved_profiles").upsert(p,{onConflict:"id"}).select())}if(a)throw new Error(L("Supabase upsert failed",a));return{status:"ok",data:s||[]}}async function Ye(e){if(!e)return{status:"skipped",reason:"Missing token"};if(!P())return{status:"skipped",reason:"Supabase env vars are not configured"};const{data:r,error:n}=await b.from("saved_profiles").update({alert_opt_in:!1,updated_at:new Date().toISOString()}).eq("alert_token",e).select();if(n)throw new Error(L("Supabase unsubscribe failed",n));return r?.length?{status:"ok",data:r[0]}:{status:"not-found"}}async function ht(e){if(!e)return{status:"skipped",reason:"Missing user id"};if(!P())return{status:"skipped",reason:"Supabase env vars are not configured"};const{data:r,error:n}=await b.from("saved_profiles").select("id,name,score,email,updated_at").eq("user_id",e).order("updated_at",{ascending:!1}).limit(12);if(n&&U(n))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(n)throw new Error(L("Supabase profile list failed",n));return{status:"ok",data:r||[]}}async function wt(e,r){if(!e)return{status:"skipped",reason:"Missing user id"};if(!P())return{status:"skipped",reason:"Supabase env vars are not configured"};const{error:n,data:c}=await b.from("saved_profiles").update({alert_opt_in:!!r,updated_at:new Date().toISOString()}).eq("user_id",e).select("id");if(n&&U(n))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(n)throw new Error(L("Supabase alert preference update failed",n));return{status:"ok",updatedCount:c?.length||0}}async function yt(e,r){if(!e)return{status:"skipped",reason:"Missing user id"};if(!P())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=r?String(r).trim().toLowerCase():null,{error:c,data:s}=await b.from("saved_profiles").update({email:n||null,updated_at:new Date().toISOString()}).eq("user_id",e).select("id");if(c&&U(c))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(c)throw new Error(L("Supabase profile email update failed",c));return{status:"ok",updatedCount:s?.length||0}}const he=300*1e3,we=!1;let _={data:null,source:"none",fetchedAt:0},x={data:null,source:"none",fetchedAt:0},G=we;function Ge(e){return!!e&&typeof e=="object"&&Array.isArray(e.generalProgram)&&Array.isArray(e.categoryBased)&&Array.isArray(e.pnpDraws)&&Number.isFinite(Number(e.averageCutoff))}function Je(e){return Ge(e)?{...e,generalProgram:e.generalProgram||[],categoryBased:e.categoryBased||[],pnpDraws:e.pnpDraws||[],averageCutoff:Number(e.averageCutoff)||E.averageCutoff,lastUpdated:e.lastUpdated||E.lastUpdated,pnpRanges:e.pnpRanges||E.pnpRanges}:null}function Ke(e){if(!e||typeof e!="object")return null;const r=String(e.id||"").trim(),n=String(e.name||"").trim(),c=String(e.icon||"").trim(),s=String(e.description||"").trim(),a=String(e.eligibility||"").trim(),l=String(e.cutoff_range||e.cutoffRange||"").trim(),p=Number(e.recent_cutoff??e.recentCutoff);return!r||!n||!c||!s||!a||!Number.isFinite(p)?null:{id:r,name:n,icon:c,description:s,eligibility:a,recentCutoff:p,cutoffRange:l||"N/A",source:e.source||"supabase",updatedAt:e.updated_at||null}}function Ve(e){if(!e)return!1;const r=String(e.code||"").toUpperCase(),n=`${e.message||""} ${e.details||""} ${e.hint||""}`.toLowerCase();return!!(r==="PGRST205"||n.includes("could not find the table")||n.includes("category_draw_configs")&&n.includes("schema cache")||n.includes("relation")&&n.includes("does not exist"))}function He(e=[]){const r=new Map(A.map(a=>[a.id,a])),n=new Map;for(const a of e){const l=Ke(a);l&&(n.has(l.id)||n.set(l.id,l))}const c=A.map(a=>{const l=n.get(a.id);return l?{...a,name:l.name,icon:l.icon,description:l.description,eligibility:l.eligibility,recentCutoff:l.recentCutoff,cutoffRange:l.cutoffRange,source:l.source,updatedAt:l.updatedAt}:a}),s=[...n.values()].filter(a=>!r.has(a.id)).map(a=>({...a,check:()=>!1}));return[...c,...s]}function le(){return E}function Y(){return A}function bt(){_={data:null,source:"none",fetchedAt:0}}function vt(){x={data:null,source:"none",fetchedAt:0},G=we}async function Xe({forceRefresh:e=!1}={}){if(O().forceLocalData)return _={data:E,source:"local-forced",fetchedAt:Date.now()},{status:"ok",source:"local-forced",data:E};if(!e&&_.data&&Date.now()-_.fetchedAt<he)return{status:"ok",source:_.source,data:_.data};if(J&&b)try{const{data:n,error:c}=await b.from("draw_snapshots").select("payload,last_updated").order("last_updated",{ascending:!1}).limit(1);if(!c){const s=n?.[0],a=Je(s?.payload);if(a)return _={data:a,source:"supabase",fetchedAt:Date.now()},{status:"ok",source:"supabase",data:a}}}catch{}return _={data:E,source:"local-fallback",fetchedAt:Date.now()},{status:"ok",source:"local-fallback",data:E}}async function Qe({forceRefresh:e=!1}={}){if(O().forceLocalData)return x={data:A,source:"local-forced",fetchedAt:Date.now()},{status:"ok",source:"local-forced",data:A};if(!e&&x.data&&Date.now()-x.fetchedAt<he)return{status:"ok",source:x.source,data:x.data};if(J&&b&&G)try{const{data:n,error:c}=await b.from("category_draw_configs").select("id,source,name,icon,description,eligibility,recent_cutoff,cutoff_range,is_active,updated_at").eq("is_active",!0).order("updated_at",{ascending:!1});if(Ve(c)&&(G=!1),!c&&Array.isArray(n)&&n.length>0){const s=He(n);return x={data:s,source:"supabase",fetchedAt:Date.now()},{status:"ok",source:"supabase",data:s}}}catch{}return x={data:A,source:"local-fallback",fetchedAt:Date.now()},{status:"ok",source:"local-fallback",data:A}}const ye="crs-account-settings-v1",C={profileName:"",contactEmail:"",defaultDrawAlerts:!1,autoSyncProfiles:!0,autoSaveProgress:!0,motionIntensity:"full"};function ue(){try{const e=localStorage.getItem(ye);if(!e)return{...C};const r=JSON.parse(e);return!r||typeof r!="object"?{...C}:{...C,...r}}catch{return{...C}}}function St(e){const r={...C,...e||{}};["off","subtle","full"].includes(r.motionIntensity)||(r.motionIntensity=C.motionIntensity);try{localStorage.setItem(ye,JSON.stringify(r))}catch{}try{window.dispatchEvent(new Event("crs-account-settings-updated"))}catch{}return r}const Ze=i.lazy(()=>z(()=>import("./WelcomeScreen-B3fhTNsQ.js"),__vite__mapDeps([8,1,7,2,3,4,5]))),et=i.lazy(()=>z(()=>import("./Wizard-GfxaVApE.js"),__vite__mapDeps([9,1,3,7,2,4,5,6]))),tt=i.lazy(()=>z(()=>import("./Results-tyCwgIjC.js"),__vite__mapDeps([10,1,2,3,4,5,7]))),K="crs-progress";function de(){try{const e=localStorage.getItem(K);return e?JSON.parse(e):null}catch{return null}}function rt(e){try{localStorage.setItem(K,JSON.stringify(e))}catch{}}function fe(){try{localStorage.removeItem(K)}catch{}}function nt(){try{return new URLSearchParams(window.location.search).get("unsubscribe")}catch{return null}}function at(){return{}}function st(){const e=typeof navigator<"u"?navigator:null;if(!e)return!1;const n=!!(e.connection||e.mozConnection||e.webkitConnection)?.saveData,c=Number(e.deviceMemory||0),s=Number(e.hardwareConcurrency||0),a=Number.isFinite(c)&&c>0&&c<=4,l=Number.isFinite(s)&&s>0&&s<=4;return n||a||l}function ot(e){return new Promise(r=>window.setTimeout(r,e))}async function me(e,{retries:r=2,baseDelayMs:n=250}={}){let c=null;for(let s=0;s<=r;s+=1)try{return await e()}catch(a){if(c=a,s===r)break;await ot(n*2**s)}throw c||new Error("Retry attempts exhausted.")}function it(){const{t:e}=pe(),[r,n]=i.useState(()=>ue()),[c,s]=i.useState(()=>O()),a=r.autoSaveProgress!==!1,l=["off","subtle","full"].includes(r.motionIntensity)?r.motionIntensity:"full",p=i.useMemo(()=>st(),[]),h=l==="off"?"off":p&&l==="full"?"subtle":l,u=nt(),w=at(),[d,f]=i.useState(()=>u?"unsubscribe":Object.keys(w).length>0?"results":"welcome"),j=i.useRef(d),k=i.useRef(0),[V,B]=i.useState(()=>w),[D,H]=i.useState(()=>u?"loading":"idle"),[X,Q]=i.useState(()=>le()),[Z,ee]=i.useState("local-fallback"),[be,q]=i.useState(()=>Y()),[te,re]=i.useState(()=>({syncing:!1,lastError:"",lastSyncedAt:""}));i.useEffect(()=>{if(!u)return;let o=!0;return Ye(u).then(g=>{o&&H(g.status==="ok"?"success":"notfound")}).catch(()=>{o&&H("error")}),()=>{o=!1}},[u]);const I=i.useCallback(async({forceRefresh:o=!1,reason:g="initial"}={})=>{re(m=>({...m,syncing:!0,lastError:""}));let S=null,M=null;try{const m=await me(()=>Xe({forceRefresh:o}),{retries:2,baseDelayMs:250});m?.status==="ok"&&m.data&&(Q(m.data),ee(m.source||"local-fallback"))}catch(m){S=m,Q(le()),ee("local-fallback")}try{const m=await me(()=>Qe({forceRefresh:o}),{retries:2,baseDelayMs:250});m?.status==="ok"&&Array.isArray(m.data)&&m.data.length>0?q(m.data):q(Y())}catch(m){M=m,q(Y())}const v=!!S||!!M;re({syncing:!1,lastError:v?"Live sync is currently unavailable. Showing local data mode.":"",lastSyncedAt:new Date().toISOString()}),v?y("draw_data_sync_degraded",{reason:g,latest_error:String(S?.message||""),category_error:String(M?.message||"")}):y("draw_data_sync_ok",{reason:g,source:"live"})},[]),ve=i.useCallback(()=>{I({forceRefresh:!0,reason:"manual_retry"})},[I]);i.useEffect(()=>{const o=window.setTimeout(()=>{I()},0);return()=>window.clearTimeout(o)},[I]);const Se=i.useCallback(o=>{if(o&&a){const g=de();g&&B(g)}y("wizard_started",{resumed:!!o}),f("wizard")},[a]),_e=i.useCallback(o=>{B(o),fe(),y("wizard_completed",{answer_count:Object.keys(o||{}).length}),f("results"),window.scrollTo({top:0,behavior:"smooth"})},[]),xe=i.useCallback(()=>{B({}),fe(),y("calculator_restarted"),window.history.replaceState(null,"",window.location.pathname),f("welcome"),window.scrollTo({top:0,behavior:"smooth"})},[]),Ee=a&&!!de(),[je,ke]=i.useState(!1),[N,W]=i.useState(null),[Ae,Ce]=i.useState(()=>{const o=window.matchMedia?.("(display-mode: standalone)")?.matches,g=window.navigator?.standalone===!0;return!!(o||g)});i.useEffect(()=>{const o=()=>ke(window.scrollY>400);return window.addEventListener("scroll",o,{passive:!0}),()=>window.removeEventListener("scroll",o)},[]),i.useEffect(()=>{const o=S=>{typeof S?.prompt=="function"&&W(S)},g=()=>{W(null),Ce(!0)};return window.addEventListener("beforeinstallprompt",o),window.addEventListener("appinstalled",g),()=>{window.removeEventListener("beforeinstallprompt",o),window.removeEventListener("appinstalled",g)}},[]);const Ne=i.useCallback(async()=>{if(!N)return;y("install_prompt_triggered"),N.prompt(),(await N.userChoice)?.outcome==="accepted"?(W(null),y("install_prompt_accepted")):y("install_prompt_dismissed")},[N]);return i.useEffect(()=>{const o=()=>{n(ue())};return window.addEventListener("storage",o),window.addEventListener("crs-account-settings-updated",o),()=>{window.removeEventListener("storage",o),window.removeEventListener("crs-account-settings-updated",o)}},[]),i.useEffect(()=>{const o=()=>{s(O())};return window.addEventListener("storage",o),window.addEventListener("crs-runtime-flags-updated",o),()=>{window.removeEventListener("storage",o),window.removeEventListener("crs-runtime-flags-updated",o)}},[]),i.useEffect(()=>{k.current===0&&(k.current=typeof performance<"u"?performance.now():Date.now())},[]),i.useEffect(()=>{if(c.enablePerfTelemetry)try{const o=window.performance?.getEntriesByType?.("navigation")?.[0];if(!o)return;y("perf_navigation_summary",{type:o.type||"navigate",dom_content_loaded_ms:Math.round(o.domContentLoadedEventEnd||0),load_event_ms:Math.round(o.loadEventEnd||0),transfer_kb:Number(((o.transferSize||0)/1024).toFixed(1))})}catch{}},[c.enablePerfTelemetry]),i.useEffect(()=>{const o=typeof performance<"u"?performance.now():Date.now(),g=j.current;if(!c.enablePerfTelemetry){j.current=d,k.current=o;return}g!==d&&(y("perf_mode_transition",{from_mode:g,to_mode:d,duration_ms:Math.max(Math.round(o-k.current),0)}),j.current=d,k.current=o)},[d,c.enablePerfTelemetry]),i.useEffect(()=>{document.documentElement.setAttribute("data-motion",h)},[h]),i.useEffect(()=>{const o=document.documentElement,g=window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,S=window.matchMedia?.("(pointer: fine)")?.matches;if(!(h!=="off"&&!g&&!!S)){o.style.setProperty("--pointer-x","50%"),o.style.setProperty("--pointer-y","40%"),o.style.setProperty("--pointer-glow","0");return}o.style.setProperty("--pointer-glow",h==="subtle"?"0.45":"1");let v=0,m=50,T=40,R=50,F=40;const ne=()=>{m+=(R-m)*.12,T+=(F-T)*.12,o.style.setProperty("--pointer-x",`${m.toFixed(2)}%`),o.style.setProperty("--pointer-y",`${T.toFixed(2)}%`),Math.abs(R-m)>.05||Math.abs(F-T)>.05?v=window.requestAnimationFrame(ne):v=0},ae=()=>{v||(v=window.requestAnimationFrame(ne))},se=ie=>{R=ie.clientX/window.innerWidth*100,F=ie.clientY/window.innerHeight*100,ae()},oe=()=>{R=50,F=40,ae()};return window.addEventListener("pointermove",se,{passive:!0}),window.addEventListener("pointerleave",oe,{passive:!0}),()=>{window.removeEventListener("pointermove",se),window.removeEventListener("pointerleave",oe),v&&window.cancelAnimationFrame(v)}},[h]),t.jsxs("div",{className:"app",children:[t.jsxs("div",{className:"anime-bg","aria-hidden":"true",children:[t.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--one"}),t.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--two"}),t.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--three"}),t.jsx("span",{className:"anime-bg-grid"}),t.jsx("span",{className:"anime-bg-noise"}),t.jsx("span",{className:"anime-bg-pointer-glow"}),t.jsx("span",{className:"anime-bg-flare"}),t.jsx("span",{className:"anime-bg-vignette"}),t.jsxs("div",{className:"anime-bg-sparks",children:[t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{})]})]}),t.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),t.jsx(We,{canInstallApp:!Ae&&!!N,onInstallApp:Ne,motionIntensity:h}),t.jsx("main",{className:"main",role:"main",id:"main-content",children:t.jsxs(Re,{mode:"wait",children:[d==="welcome"&&t.jsx(i.Suspense,{fallback:t.jsx("div",{className:"loading-fallback",children:t.jsx($,{})}),children:t.jsx(Ze,{onStart:Se,hasSaved:Ee,drawData:X,drawSource:Z,motionIntensity:h},"welcome")}),d==="wizard"&&t.jsx(i.Suspense,{fallback:t.jsx("div",{className:"loading-fallback",children:t.jsx($,{})}),children:t.jsx(et,{onFinish:_e,onProgress:a?rt:void 0,initialAnswers:V,motionIntensity:h},"wizard")}),d==="unsubscribe"&&t.jsxs("div",{className:"card unsubscribe-card",children:[t.jsx("h3",{children:"Draw alert preferences"}),D==="loading"&&t.jsx("p",{children:"Processing your unsubscribe requestâ€¦"}),D==="success"&&t.jsx("p",{children:"Youâ€™ve been unsubscribed from draw alerts successfully."}),D==="notfound"&&t.jsx("p",{children:"This unsubscribe link is invalid or already inactive."}),D==="error"&&t.jsx("p",{children:"We couldnâ€™t process this request right now. Please try again later."}),t.jsx("button",{type:"button",className:"btn-restart",onClick:()=>f("welcome"),children:"Back to calculator"})]}),d==="results"&&t.jsx(i.Suspense,{fallback:t.jsx("div",{className:"loading-fallback",children:t.jsx($,{})}),children:t.jsx(tt,{answers:V,onRestart:xe,drawData:X,drawSource:Z,categoryInfo:be,motionIntensity:h,onRetryDataSync:ve,isDataSyncing:te.syncing,dataSyncError:te.lastError},"results")})]})}),t.jsxs("footer",{className:"footer",children:[t.jsxs("p",{children:["Â© ",new Date().getFullYear()," ",e("footer.copy")]}),t.jsxs("p",{className:"footer-legal-links",children:[t.jsx("a",{href:"/guides.html",children:"Guides"}),t.jsx("span",{"aria-hidden":"true",children:" Â· "}),t.jsx("a",{href:"/terms.html",children:"Terms of Service"}),t.jsx("span",{"aria-hidden":"true",children:" Â· "}),t.jsx("a",{href:"/privacy.html",children:"Privacy Policy"}),t.jsx("span",{"aria-hidden":"true",children:" Â· "}),t.jsx("a",{href:"/trust.html",children:"Trust Center"})]})]}),je&&t.jsx("button",{type:"button",className:"btn-top",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),"aria-label":"Back to top",children:"â†‘"})]})}class ct extends i.Component{constructor(r){super(r),this.state={hasError:!1,errorMessage:""}}static getDerivedStateFromError(r){return{hasError:!0,errorMessage:r?.message||"Unexpected application error."}}componentDidCatch(r,n){y("app_error_boundary_triggered",{message:String(r?.message||"unknown_error"),stack:String(n?.componentStack||"").slice(0,280)})}handleTryAgain=()=>{this.setState({hasError:!1,errorMessage:""})};render(){return this.state.hasError?t.jsx("main",{className:"error-boundary-screen",role:"alert","aria-live":"assertive",children:t.jsxs("section",{className:"error-boundary-card",children:[t.jsx("h1",{children:"Something went wrong"}),t.jsx("p",{children:"We hit an unexpected issue while rendering this page."}),t.jsx("p",{className:"error-boundary-message",children:this.state.errorMessage}),t.jsxs("div",{className:"error-boundary-actions",children:[t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:this.handleTryAgain,children:"Try again"}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>window.location.reload(),children:"Reload app"})]})]})}):this.props.children}}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("[SW] Service Worker registered:",e)}).catch(e=>{console.error("[SW] Service Worker registration failed:",e)})});Le.createRoot(document.getElementById("root")).render(t.jsx(i.StrictMode,{children:t.jsx(ct,{children:t.jsx(Ie,{children:t.jsx(ze,{children:t.jsx(Pe,{children:t.jsx(it,{})})})})})}));export{$ as L,z as _,le as a,Xe as b,Qe as c,wt as d,yt as e,bt as f,Y as g,vt as h,P as i,ht as l,ue as r,St as s,gt as u};
