import{r as N,j as t}from"./vendor-react-Ah1pgjPn.js";import{b as je}from"./feature-path-coach-BX4hFirh.js";const ke={"header.title":"CRS Calculator 2026","welcome.heading":`Free CRS Calculator
for Express Entry 2026`,"welcome.sub":"Calculate your Comprehensive Ranking System (CRS) score for Canada Express Entry. Check FSW, CEC, PNP eligibility instantly. Updated with latest IRCC draw cutoffs.","welcome.btn":"Calculate My CRS Score Free","welcome.updated":"IRCC data updated:","welcome.trust":"Uses official IRCC draw data — last updated:","welcome.microcopy":"This will take 3 minutes — one question at a time.","welcome.resume":"You have an unfinished calculation.","welcome.resumeBtn":"Resume","welcome.startFresh":"Start Fresh","feature.accurate":"Official CRS Formula","feature.accurateDesc":"100% accurate IRCC scoring algorithm","feature.suggestions":"Boost Your Score","feature.suggestionsDesc":"Get personalized tips to gain +50 points","feature.draws":"2026 Draw Cutoffs","feature.drawsDesc":"Live IRCC Express Entry draw results","feature.instant":"Free & Instant","feature.instantDesc":"No signup required · Results in 2 minutes","wizard.step":"Step","wizard.of":"of","wizard.next":"Next →","wizard.back":"← Back","wizard.calculate":"Calculate Score ✓","results.breakdown":"Your CRS Score Breakdown","results.improve":"How to Increase Your CRS Score","results.category":"Category-Based Draw Eligibility","results.catIntro":"IRCC runs category-based draws with lower cutoffs for healthcare, STEM, trades, transport, and French speakers. Here's your eligibility:","results.timeline":"PR Timeline Estimate","results.draws":"Latest Express Entry Draws 2026","results.disclaimer":"This free CRS calculator provides an estimate based on IRCC's publicly available scoring criteria. Not affiliated with Immigration, Refugees and Citizenship Canada.","results.restart":"↻ Recalculate","results.share":"Share Results","results.pdf":"Download PDF","results.whatif":"What-If Score Simulator","results.whatifDesc":"See how improving IELTS, education, or work experience affects your CRS:","results.original":"Current","results.projected":"Projected","results.foreignWork":"Foreign Work (Skill Bonus)","strategy.actionCenter.title":"Action Center","strategy.actionCenter.subtitle":"Use this control center to execute the highest-impact moves with clear priority and risk visibility.","strategy.actionCenter.saveProfile":"Save profile","strategy.actionCenter.openOptimizer":"Open strategy optimizer","strategy.actionCenter.openForecast":"Open forecast","strategy.actionCenter.openPlan":"Open 90-day plan","strategy.actionCenter.comparePlans":"Compare plans","strategy.actionCenter.expertCoach":"Expert strategy coach","strategy.actionCenter.manageAccount":"Manage account","strategy.actionCenter.exportHandoff":"Export consultant handoff","strategy.actionCenter.profileStatus":"Profile save status","strategy.actionCenter.notSavedYet":"Not saved yet","strategy.actionCenter.planCompletion":"90-day completion","strategy.actionCenter.confidence":"Confidence","strategy.actionCenter.riskLevel":"Risk level","strategy.actionCenter.nextTask":"Next best task","strategy.actionCenter.startTask":"Start task","strategy.optimizer.title":"Strategy Optimizer","strategy.forecast.title":"Forecast Outlook","strategy.forecast.subtitle":"Projection based on recent draw cutoffs, volatility, and freshness of available data.","strategy.forecast.trend":"Trend","strategy.forecast.confidence":"Forecast confidence","strategy.forecast.sampleSize":"Sample size","strategy.forecast.likelihood":"Invitation likelihood","strategy.forecast.nextCutoff":"Projected next cutoff","strategy.forecast.threeDrawAvg":"3-draw avg","strategy.forecast.latestObserved":"Latest observed cutoff","strategy.forecast.gapToProjection":"Gap to projection","strategy.forecast.projectedSequence":"Projected sequence","strategy.forecast.volatility":"Volatility","strategy.forecast.slope":"Slope/draw","strategy.plan.title":"90-Day Action Plan","strategy.pricing.title":"Plans & Upgrade Path","strategy.pricing.experimentLabel":"Active experiment variant","strategy.pricing.freeCta":"Continue with Free","strategy.pricing.proCtaDefault":"Go to Pro setup","strategy.pricing.proCtaExperiment":"Start Pro planning","strategy.explainability.title":"Explainability & Confidence","footer.copy":"Free CRS Calculator 2026 · Not affiliated with IRCC"},Se={"header.title":"Calculateur SRC","welcome.heading":`Immigration au Canada
Calculateur de Points`,"welcome.sub":"Calculez votre score du Système de classement global (SCG) et découvrez votre meilleur chemin vers la résidence permanente canadienne.","welcome.btn":"Calculer Mon Score","welcome.updated":"Dernière mise à jour :","welcome.trust":"Données officielles d’IRCC — dernière mise à jour :","welcome.microcopy":"Cela prend 3 minutes — une question à la fois.","welcome.resume":"Vous avez un calcul en cours.","welcome.resumeBtn":"Reprendre","welcome.startFresh":"Recommencer","feature.accurate":"Score SCG Précis","feature.accurateDesc":"Calcul complet du Système de classement global","feature.suggestions":"Suggestions Intelligentes","feature.suggestionsDesc":"Conseils personnalisés pour augmenter vos points","feature.draws":"Derniers Tirages","feature.drawsDesc":"Résultats à jour des tirages Entrée express d'IRCC","feature.instant":"Résultats Instantanés","feature.instantDesc":"Obtenez votre score en moins de 2 minutes","wizard.step":"Étape","wizard.of":"de","wizard.next":"Suivant →","wizard.back":"← Retour","wizard.calculate":"Calculer le Score ✓","results.breakdown":"Détail de Votre Score","results.improve":"Comment Améliorer Votre Score","results.category":"Admissibilité aux Tirages par Catégorie","results.catIntro":"Le Canada organise des tirages spéciaux pour des groupes spécifiques avec des seuils plus bas. Voici ce à quoi vous pourriez être admissible :","results.timeline":"Calendrier Estimé","results.draws":"Tirages Récents Entrée Express","results.disclaimer":"Ce calculateur fournit une estimation basée sur les critères SCG publics. Il n'est pas affilié à IRCC.","results.restart":"↻ Recommencer","results.share":"Partager les Résultats","results.pdf":"Télécharger PDF","results.whatif":"Comparaison Hypothétique","results.whatifDesc":"Ajustez les variables pour voir comment votre score change :","results.original":"Original","results.projected":"Projeté","results.foreignWork":"Exp. Étrangère (Bonus)","strategy.actionCenter.title":"Centre d’action","strategy.actionCenter.subtitle":"Utilisez ce centre de contrôle pour exécuter les actions à plus fort impact avec priorités et risques visibles.","strategy.actionCenter.saveProfile":"Enregistrer le profil","strategy.actionCenter.openOptimizer":"Ouvrir l’optimiseur","strategy.actionCenter.openForecast":"Ouvrir la prévision","strategy.actionCenter.openPlan":"Ouvrir le plan 90 jours","strategy.actionCenter.comparePlans":"Comparer les offres","strategy.actionCenter.expertCoach":"Coach stratégie expert","strategy.actionCenter.manageAccount":"Gérer le compte","strategy.actionCenter.exportHandoff":"Exporter le dossier consultant","strategy.actionCenter.profileStatus":"Statut d’enregistrement","strategy.actionCenter.notSavedYet":"Pas encore enregistré","strategy.actionCenter.planCompletion":"Progression 90 jours","strategy.actionCenter.confidence":"Confiance","strategy.actionCenter.riskLevel":"Niveau de risque","strategy.actionCenter.nextTask":"Prochaine tâche prioritaire","strategy.actionCenter.startTask":"Démarrer la tâche","strategy.optimizer.title":"Optimiseur de stratégie","strategy.forecast.title":"Perspective de prévision","strategy.forecast.subtitle":"Projection basée sur les seuils récents, la volatilité et la fraîcheur des données.","strategy.forecast.trend":"Tendance","strategy.forecast.confidence":"Confiance de la prévision","strategy.forecast.sampleSize":"Taille d’échantillon","strategy.forecast.likelihood":"Probabilité d’invitation","strategy.forecast.nextCutoff":"Seuil projeté suivant","strategy.forecast.threeDrawAvg":"Moy. 3 tirages","strategy.forecast.latestObserved":"Dernier seuil observé","strategy.forecast.gapToProjection":"Écart à la projection","strategy.forecast.projectedSequence":"Séquence projetée","strategy.forecast.volatility":"Volatilité","strategy.forecast.slope":"Pente/tirage","strategy.plan.title":"Plan d’action 90 jours","strategy.pricing.title":"Offres et montée en gamme","strategy.pricing.experimentLabel":"Variante d’expérience active","strategy.pricing.freeCta":"Continuer en gratuit","strategy.pricing.proCtaDefault":"Accéder à la configuration Pro","strategy.pricing.proCtaExperiment":"Démarrer la planification Pro","strategy.explainability.title":"Explicabilité et confiance","footer.copy":"Calculateur SRC · Non affilié à IRCC"},X={en:ke,fr:Se},ce=N.createContext();function Ft({children:e}){const[n,r]=N.useState(()=>{try{return localStorage.getItem("crs-lang")||"en"}catch{return"en"}}),i=N.useCallback(o=>{r(o);try{localStorage.setItem("crs-lang",o)}catch{}},[]),s=N.useCallback((o,d="")=>X[n]?.[o]||X.en[o]||d||o,[n]);return t.jsx(ce.Provider,{value:{lang:n,setLang:i,t:s},children:e})}function Ne(){return N.useContext(ce)}const le="crs-analytics-queue-v2",Z="crs-analytics-session-v1",ee="2.0",_e=1800*1e3,Ee=2500;function de(e,n){try{return e?JSON.parse(e):n}catch{return n}}function Pe(e,n){return typeof window>"u"?n:de(window.localStorage.getItem(e),n)}function Re(e,n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}}function ue(e="evt"){return`${e}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,9)}`}function Fe(e,n=0){const r=Number(e);return Number.isFinite(r)?r:n}function De(e){return e?String(e).trim().toLowerCase().replace(/[^a-z0-9:_-]+/g,"_").slice(0,80):""}function Te(e={}){const n={};for(const[r,i]of Object.entries(e||{}))if(!(!r||i==null)){if(typeof i=="string"){n[r]=i.slice(0,280);continue}if(typeof i=="number"||typeof i=="boolean"){n[r]=i;continue}if(Array.isArray(i)){n[r]=i.slice(0,20).map(s=>String(s).slice(0,120));continue}n[r]=String(i).slice(0,280)}return n}function Oe(){return Pe(le,[])}function Ie(e){const n=Array.isArray(e)?e.slice(-300):[];Re(le,n)}function Me(){if(typeof window>"u")return{id:"server",seq:0,started_at:new Date().toISOString()};const e=Date.now(),n=de(window.sessionStorage.getItem(Z),null),i=!n||!n.last_activity_ms||e-n.last_activity_ms>_e?{id:ue("sess"),seq:1,started_at:new Date().toISOString(),last_activity_ms:e}:{...n,seq:Fe(n.seq,0)+1,last_activity_ms:e};try{window.sessionStorage.setItem(Z,JSON.stringify(i))}catch{}return i}function Ae(){if(typeof window>"u")return{app_version:"dev"};let e="unknown";try{e=Intl.DateTimeFormat().resolvedOptions().timeZone||"unknown"}catch{}return{app_version:"dev",lang:window.navigator?.language||"unknown",timezone:e,path:window.location?.pathname||"/"}}function Le(e){return!1}async function ze(e){if(typeof window>"u")return!1;const n=void 0;if(!Le())return!1;const r=JSON.stringify(e);if(window.navigator?.sendBeacon&&document.visibilityState==="hidden")try{if(window.navigator.sendBeacon(n,new Blob([r],{type:"application/json"})))return!0}catch{}const i=typeof AbortController<"u"?new AbortController:null;let s=null;i&&(s=window.setTimeout(()=>i.abort(),Ee));try{return(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:r,keepalive:!0,signal:i?.signal})).ok}catch{return!1}finally{s&&window.clearTimeout(s)}}function Be(e,n){if(!(typeof window>"u")&&typeof window.plausible=="function")try{window.plausible(e,{props:n})}catch{}}function T(e,n={}){if(typeof window>"u")return;const r=De(e);if(!r)return;const i=Me(),s=Te(n),o=Ae(),d={event_id:ue("evt"),schema_version:ee,name:r,ts:new Date().toISOString(),session_id:i.id,session_seq:i.seq,session_started_at:i.started_at,payload:s,meta:o},u=Oe();u.push(d),Ie(u),Be(r,{...s,schema_version:ee,session_seq:i.seq}),ze(d)}const V="crs-runtime-flags-v1",O={forceLocalData:!1,allowRemoteQuestionBank:!0,enableAdvancedForecasting:!0,enablePerfTelemetry:!0};function pe(e){const n=e&&typeof e=="object"?e:{};return{forceLocalData:!!n.forceLocalData,allowRemoteQuestionBank:n.allowRemoteQuestionBank!==!1,enableAdvancedForecasting:n.enableAdvancedForecasting!==!1,enablePerfTelemetry:n.enablePerfTelemetry!==!1}}function te(){if(typeof window>"u")return{...O};try{const e=window.localStorage.getItem(V);if(!e)return{...O};const n=JSON.parse(e);return{...O,...pe(n)}}catch{return{...O}}}function Dt(e){const n={...O,...pe(e)};if(typeof window>"u")return n;try{window.localStorage.setItem(V,JSON.stringify(n))}catch{}try{window.dispatchEvent(new Event("crs-runtime-flags-updated"))}catch{}return n}function Tt(){if(typeof window>"u")return{...O};try{window.localStorage.removeItem(V)}catch{}try{window.dispatchEvent(new Event("crs-runtime-flags-updated"))}catch{}return{...O}}const fe="crs-90-day-action-plan-v1",ge=1440*60*1e3,ne={High:3,Medium:2,Low:1},E={impact:.34,speed:.18,confidence:.22,effort:.12,laneFit:.14};function k(e,n,r){return Math.max(n,Math.min(r,e))}function $e(e,n){return`Day ${e}-${n}`}function _(e,n=0){const r=Number(e);return Number.isFinite(r)?r:n}function B(e,n=0){const r=parseInt(e,10);return Number.isFinite(r)?r:n}function Ge(e=new Date){const n=new Date(e);return n.setHours(0,0,0,0),n}function G(e,n){return new Date(e.getTime()+n*ge)}function q(e){try{return e.toLocaleDateString(void 0,{month:"short",day:"numeric"})}catch{return e.toISOString().slice(0,10)}}function $(e,n,r){const i=G(e,Math.max(n-1,0)),s=G(e,Math.max(r-1,0));return{startDateIso:i.toISOString(),endDateIso:s.toISOString(),weekWindow:`Week ${Math.ceil(n/7)}-${Math.ceil(r/7)}`,dateWindow:`${q(i)} → ${q(s)}`}}function We(e,n){const r=_(n);return e==="listening"?r>=8.5?10:r>=8?9:r>=7.5?8:r>=6?7:r>=5.5?6:r>=5?5:0:e==="reading"?r>=8?10:r>=7?9:r>=6.5?8:r>=6?7:r>=5?6:r>=4?5:0:r>=7.5?10:r>=7?9:r>=6.5?8:r>=6?7:r>=5.5?6:r>=5?5:0}function He(e={}){const n=["listening","reading","writing","speaking"],r=e.firstOfficialLanguage==="french",s=n.map(o=>r?B(e[`french_${o}`],0):e.langTestType==="celpip"?B(e[`celpip_${o}`],0):We(o,e[`ielts_${o}`])).filter(o=>o>0);return s.length?Math.min(...s):0}function P(e,n,r,i="medium"){return{id:e,label:n,detail:r,severity:i}}function Ue(e){return e==="high"?10:e==="medium"?5:2}function qe(e="Medium"){return e==="Easy"?100:e==="Medium"?68:38}function Ye(e=0){return e>=76?"High":e>=56?"Medium":"Low"}function Ve(e={},n,r){const i=_(n?.total),s=r-i,o=B(e.age,0),d=He(e),u=e.hasFrench==="yes"||e.firstOfficialLanguage==="french",p=B(e.canadianWorkExp,0),f=B(e.foreignWorkExp,0),C=d>=9?18:d>=7?46:74,x=k((o>=33?28:14)+(d<7?26:d<9?16:6)+(p===0?12:4)+(f>=3?8:3),10,90),c=[{key:"answers_accuracy",label:"Profile values are accurate and complete",confidence:e.knowsScore==="yes"?"Medium":"High"},{key:"draw_trend_stability",label:"Recent draw patterns remain directionally similar",confidence:Math.abs(s)<=20?"Medium":"Low"},{key:"execution_discipline",label:"You can sustain weekly execution cadence for 90 days",confidence:x<=45?"High":x<=65?"Medium":"Low"}],g=[];return o>=33&&g.push(P("risk-age-decay","Age-point decay risk","Delays can reduce score as age thresholds change.",o>=38?"high":"medium")),d>0&&d<7&&g.push(P("risk-language-floor","Language floor below CLB 7","Several lanes become weaker or inaccessible below CLB 7.","high")),u||g.push(P("risk-no-french","No French upside yet","You may miss lower-cutoff category opportunities tied to French strength.","low")),s>40&&g.push(P("risk-large-gap","Large score gap","A single action may not close this gap; a combination strategy is likely required.","high")),{score:i,gap:s,age:o,minLanguageClb:d,hasFrench:u,canadianWorkExp:p,foreignWorkExp:f,languageHeadroom:C,profileComplexity:x,assumptions:c,globalRiskFlags:g}}function me(e={}){const n=[e.age,e.education,e.pathway,e.canadianWorkExp,e.foreignWorkExp,e.hasFrench,e.hasPNP].join("|");let r=0;for(let i=0;i<n.length;i+=1)r=(r<<5)-r+n.charCodeAt(i),r|=0;return Math.abs(r).toString(16)}function Je(e,n,r){const i=e.category==="Language"?50+n.languageHeadroom*.45:e.category==="Provincial"?72:e.category==="Combination"?76:60,s=k(i+(e.goalReached?8:0)+(e.likelihoodPercent-50)*.35,30,95),o=[];return e.estimatedMonths>=10&&o.push(P(`${e.id}-timeline`,"Long timeline","This lane can take substantial time before score impact materializes.","medium")),e.difficulty==="Hard"&&o.push(P(`${e.id}-effort`,"Execution intensity","Consistent weekly effort is required to avoid plan drift.","medium")),!e.goalReached&&r>0&&o.push(P(`${e.id}-bridge`,"May require a second lane","This lane may need a backup action to fully close your gap.","low")),{id:`path-${e.id}`,title:e.title,lane:e.category,reason:e.whyItFits,scoreGain:e.potentialGain,months:e.estimatedMonths,confidence:e.likelihoodPercent,effort:e.difficulty,laneFit:s,riskFlags:o}}function Ke({score:e,cutoff:n,eligibleCount:r,signals:i}){const s=n-e,o=s<=0?82:s<=20?64:38,d=[];return r||d.push(P("category-not-eligible","Not category-eligible yet","A prerequisite profile change is required before this lane can be used.","high")),s>35&&d.push(P("category-gap","Gap still material","Category targeting helps, but the score gap remains significant.","medium")),{id:"lane-category-draws",title:"Category Draw Positioning",lane:"Category Draws",reason:r>0?`You match ${r} category stream(s). Improve targeted factors to close the category cutoff gap.`:"You are not currently category-eligible; targeted profile adjustments can unlock lower-cutoff streams.",scoreGain:k(Math.round(Math.max(s,0)*.5),0,80),months:s<=0?1:s<=20?4:8,confidence:o,effort:s<=0?"Easy":s<=20?"Medium":"Hard",laneFit:k((r>0?70:35)+(i.hasFrench?8:0),25,90),riskFlags:d}}function Qe(e){if(!e)return null;const n=[];return e.matchScore<55&&n.push(P(`province-${e.id}-fit`,"Lower province fit","Province alignment is currently moderate; stream targeting needs tighter matching.","high")),e.matchScore>=55&&e.matchScore<70&&n.push(P(`province-${e.id}-variance`,"Selection variance","Provincial intake criteria can shift and may require profile tuning.","medium")),{id:`lane-province-${e.id}`,title:`${e.name} PNP Focus`,lane:"Provincial",reason:`${e.name} has the highest profile match in your province analysis.`,scoreGain:e.matchScore>=70?600:300,months:e.matchScore>=70?6:9,confidence:k(e.matchScore,35,88),effort:e.matchScore>=70?"Medium":"Hard",laneFit:k(e.matchScore+(e.matchScore>=70?6:-4),25,95),riskFlags:n}}function Xe(e={},n=0){return[{key:"coreHumanCapital",label:"Core profile factors",value:_(e.coreHumanCapital)},{key:"skillTransferability",label:"Transferability factors",value:_(e.skillTransferability)},{key:"additionalPoints",label:"Additional point factors",value:_(e.additionalPoints)},{key:"spouseFactors",label:"Spouse factors",value:_(e.spouseFactors)}].map(i=>({...i,headroom:k(100-Math.round(i.value/Math.max(n,1)*100),0,100)})).sort((i,s)=>s.headroom-i.headroom).slice(0,2)}function Ze(e,n){const r=Math.max(Math.abs(n),35),i=k(Math.round(e.scoreGain/r*100),8,100),s=k(100-e.months*11,12,100),o=k(e.confidence,12,100),d=qe(e.effort),u=k(_(e.laneFit,60),10,100),p=i*E.impact+s*E.speed+o*E.confidence+d*E.effort+u*E.laneFit,f=Array.isArray(e.riskFlags)?e.riskFlags:[],C=k(f.reduce((c,g)=>c+Ue(g.severity),0),0,24),x=k(Math.round(p-C),1,100);return{...e,score:x,riskPenalty:C,scoreBreakdown:[{key:"impact",label:"Impact potential",value:i,weight:E.impact},{key:"speed",label:"Speed to value",value:s,weight:E.speed},{key:"confidence",label:"Data confidence",value:o,weight:E.confidence},{key:"effort",label:"Execution ease",value:d,weight:E.effort},{key:"laneFit",label:"Profile-lane fit",value:u,weight:E.laneFit}]}}function et(e){const n=new Date(e?.date||"");return Number.isNaN(n.getTime())?null:n}function tt(e={},n=10){return[...e.generalProgram||[],...e.categoryBased||[],...e.pnpDraws||[]].map(i=>({score:_(i?.score),date:et(i),program:i?.program||"Unknown"})).filter(i=>i.score>0&&i.date).sort((i,s)=>s.date.getTime()-i.date.getTime()).slice(0,n)}function nt(e=[]){if(!e.length)return 0;const n=e.reduce((i,s)=>i+s,0)/e.length,r=e.reduce((i,s)=>i+(s-n)**2,0)/e.length;return Math.sqrt(r)}function rt(e=0){return e>=75?"High":e>=55?"Medium":"Low"}function it({activeDraws:e,userScore:n,baseConfidence:r=60}){const i=tt(e,10);if(!i.length)return null;const s=i[0],o=[...i].reverse(),d=o[0],u=o[o.length-1],p=o.length,f=p>1?(u.score-d.score)/(p-1):0,C=s.score,x=Math.round(k(C+f,300,800)),c=Math.round(k(x+f,300,800)),g=Math.round(k(c+f,300,800)),I=Math.round((x+c+g)/3),h=nt(i.map(A=>A.score)),w=s.date,l=w?Math.floor((Date.now()-w.getTime())/ge):999;let b=_(r,60);b+=Math.min(p*3,18),b-=Math.min(h*1.2,24),l<=2?b+=5:l<=7?b+=1:l>14&&(b-=9),b=k(Math.round(b),20,92);const D=f>1.5?"rising":f<-1.5?"falling":"stable",m=D==="rising"?"Cutoff trend is rising":D==="falling"?"Cutoff trend is falling":"Cutoff trend is stable",R=_(n)-x,M=R>=20?"High":R>=0?"Medium":"Low";return{sampleSize:p,volatility:Number(h.toFixed(2)),slopePerDraw:Number(f.toFixed(2)),projectedNextCutoff:x,projectedThreeDrawAvg:I,projectedDraws:[x,c,g],trendDirection:D,trendLabel:m,confidenceScore:b,confidenceBand:rt(b),invitationLikelihood:M,userGapToNext:R,latestObservedCutoff:C,latestObservedProgram:s.program,latestObservedDateIso:w?.toISOString()||""}}function at({answers:e,result:n,averageCutoff:r,categoryInfo:i=[],provinces:s=[]}){const o=_(n?.total),d=_(r,520),u=d-o,p=Ve(e,n,d),C=(je(e,n,{averageCutoff:d}).plans||[]).slice(0,2).map(y=>Je(y,p,u)),x=i.filter(y=>typeof y?.check=="function"&&y.check(e)).length,c=Ke({score:o,cutoff:d,eligibleCount:x,signals:p}),g=Qe((s||[])[0]||null),h=[...C,c,g].filter(Boolean).map(y=>Ze(y,u)).sort((y,j)=>j.score-y.score).slice(0,4),w=h[0]||null,l=h[1]||null,b=Xe(n?.breakdown,o),D=[...p.globalRiskFlags||[],...h.slice(0,2).flatMap(y=>y.riskFlags||[])],m=Object.values(D.reduce((y,j)=>(j?.id&&(y[j.id]||(y[j.id]=j)),y),{})).slice(0,5),R=h.slice(0,2).map(y=>k(y.confidence-y.riskPenalty,0,100)),M=R.length?Math.round(R.reduce((y,j)=>y+j,0)/R.length):36,A=Ye(M),S=w?`Primary lane: ${w.title}. Estimated gain ${w.scoreGain} points in ~${w.months} months (${A.toLowerCase()} confidence).`:"No strong lane detected yet. Start by improving language and category eligibility.";return{score:o,cutoff:d,gap:u,ranked:h,top:w,nextBest:l,bottlenecks:b,assumptions:p.assumptions,globalRiskFlags:m,overallConfidence:M,confidenceBand:A,profileSignals:{minLanguageClb:p.minLanguageClb,profileComplexity:p.profileComplexity,languageHeadroom:p.languageHeadroom},scoreWeights:E,guidanceSummary:S}}function z(e,n,r,i,s,o,d,u="Medium",p,f={}){const{startDateIso:C,endDateIso:x,weekWindow:c,dateWindow:g}=$(p,i,s);return{id:e,title:n,rationale:r,window:$e(i,s),dayFrom:i,dayTo:s,impact:o,lane:d,priority:u,startDateIso:C,endDateIso:x,weekWindow:c,dateWindow:g,successMetric:f.successMetric||"Task completed with verified profile update.",checkpoint:f.checkpoint||"Run a score recalculation and note delta.",dependencies:f.dependencies||[],cadence:f.cadence||"3 focused sessions per week"}}function st({suggestions:e=[],strategy:n,scoreGap:r=0,progress:i={}}){const s=e[1],o=n?.top?.title||"Profile Optimization",d=Math.max(_(r),0),u=Ge(new Date),p=[z("plan-baseline","Lock baseline and target score",`Set a concrete target and freeze your baseline profile to avoid random changes. Current gap: ${d} points.`,1,7,0,o,"High",u,{successMetric:"Target score and top lane documented; baseline snapshot saved.",checkpoint:"Save profile with date tag and score target.",cadence:"One 45-minute planning block + one review"}),z("plan-primary-lane",`Execute primary lane: ${o}`,n?.top?.reason||"Follow the highest-impact lane identified by optimizer.",8,30,n?.top?.scoreGain||10,o,"High",u,{successMetric:`Deliver at least 60% of ${o} milestones.`,checkpoint:"Verify measurable progress (test booking, docs, submissions, etc.)."}),z("plan-secondary-lane",s?`Secondary boost: ${s.title}`:"Secondary boost: language and profile precision",s?.description||"Add one additional improvement path to reduce draw uncertainty.",24,50,s?.potentialGain||8,s?.title||"Secondary path","Medium",u,{successMetric:"Secondary lane started with first concrete deliverable completed.",checkpoint:"Compare score delta before/after secondary-lane kickoff.",dependencies:["plan-primary-lane"]}),z("plan-document-pack","Prepare immigration document pack","Collect and verify key documents (identity, education, work proofs, test reports, proof-of-funds readiness).",35,68,0,"Readiness","High",u,{successMetric:"Core document checklist reaches 90% readiness.",checkpoint:"Review missing docs and issue dates.",cadence:"Two short admin sessions weekly"}),z("plan-risk-buffer","Activate fallback lane if progress stalls","If progress velocity is below target, start a backup action immediately (e.g., category-specific adjustment or province-first route).",55,80,6,"Fallback Control","Medium",u,{successMetric:"Fallback lane is selected and started within 7 days of stall signal.",checkpoint:"Mark stall trigger if expected gain is short by 20%+.",dependencies:["plan-primary-lane"]}),z("plan-profile-audit","Profile audit and draw readiness check","Re-evaluate score vs latest draws and category cutoffs. Trigger fallback lane if gap remains above 15 points.",75,90,0,"Risk Control","High",u,{successMetric:"Final 90-day readiness review completed with go/no-go decision.",checkpoint:"Capture current score, active cutoff delta, and next 30-day plan.",dependencies:["plan-document-pack"]})],f=[{label:"Days 1-30",objective:"Baseline lock + launch primary lane",expectedGain:p[1].impact,dateWindow:$(u,1,30).dateWindow},{label:"Days 31-60",objective:"Add secondary lane + document readiness",expectedGain:p[2].impact,dateWindow:$(u,31,60).dateWindow},{label:"Days 61-90",objective:"Fallback control + final draw readiness review",expectedGain:p[4].impact,dateWindow:$(u,61,90).dateWindow}],C=p.filter(w=>!!i[w.id]).length,x=p.length,c=x>0?Math.round(C/x*100):0,g=[...p].filter(w=>!i[w.id]).sort((w,l)=>{const b=ne[l.priority]-ne[w.priority];return b!==0?b:w.dayFrom-l.dayFrom})[0]||null,I=c>=100?"All action-plan tasks are complete. Keep a weekly score monitor to stay draw-ready.":g?`Next best task: ${g.title} (${g.dateWindow}).`:"Continue progressing through the plan in order of priority.",h=[14,30,60,90].map(w=>{const l=G(u,w-1);return{day:w,iso:l.toISOString(),label:q(l)}});return{tasks:p,milestones:f,completedCount:C,totalCount:x,completionPct:c,nextBestTask:g,completionGuidance:I,calendar:{planStartIso:u.toISOString(),planEndIso:G(u,89).toISOString(),reviewDates:h}}}function re(e={}){if(typeof window>"u")return{};const n=`${fe}:${me(e)}`;try{const r=window.localStorage.getItem(n);return r?JSON.parse(r):{}}catch{return{}}}function ot(e={},n={}){if(typeof window>"u")return;const r=`${fe}:${me(e)}`;try{window.localStorage.setItem(r,JSON.stringify(n||{}))}catch{}}const Y="crs-exp-assignments-v1",ct="crs-exp-overrides-v1",ie="crs-exp-visitor-id-v1",ae="crs-exp-exposures-v1",J={pricing_layout_v1:{variants:[{id:"control",weight:50},{id:"pro_first",weight:50}],goals:["pricing_cta_click","handoff_export"]}};function he(e,n){try{return e?JSON.parse(e):n}catch{return n}}function K(e){return typeof window>"u"?{}:he(window.localStorage.getItem(e),{})}function lt(e,n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n||{}))}catch{}}function dt(e){return typeof window>"u"?{}:he(window.sessionStorage.getItem(e),{})}function ut(e,n){if(!(typeof window>"u"))try{window.sessionStorage.setItem(e,JSON.stringify(n||{}))}catch{}}function pt(e=""){let n=0;for(let r=0;r<e.length;r+=1)n=(n<<5)-n+e.charCodeAt(r),n|=0;return Math.abs(n)}function ft(e,n,r=J){const i=r?.[e];if(!i||!Array.isArray(i.variants)||i.variants.length===0)return"control";const s=i.variants.map(f=>({id:String(f.id||""),weight:Number(f.weight)>0?Number(f.weight):0})).filter(f=>f.id&&f.weight>0);if(!s.length)return"control";const o=s.reduce((f,C)=>f+C.weight,0),u=pt(`${e}:${n||"default"}`)%o;let p=0;for(const f of s)if(p+=f.weight,u<p)return f.id;return s[s.length-1].id}function gt(){if(typeof window>"u")return"server";const e=String(window.localStorage.getItem(ie)||"").trim();if(e)return e;const n=`visitor_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,9)}`;try{window.localStorage.setItem(ie,n)}catch{}return n}function mt(e){const n=K(ct),r=String(n?.[e]||"").trim();return r&&J[e]?.variants?.some(o=>o.id===r)?r:null}function ht(e){if(typeof window>"u")return;const n=dt(ae),r=`${e.experimentKey}:${e.variant}`;n?.[e.experimentKey]!==r&&(ut(ae,{...n,[e.experimentKey]:r}),T("experiment_exposure",{experiment_key:e.experimentKey,experiment_variant:e.variant,experiment_source:e.source}))}function ye(e,{autoTrack:n=!1}={}){if(!J[e])return{experimentKey:e,variant:"control",source:"unknown_experiment"};const i=mt(e),s=gt(),o=i||ft(e,s),d=i?"override":"hash",u=K(Y);u?.[e]!==o&&lt(Y,{...u,[e]:o});const p={experimentKey:e,variant:o,source:d,visitorId:s};return n&&ht(p),p}function U(e,n,r={}){const i=ye(e,{autoTrack:!0});return T("experiment_goal",{experiment_key:i.experimentKey,experiment_variant:i.variant,experiment_source:i.source,goal:n,...r}),i}function yt(){return K(Y)}function xt(e={}){const n={};for(const[r,i]of Object.entries(e||{}))i!=null&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&(n[r]=i);return n}function wt(e=[],n={}){return(Array.isArray(e)?e:[]).map(r=>{let i=!1;try{i=typeof r?.check=="function"?!!r.check(n):!1}catch{i=!1}return{id:r?.id||"",name:r?.name||"",recentCutoff:Number(r?.recentCutoff)||0,cutoffRange:r?.cutoffRange||"",source:r?.source||"unknown",updatedAt:r?.updatedAt||null,eligible:i}})}function bt(e={}){return{confidenceBand:e?.confidenceBand||"Unknown",overallConfidence:Number(e?.overallConfidence)||0,score:Number(e?.score)||0,cutoff:Number(e?.cutoff)||0,gap:Number(e?.gap)||0,top:e?.top?{title:e.top.title,lane:e.top.lane,score:Number(e.top.score)||0,scoreGain:Number(e.top.scoreGain)||0,months:Number(e.top.months)||0,confidence:Number(e.top.confidence)||0,effort:e.top.effort||"Unknown"}:null,ranked:(e?.ranked||[]).slice(0,4).map(n=>({id:n.id,title:n.title,lane:n.lane,score:Number(n.score)||0,scoreGain:Number(n.scoreGain)||0,months:Number(n.months)||0,confidence:Number(n.confidence)||0,effort:n.effort||"Unknown"})),riskFlags:(e?.globalRiskFlags||[]).map(n=>({id:n.id,label:n.label,severity:n.severity}))}}function vt(e={}){return{completionPct:Number(e?.completionPct)||0,completedCount:Number(e?.completedCount)||0,totalCount:Number(e?.totalCount)||0,nextBestTask:e?.nextBestTask?{id:e.nextBestTask.id,title:e.nextBestTask.title,dateWindow:e.nextBestTask.dateWindow,successMetric:e.nextBestTask.successMetric}:null,tasks:(e?.tasks||[]).map(n=>({id:n.id,title:n.title,lane:n.lane,priority:n.priority,impact:Number(n.impact)||0,dateWindow:n.dateWindow,weekWindow:n.weekWindow}))}}function Ct({answers:e={},result:n={},strategy:r={},forecast:i=null,actionPlan:s={},drawData:o={},categoryInfo:d=[]}={}){const u=Number(n?.total)||0,p=Number(o?.averageCutoff)||Number(r?.cutoff)||0;return{schema:"crs_consultant_handoff_v1",generatedAt:new Date().toISOString(),appVersion:"dev",summary:{score:u,averageCutoff:p,gapToAverageCutoff:u-p,confidenceBand:r?.confidenceBand||"Unknown"},policy:n?.policy||null,profileAnswers:xt(e),scoreBreakdown:n?.breakdown||{},scoreDetails:n?.details||{},strategy:bt(r),forecast:i?{trendLabel:i.trendLabel,confidenceBand:i.confidenceBand,confidenceScore:Number(i.confidenceScore)||0,projectedNextCutoff:Number(i.projectedNextCutoff)||0,projectedThreeDrawAvg:Number(i.projectedThreeDrawAvg)||0,projectedDraws:Array.isArray(i.projectedDraws)?i.projectedDraws:[],invitationLikelihood:i.invitationLikelihood||"Unknown"}:null,actionPlan:vt(s),dataSnapshot:{drawLastUpdated:o?.lastUpdated||null,drawSource:o?.source||null,categoryCount:Array.isArray(d)?d.length:0,categoryEligibility:wt(d,e)},experimentAssignments:yt()}}function jt(e){return String(e||"").replace(/[:]/g,"-").replace(/\..+$/,"").replace("T","_").replace("Z","")}function kt(e,{filePrefix:n="consultant-handoff"}={}){if(typeof window>"u")return!1;try{const r=JSON.stringify(e,null,2),i=new Blob([r],{type:"application/json"}),s=window.URL.createObjectURL(i),o=document.createElement("a"),d=jt(e?.generatedAt||new Date().toISOString());return o.href=s,o.download=`${n}-${d}.json`,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(s),!0}catch{return!1}}function St({value:e}){const n=e==="High"?"priority-high":e==="Medium"?"priority-medium":"priority-low";return t.jsx("span",{className:`priority-badge ${n}`,children:e})}function se({value:e}){const n=e==="Easy"?"effort-easy":e==="Medium"?"effort-medium":"effort-hard";return t.jsx("span",{className:`effort-badge ${n}`,children:e})}function oe({value:e}){const n=e==="high"?"risk-high":e==="medium"?"risk-medium":"risk-low";return t.jsx("span",{className:`risk-badge ${n}`,children:e})}function Nt(e=""){return e==="High"?"assumption-high":e==="Medium"?"assumption-medium":"assumption-low"}function _t(e){return e==="free"?"Free":"Pro Tracking"}function Et({answers:e,result:n,suggestions:r,averageCutoff:i,activeDraws:s,activeCategoryInfo:o,provinces:d,drawFreshness:u,categoryFreshness:p,saveStatus:f,onJumpToSection:C,onOpenAccount:x}){const{t:c}=Ne(),[g,I]=N.useState(()=>te()),[h,w]=N.useState(()=>({experimentKey:"pricing_layout_v1",variant:"control",source:"init"})),l=N.useMemo(()=>at({answers:e,result:n,averageCutoff:i,categoryInfo:o,provinces:d}),[o,e,i,d,n]),[b,D]=N.useState(()=>re(e));N.useEffect(()=>{D(re(e))},[e]),N.useEffect(()=>{const a=()=>I(te());return window.addEventListener("crs-runtime-flags-updated",a),()=>window.removeEventListener("crs-runtime-flags-updated",a)},[]),N.useEffect(()=>{w(ye("pricing_layout_v1",{autoTrack:!0}))},[]);const m=N.useMemo(()=>st({suggestions:r,strategy:l,scoreGap:Math.max((i||0)-(n?.total||0),0),progress:b}),[i,b,n?.total,l,r]),R=m.completedCount||0,M=m.totalCount||m.tasks.length,A=m.completionPct||0,S=N.useMemo(()=>g.enableAdvancedForecasting?it({activeDraws:s,userScore:n?.total||0,baseConfidence:l.overallConfidence}):null,[s,n?.total,g.enableAdvancedForecasting,l.overallConfidence]),y=[{label:"Core Human Capital",value:n?.breakdown?.coreHumanCapital||0},{label:"Skill Transferability",value:n?.breakdown?.skillTransferability||0},{label:"Additional Points",value:n?.breakdown?.additionalPoints||0},{label:"Spouse Factors",value:n?.breakdown?.spouseFactors||0}].sort((a,v)=>v.value-a.value).slice(0,3),j=N.useMemo(()=>{const a=l.globalRiskFlags?.some(H=>H.severity==="high"),v=(l.profileSignals?.profileComplexity||0)>=70,L=(l.gap||0)>45,W=a||l.top?.effort==="Hard"||(l.gap||0)>22;return L&&v?{tier:"pro",badge:"Priority recommendation",rationale:"Your profile looks high-complexity with a wider gap. Pro tracking helps reduce execution risk with tighter follow-through."}:W?{tier:"pro",badge:"Recommended now",rationale:"You likely benefit from structured tracking and guided execution while closing your gap."}:{tier:"free",badge:"Sufficient for now",rationale:"Your current profile can continue with free tools while monitoring draw changes."}},[l.gap,l.globalRiskFlags,l.profileSignals?.profileComplexity,l.top?.effort]),xe=l.globalRiskFlags?.some(a=>a.severity==="high")?"Elevated":l.globalRiskFlags?.some(a=>a.severity==="medium")?"Moderate":"Low",Q=h.variant==="pro_first",we=Q?c("strategy.pricing.proCtaExperiment","Start Pro planning"):c("strategy.pricing.proCtaDefault","Go to Pro setup"),F=(a,v)=>{C(a),T("action_center_cta_clicked",{cta:v,target_section:a,confidence_band:l.confidenceBand,experiment_key:h.experimentKey,experiment_variant:h.variant})},be=()=>{x?.(),T("action_center_cta_clicked",{cta:"manage_account",target_section:"account_modal",confidence_band:l.confidenceBand,experiment_key:h.experimentKey,experiment_variant:h.variant})},ve=()=>{const a=Ct({answers:e,result:n,strategy:l,forecast:S,actionPlan:m,drawData:{...s,source:u?.tier||"unknown"},categoryInfo:o}),v=kt(a);T("consultant_handoff_exported",{status:v?"ok":"failed",score:Number(n?.total)||0,confidence_band:l.confidenceBand,experiment_key:h.experimentKey,experiment_variant:h.variant}),U("pricing_layout_v1","handoff_export",{status:v?"ok":"failed"})},Ce=a=>{const v={...b,[a]:!b[a]};D(v),ot(e,v);const L=m.tasks.filter(H=>!!v[H.id]).length,W=m.tasks.length>0?Math.round(L/m.tasks.length*100):0;T("action_plan_task_toggled",{task_id:a,completed:!!v[a],completion_pct:W,completed_count:L,total_count:m.tasks.length,next_task_id:m.nextBestTask?.id||"none"})};return t.jsxs(t.Fragment,{children:[t.jsxs("section",{className:"card strategic-action-center",id:"section-action-center",children:[t.jsx("h3",{children:c("strategy.actionCenter.title","Action Center")}),t.jsx("p",{className:"cat-intro",children:c("strategy.actionCenter.subtitle","Use this control center to execute the highest-impact moves with clear priority and risk visibility.")}),t.jsxs("div",{className:"strategic-action-grid",children:[t.jsx("button",{type:"button",className:"action-btn",onClick:()=>F("section-save","save_profile"),children:c("strategy.actionCenter.saveProfile","Save profile")}),g.enableAdvancedForecasting&&t.jsx("button",{type:"button",className:"action-btn",onClick:()=>F("section-forecast","open_forecast"),children:c("strategy.actionCenter.openForecast","Open forecast")}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>F("section-optimizer","open_optimizer"),children:c("strategy.actionCenter.openOptimizer","Open strategy optimizer")}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>F("section-90-day-plan","open_90_day_plan"),children:c("strategy.actionCenter.openPlan","Open 90-day plan")}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>F("section-pricing","compare_plans"),children:c("strategy.actionCenter.comparePlans","Compare plans")}),t.jsx("button",{type:"button",className:"action-btn",onClick:ve,children:c("strategy.actionCenter.exportHandoff","Export consultant handoff")}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>F("section-coach","expert_strategy_coach"),children:c("strategy.actionCenter.expertCoach","Expert strategy coach")}),t.jsx("button",{type:"button",className:"action-btn",onClick:be,children:c("strategy.actionCenter.manageAccount","Manage account")})]}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:[c("strategy.actionCenter.profileStatus","Profile save status"),": ",t.jsx("strong",{children:f||c("strategy.actionCenter.notSavedYet","Not saved yet")})]}),t.jsxs("span",{children:[c("strategy.actionCenter.planCompletion","90-day completion"),": ",t.jsxs("strong",{children:[A,"%"]})," (",R,"/",M,")"]}),t.jsxs("span",{children:[c("strategy.actionCenter.confidence","Confidence"),": ",t.jsx("strong",{children:l.confidenceBand})," (",l.overallConfidence," / 100)"]}),t.jsxs("span",{children:[c("strategy.actionCenter.riskLevel","Risk level"),": ",t.jsx("strong",{children:xe})]})]}),m.nextBestTask&&t.jsxs("div",{className:"next-task-callout",children:[t.jsxs("div",{children:[t.jsxs("strong",{children:[c("strategy.actionCenter.nextTask","Next best task"),": ",m.nextBestTask.title]}),t.jsxs("p",{children:[m.nextBestTask.dateWindow," · ",m.nextBestTask.weekWindow]}),t.jsx("small",{children:m.nextBestTask.successMetric})]}),t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>F("section-90-day-plan","next_best_task"),children:c("strategy.actionCenter.startTask","Start task")})]})]}),g.enableAdvancedForecasting&&S&&t.jsxs("section",{className:"card strategic-forecast",id:"section-forecast",children:[t.jsx("h3",{children:c("strategy.forecast.title","Forecast Outlook")}),t.jsx("p",{className:"cat-intro",children:c("strategy.forecast.subtitle","Projection based on recent draw cutoffs, volatility, and freshness of available data.")}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:[c("strategy.forecast.trend","Trend"),": ",t.jsx("strong",{children:S.trendLabel})]}),t.jsxs("span",{children:[c("strategy.forecast.confidence","Forecast confidence"),": ",t.jsx("strong",{children:S.confidenceBand})," (",S.confidenceScore,"/100)"]}),t.jsxs("span",{children:[c("strategy.forecast.sampleSize","Sample size"),": ",t.jsx("strong",{children:S.sampleSize})]}),t.jsxs("span",{children:[c("strategy.forecast.likelihood","Invitation likelihood"),": ",t.jsx("strong",{children:S.invitationLikelihood})]})]}),t.jsxs("div",{className:"optimizer-top-callout",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:[c("strategy.forecast.nextCutoff","Projected next cutoff"),": ",S.projectedNextCutoff]}),t.jsxs("span",{className:"optimizer-score",children:[c("strategy.forecast.threeDrawAvg","3-draw avg")," ",S.projectedThreeDrawAvg]})]}),t.jsxs("p",{children:[c("strategy.forecast.latestObserved","Latest observed cutoff"),": ",S.latestObservedCutoff," · ",c("strategy.forecast.gapToProjection","Gap to projection"),": ",S.userGapToNext>0?"+":"",S.userGapToNext]}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:[c("strategy.forecast.projectedSequence","Projected sequence"),": ",S.projectedDraws.join(" → ")]}),t.jsxs("span",{children:[c("strategy.forecast.volatility","Volatility"),": ",S.volatility.toFixed(2)]}),t.jsxs("span",{children:[c("strategy.forecast.slope","Slope/draw"),": ",S.slopePerDraw]})]})]})]}),t.jsxs("section",{className:"card strategic-optimizer",id:"section-optimizer",children:[t.jsx("h3",{children:c("strategy.optimizer.title","Strategy Optimizer")}),t.jsx("p",{className:"cat-intro",children:l.guidanceSummary}),l.top&&t.jsxs("div",{className:"optimizer-top-callout",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:["Top lane: ",l.top.title]}),t.jsxs("span",{className:"optimizer-score",children:["Priority ",l.top.score,"/100"]})]}),t.jsx("p",{children:l.top.reason}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Estimated gain: +",l.top.scoreGain]}),t.jsxs("span",{children:["Expected timeline: ~",l.top.months," months"]}),t.jsxs("span",{children:["Confidence: ",l.top.confidence,"%"]}),t.jsx(se,{value:l.top.effort})]}),!!l.top.riskFlags?.length&&t.jsx("ul",{className:"optimizer-risk-list",children:l.top.riskFlags.map(a=>t.jsxs("li",{children:[t.jsx(oe,{value:a.severity}),t.jsx("span",{children:a.label})]},a.id))})]}),t.jsx("div",{className:"optimizer-options",children:l.ranked.map((a,v)=>t.jsxs("article",{className:"optimizer-option",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:[v+1,". ",a.title]}),t.jsxs("div",{className:"optimizer-option-end",children:[t.jsxs("span",{className:"optimizer-score",children:["Score ",a.score]}),t.jsx(se,{value:a.effort})]})]}),t.jsx("p",{children:a.reason}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Lane: ",a.lane]}),t.jsxs("span",{children:["+",a.scoreGain," pts"]}),t.jsxs("span",{children:[a.months," mo"]}),t.jsxs("span",{children:[a.confidence,"% confidence"]})]})]},a.id))})]}),t.jsxs("section",{className:"card strategic-plan",id:"section-90-day-plan",children:[t.jsx("h3",{children:c("strategy.plan.title","90-Day Action Plan")}),t.jsx("p",{className:"cat-intro",children:"Execution-focused milestones with calendar windows, measurable outcomes, and fallback controls."}),t.jsx("p",{className:"plan-guidance",children:m.completionGuidance}),t.jsx("div",{className:"plan-review-dates",children:m.calendar?.reviewDates?.map(a=>t.jsxs("span",{children:["Review D",a.day,": ",a.label]},a.day))}),t.jsx("div",{className:"plan-milestones",children:m.milestones.map(a=>t.jsxs("div",{className:"plan-milestone",children:[t.jsx("strong",{children:a.label}),t.jsx("p",{children:a.objective}),t.jsx("small",{children:a.dateWindow}),t.jsxs("small",{children:["Expected gain: +",a.expectedGain," pts"]})]},a.label))}),t.jsx("ul",{className:"plan-task-list",children:m.tasks.map(a=>{const v=!!b[a.id],L=m.nextBestTask?.id===a.id&&!v;return t.jsxs("li",{className:`${v?"done":""} ${L?"next-task":""}`.trim(),children:[t.jsx("button",{type:"button",className:"plan-task-toggle",onClick:()=>Ce(a.id),"aria-label":`Toggle ${a.title}`,children:v?"✓":"○"}),t.jsxs("div",{children:[t.jsxs("div",{className:"plan-task-head",children:[t.jsx("strong",{children:a.title}),t.jsx(St,{value:a.priority})]}),t.jsx("p",{children:a.rationale}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsx("span",{children:a.window}),t.jsx("span",{children:a.weekWindow}),t.jsx("span",{children:a.dateWindow}),t.jsxs("span",{children:["Lane: ",a.lane]}),t.jsxs("span",{children:["Impact: +",a.impact," pts"]})]}),t.jsxs("small",{className:"plan-task-metric",children:["Success metric: ",a.successMetric]}),t.jsxs("small",{className:"plan-task-metric",children:["Checkpoint: ",a.checkpoint]})]})]},a.id)})})]}),t.jsxs("section",{className:"card strategic-pricing",id:"section-pricing",children:[t.jsx("h3",{children:c("strategy.pricing.title","Plans & Upgrade Path")}),t.jsx("p",{className:"cat-intro",children:"Choose support depth based on your current gap, risk profile, and execution complexity."}),t.jsxs("div",{className:"pricing-recommendation-banner",children:[t.jsxs("strong",{children:[j.badge,": ",_t(j.tier)]}),t.jsx("p",{children:j.rationale}),t.jsxs("small",{className:"pricing-experiment-note",children:[c("strategy.pricing.experimentLabel","Active experiment variant"),": ",h.variant]})]}),t.jsxs("div",{className:`pricing-grid ${Q?"pro-first":""}`,children:[t.jsxs("article",{className:`pricing-tier pricing-tier-free ${j.tier==="free"?"recommended":""}`,children:[j.tier==="free"&&t.jsx("span",{className:"pricing-reco-badge",children:"Best fit now"}),t.jsx("h4",{children:"Free"}),t.jsx("strong",{children:"0 CAD"}),t.jsxs("ul",{children:[t.jsx("li",{children:"CRS scoring + basic suggestions"}),t.jsx("li",{children:"Scenario compare"}),t.jsx("li",{children:"Local profile save"})]}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>{U("pricing_layout_v1","pricing_cta_click",{tier:"free"}),T("pricing_cta_clicked",{tier:"free",recommended:j.tier==="free",experiment_key:h.experimentKey,experiment_variant:h.variant}),F("section-optimizer","continue_free")},children:c("strategy.pricing.freeCta","Continue with Free")})]}),t.jsxs("article",{className:`pricing-tier pricing-tier-pro featured ${j.tier==="pro"?"recommended":""}`,children:[j.tier==="pro"&&t.jsx("span",{className:"pricing-reco-badge",children:"Recommended"}),t.jsx("h4",{children:"Pro Tracking"}),t.jsx("strong",{children:"5 CAD / month"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Expert strategy coach"}),t.jsx("li",{children:"Daily action tracking"}),t.jsx("li",{children:"Cloud sync + alerts"})]}),t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>{U("pricing_layout_v1","pricing_cta_click",{tier:"pro_tracking"}),T("pricing_cta_clicked",{tier:"pro_tracking",recommended:j.tier==="pro",experiment_key:h.experimentKey,experiment_variant:h.variant}),F("section-coach","go_to_pro_setup")},children:we})]})]})]}),t.jsxs("section",{className:"card strategic-explainability",id:"section-explainability",children:[t.jsx("h3",{children:c("strategy.explainability.title","Explainability & Confidence")}),t.jsx("p",{className:"cat-intro",children:"Structured reasoning for lane ranking, confidence, and risk assumptions."}),t.jsxs("div",{className:"explain-grid",children:[t.jsxs("article",{children:[t.jsx("h4",{children:"Top score drivers"}),t.jsx("ul",{children:y.map(a=>t.jsxs("li",{children:[t.jsx("span",{children:a.label}),t.jsx("strong",{children:a.value})]},a.label))})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Recommendation score factors"}),t.jsx("ul",{className:"explain-factor-list",children:(l.top?.scoreBreakdown||[]).map(a=>t.jsxs("li",{children:[t.jsxs("div",{className:"explain-factor-head",children:[t.jsx("span",{children:a.label}),t.jsx("strong",{children:a.value})]}),t.jsx("div",{className:"explain-factor-track",children:t.jsx("span",{className:"explain-factor-fill",style:{width:`${a.value}%`}})}),t.jsxs("small",{children:["Weight: ",Math.round((a.weight||0)*100),"%"]})]},a.key))})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Data confidence"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Overall confidence: ",t.jsxs("strong",{children:[l.confidenceBand," (",l.overallConfidence,"/100)"]})]}),t.jsxs("li",{children:["Draw freshness: ",t.jsx("strong",{children:u?.label||"Unknown"})]}),t.jsxs("li",{children:["Category freshness: ",t.jsx("strong",{children:p?.label||"Unknown"})]}),t.jsxs("li",{children:["Draw source snapshot: ",t.jsx("strong",{children:s?.lastUpdated||"Unavailable"})]})]})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Assumptions used"}),t.jsx("ul",{className:"assumption-list",children:(l.assumptions||[]).map(a=>t.jsxs("li",{children:[t.jsx("span",{children:a.label}),t.jsx("strong",{className:Nt(a.confidence),children:a.confidence})]},a.key))})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Risk indicators"}),t.jsxs("ul",{className:"risk-indicator-list",children:[(l.globalRiskFlags||[]).map(a=>t.jsxs("li",{children:[t.jsxs("div",{children:[t.jsx("strong",{children:a.label}),t.jsx("small",{children:a.detail})]}),t.jsx(oe,{value:a.severity})]},a.id)),!l.globalRiskFlags?.length&&t.jsx("li",{children:"No major risk flags detected."})]})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Trust cues"}),t.jsxs("div",{className:"trust-inline-cues",children:[t.jsx("span",{children:"Estimate model only"}),t.jsx("span",{children:"No legal advice"}),t.jsx("span",{children:"Review official IRCC before filing"})]}),t.jsxs("p",{className:"save-note",children:["Review governance in the ",t.jsx("a",{href:"/trust.html",children:"Trust Center"}),", implementation guides in ",t.jsx("a",{href:"/guides.html",children:"Guides"}),", and rights controls in ",t.jsx("a",{href:"/privacy.html",children:"Privacy Policy"}),"."]})]})]})]})]})}const Ot=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"}));export{Ft as L,Ot as R,Tt as a,te as r,Dt as s,T as t,Ne as u};
