const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/feature-path-coach-CtSDU3nA.js","assets/vendor-react-Ah1pgjPn.js","assets/data-question-bank-F-s7nTqV.js","assets/vendor-supabase-BZ0N5lZN.js","assets/vendor-motion-DURBmaq0.js"])))=>i.map(i=>d[i]);
import{t as w,u as ra,r as $e,g as oa,l as Le,L as Ge,a as ca,i as la,s as da,b as ma,_ as ha}from"./index-sNv97AZs.js";import{r as m,j as e}from"./vendor-react-Ah1pgjPn.js";import{g as ua,a as pa,r as q,b as fa,h as ga,c as xa,u as ja,d as ya}from"./feature-path-coach-CtSDU3nA.js";import{v as ba}from"./data-question-bank-F-s7nTqV.js";import{u as va,m as j,A as ae}from"./vendor-motion-DURBmaq0.js";import"./vendor-supabase-BZ0N5lZN.js";function R(a,s,n,i,o,p,l=""){return{title:a,description:s,potentialGain:n,difficulty:i,timeframe:o,icon:p,action:l}}function Na(a,s){const n=[],i=ua(a),o=pa(a),p=a.firstOfficialLanguage==="french"?"french":"english",l=p==="french"||a.hasFrench==="yes";if(i<10){const c=Math.min(i+1,10),r=["listening","reading","writing","speaking"];let u="First official language";const y={};if(p==="french"){u="French (NCLC)",y.hasFrench="yes",y.frenchTestType="clb";for(const E of r){const S=`french_${E}`,v=parseInt(a[S],10)||0;y[S]=String(Math.max(v,c))}}else{u=a.langTestType==="celpip"?"CELPIP":"IELTS";for(const E of r){const S=a.langTestType==="celpip"?`celpip_${E}`:`ielts_${E}`,v=a.langTestType==="celpip"?parseInt(a[S],10)||0:parseFloat(a[S])||0;a.langTestType==="celpip"?y[S]=Math.max(v,c):y[S]=Math.max(v,v+.5)}}const N=q(a,y).total-s.total;N>0&&n.push(R(`Improve ${u} Scores`,`Raising your weakest ${u} skill to CLB ${c} could add significant points. Focus on your lowest band.`,N,"Medium","3-5 months","language",`Current min CLB ${i} → target CLB ${c} = +${N} CRS`))}const d=["less_than_secondary","secondary","one_year_post","two_year_post","bachelors","two_or_more","masters","doctoral"],h=d.indexOf(a.education);if(h>=0&&h<d.length-1){const c=d[h+1],u=q(a,{education:c}).total-s.total;if(u>0){const y={secondary:"high school diploma",one_year_post:"1-year diploma",two_year_post:"2-year diploma",bachelors:"bachelor's degree",two_or_more:"two credentials",masters:"master's degree",doctoral:"doctoral degree"};n.push(R("Higher Education",`Completing a ${y[c]||"higher credential"} could boost your score.`,u,"Hard","1-4 years","education",`${a.education||"current level"} → ${c} = +${u} CRS`))}}const g=parseInt(a.canadianWorkExp)||0;if(g<5){const r=q(a,{canadianWorkExp:String(g+1)}).total-s.total;r>0&&n.push(R("Gain Canadian Work Experience","An additional year of Canadian work experience adds points across multiple categories including skill transferability.",r,"Hard","8-12 months","work",`${g} year(s) → ${g+1} year(s) = +${r} CRS`))}if(l)fa(a)>=7&&s.total<520&&s.total>=370&&n.push(R("Target French-Language Category Draw",`With your French NCLC 7+ scores, you qualify for French-language category draws where recent cutoffs are around 400 — your score of ${s.total} may already be competitive!`,0,"Easy","Immediate","french",`Current score ${s.total} already fits many French-category cutoffs`));else{const u=q(a,{hasFrench:"yes",french_listening:"7",french_reading:"7",french_writing:"7",french_speaking:"7"}).total-s.total;u>0&&n.push(R("Add French Test Results (TEF/TCF)",`Strong French skills (NCLC 7+) earn ${o>=5?"50":"25"} additional CRS points. Plus, French-language category draws have cutoffs around 400 — much lower than general draws (~520).`,u,"Hard","6-12 months","french",`Reach NCLC 7 in all 4 abilities = +${u} CRS`))}if(a.hasPNP!=="yes"&&n.push(R("Provincial Nominee Program","A PNP nomination adds 600 points, virtually guaranteeing an ITA. Explore programs in provinces like Ontario, BC, Alberta and Saskatchewan.",600,"Hard","2-8 months","province","PNP nomination = +600 CRS")),a.canadianEducation!=="yes"&&n.push(R("Study in Canada","A Canadian credential (1-2 year program) adds 15 points, or 30 points for a 3+ year program.",30,"Hard","12-36 months","study","Canadian credential can add +15 to +30 CRS")),a.hasSibling!=="yes"&&n.push(R("Sibling in Canada (If Applicable)","If you have a sibling who is a Canadian citizen or PR, this adds 15 points. Check if any siblings qualify.",15,"Easy","1-2 weeks","family","Eligible sibling relationship = +15 CRS")),ga(a)){const c=["listening","reading","writing","speaking"];let r=99;for(const u of c){const y=parseInt(a[`spouseLang_${u}`])||0;y<r&&(r=y)}if(r<9){const u=Math.min(r+1,9),y={};for(const E of c)y[`spouseLang_${E}`]=String(Math.max(parseInt(a[`spouseLang_${E}`])||0,u));const N=q(a,y).total-s.total;N>0&&n.push(R("Improve Spouse's Language Scores",`Your spouse's language improvement to CLB ${u} could add points.`,N,"Medium","3-5 months","language",`Spouse min CLB ${r} → ${u} = +${N} CRS`))}}return n.sort((c,r)=>r.potentialGain-c.potentialGain),n}function ka(a){const s=a.total;return s>=500?{label:"Very Strong",months:"1-3",description:"You are very likely to receive an ITA in the next few draws."}:s>=470?{label:"Strong",months:"3-6",description:"Your score is competitive. An ITA is likely within a few months."}:s>=440?{label:"Moderate",months:"6-12",description:"Your score is near recent cutoffs. Category-based draws may help."}:s>=400?{label:"Below Average",months:"12-18",description:"You may need to improve your profile or target a category-based draw."}:{label:"Needs Improvement",months:"18+",description:"Significant profile improvements are recommended before applying."}}const Sa=[{id:"on",name:"Ontario",abbr:"ON",streams:["Human Capital Priorities","Skilled Trades","French-Speaking"],demandSectors:["stem","healthcare","trade"],minCLB:7,minEducation:"bachelors",minWorkYears:1,notes:"Largest province. Strong demand for tech, healthcare, and skilled trades. Ontario often sends NOIs to Express Entry candidates with CRS 400+."},{id:"bc",name:"British Columbia",abbr:"BC",streams:["Skills Immigration","Express Entry BC","Tech"],demandSectors:["stem","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:1,notes:"Tech hub (Vancouver). BC PNP Tech targets 29 in-demand occupations including software, data, and engineering roles."},{id:"ab",name:"Alberta",abbr:"AB",streams:["Alberta Advantage Immigration","Express Entry Stream"],demandSectors:["trade","healthcare","stem","transport"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Strong energy/oil sector. Growing tech scene in Calgary and Edmonton. Lower cost of living than ON/BC."},{id:"sk",name:"Saskatchewan",abbr:"SK",streams:["International Skilled Worker","Express Entry"],demandSectors:["agriculture","healthcare","trade","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"In-Demand Occupations list is broad. One of the easiest PNPs to qualify for. Agriculture and mining are key industries."},{id:"mb",name:"Manitoba",abbr:"MB",streams:["Skilled Workers Overseas","Skilled Workers in Manitoba"],demandSectors:["healthcare","agriculture","trade","transport"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Welcoming to newcomers. Strong need for healthcare workers and tradespeople. Lower CRS requirements than federal draws."},{id:"ns",name:"Nova Scotia",abbr:"NS",streams:["Labour Market Priorities","Skilled Worker","Physician"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing tech sector in Halifax. Healthcare workers are highly sought after."},{id:"nb",name:"New Brunswick",abbr:"NB",streams:["Express Entry Labour Market","Skilled Workers with Employer Support"],demandSectors:["healthcare","trade","agriculture"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Bilingual province (English/French). Part of Atlantic Immigration Program. Francophone candidates get priority."},{id:"pe",name:"Prince Edward Island",abbr:"PE",streams:["Express Entry","Labour Impact"],demandSectors:["agriculture","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:2,notes:"Small province with lower competition. Agriculture and tourism are key industries."},{id:"nl",name:"Newfoundland & Labrador",abbr:"NL",streams:["Express Entry","Skilled Worker","Priority Skills"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing need for healthcare and tech workers. Oil and gas sector."},{id:"yt",name:"Yukon",abbr:"YT",streams:["Yukon Express Entry","Skilled Worker"],demandSectors:["trade","healthcare","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"Territory with small population. Job offer typically required. Good for tradespeople and healthcare workers."}],be={less_than_secondary:0,secondary:1,one_year_post:2,two_year_post:3,bachelors:4,two_or_more:5,masters:6,doctoral:7};function wa(a,s){return(be[a]||0)>=(be[s]||0)}function Ca(a){const s=_a(a),n=a.education||"secondary",i=Math.max(parseInt(a.canadianWorkExp)||0,parseInt(a.foreignWorkExp)||0),o=a.occupationCategory||"other",p=a.hasFrench==="yes";return Sa.map(l=>{let d=0;const h=100;s>=l.minCLB&&(d+=20,s>=l.minCLB+2&&(d+=10)),wa(n,l.minEducation)&&(d+=15,(be[n]||0)>=4&&(d+=5)),i>=l.minWorkYears&&(d+=15,i>=3&&(d+=5)),l.demandSectors.includes(o)&&(d+=25),p&&(l.id==="nb"||l.id==="on")&&(d+=5);const g=Math.min(Math.round(d/h*100),100);return{...l,matchScore:g}}).sort((l,d)=>d.matchScore-l.matchScore)}function _a(a){if(a.langTestType==="celpip"){const n=["listening","reading","writing","speaking"].map(i=>parseInt(a[`celpip_${i}`])||0);return Math.min(...n)}if(a.langTestType==="ielts"){const n=["listening","reading","writing","speaking"].map(i=>{const o=parseFloat(a[`ielts_${i}`])||0;return o>=8?10:o>=7?9:o>=6.5?8:o>=6?7:o>=5.5?6:o>=5?5:o>=4?4:0});return Math.min(...n)}return 0}const Ye="crs-saved-profiles-v1";function He(){try{const a=localStorage.getItem(Ye);if(!a)return{};const s=JSON.parse(a);return s&&typeof s=="object"?s:{}}catch{return{}}}function Pa(a){try{localStorage.setItem(Ye,JSON.stringify(a))}catch{}}function Ea(){const a=Math.random().toString(36).slice(2,8);return`prf_${Date.now().toString(36)}_${a}`}function Ma(){return`${Math.random().toString(36).slice(2,10)}${Math.random().toString(36).slice(2,10)}`}function te(){const a=He();return Object.values(a).sort((s,n)=>String(n.updatedAt).localeCompare(String(s.updatedAt)))}function Aa({id:a,name:s="",answers:n={},score:i=0,email:o="",alertOptIn:p=!1,alertToken:l=null}){const d=He(),h=a||Ea(),g=new Date().toISOString(),c=d[h],r={id:h,name:s||c?.name||`Profile ${h.slice(-4)}`,answers:n,score:i,email:o,alertOptIn:!!p,alertToken:p?l||c?.alertToken||Ma():null,createdAt:c?.createdAt||g,updatedAt:g};return d[h]=r,Pa(d),r}const ze="crs-90-day-action-plan-v1";function ve(a,s,n){return Math.max(s,Math.min(n,a))}function $a(a,s){return`Day ${a}-${s}`}function Y(a,s=0){const n=Number(a);return Number.isFinite(n)?n:s}function Ue(a={}){const s=[a.age,a.education,a.pathway,a.canadianWorkExp,a.foreignWorkExp,a.hasFrench,a.hasPNP].join("|");let n=0;for(let i=0;i<s.length;i+=1)n=(n<<5)-n+s.charCodeAt(i),n|=0;return Math.abs(n).toString(16)}function La(a){return{id:`path-${a.id}`,title:a.title,lane:a.category,reason:a.whyItFits,scoreGain:a.potentialGain,months:a.estimatedMonths,confidence:a.likelihoodPercent,effort:a.difficulty}}function Ta({score:a,cutoff:s,eligibleCount:n}){const i=s-a,o=i<=0?82:i<=20?64:38;return{id:"lane-category-draws",title:"Category Draw Positioning",lane:"Category Draws",reason:n>0?`You match ${n} category stream(s). Improve targeted factors to close the category cutoff gap.`:"You are not currently category-eligible; targeted profile adjustments can unlock lower-cutoff streams.",scoreGain:ve(Math.round(Math.max(i,0)*.5),0,80),months:i<=0?1:i<=20?4:8,confidence:o,effort:i<=0?"Easy":i<=20?"Medium":"Hard"}}function Ba(a){return a?{id:`lane-province-${a.id}`,title:`${a.name} PNP Focus`,lane:"Provincial",reason:`${a.name} has the highest profile match in your province analysis.`,scoreGain:a.matchScore>=70?600:300,months:a.matchScore>=70?6:9,confidence:ve(a.matchScore,35,88),effort:a.matchScore>=70?"Medium":"Hard"}:null}function Fa(a={},s=0){return[{key:"coreHumanCapital",label:"Core profile factors",value:Y(a.coreHumanCapital)},{key:"skillTransferability",label:"Transferability factors",value:Y(a.skillTransferability)},{key:"additionalPoints",label:"Additional point factors",value:Y(a.additionalPoints)},{key:"spouseFactors",label:"Spouse factors",value:Y(a.spouseFactors)}].map(i=>({...i,headroom:ve(100-Math.round(i.value/Math.max(s,1)*100),0,100)})).sort((i,o)=>o.headroom-i.headroom).slice(0,2)}function Ia({answers:a,result:s,averageCutoff:n,categoryInfo:i=[],provinces:o=[]}){const p=Y(s?.total),l=Y(n,520),d=l-p,g=(xa(a,s,{averageCutoff:l}).plans||[]).slice(0,2).map(La),c=i.filter(v=>typeof v?.check=="function"&&v.check(a)).length,r=Ta({score:p,cutoff:l,eligibleCount:c}),u=Ba((o||[])[0]||null),P=[...g,r,u].filter(Boolean).map(v=>({...v,score:Math.round(v.scoreGain*.42+(100-v.months*6)*.22+v.confidence*.24+(v.effort==="Easy"?12:v.effort==="Medium"?7:2))})).sort((v,D)=>D.score-v.score).slice(0,4),N=P[0]||null,E=Fa(s?.breakdown,p),S=N?`Primary lane: ${N.title}. Estimated gain ${N.scoreGain} points in ~${N.months} months.`:"No strong lane detected yet. Start by improving language and category eligibility.";return{score:p,cutoff:l,gap:d,ranked:P,top:N,bottlenecks:E,guidanceSummary:S}}function K(a,s,n,i,o,p,l,d="Medium"){return{id:a,title:s,rationale:n,window:$a(i,o),dayFrom:i,dayTo:o,impact:p,lane:l,priority:d}}function Ra({suggestions:a=[],strategy:s,scoreGap:n=0}){const i=a[1],o=s?.top?.title||"Profile Optimization",p=Math.max(Y(n),0),l=[K("plan-baseline","Lock baseline and target score",`Set a concrete target and freeze your baseline profile to avoid random changes. Current gap: ${p} points.`,1,10,0,o,"High"),K("plan-primary-lane",`Execute primary lane: ${o}`,s?.top?.reason||"Follow the highest-impact lane identified by optimizer.",11,35,s?.top?.scoreGain||10,o,"High"),K("plan-secondary-lane",i?`Secondary boost: ${i.title}`:"Secondary boost: language and profile precision",i?.description||"Add one additional improvement path to reduce draw uncertainty.",30,55,i?.potentialGain||8,i?.title||"Secondary path","Medium"),K("plan-document-pack","Prepare immigration document pack","Collect and verify key documents (identity, education, work proofs, test reports, proof-of-funds readiness).",40,70,0,"Readiness","High"),K("plan-profile-audit","Profile audit and draw readiness check","Re-evaluate score vs latest draws and category cutoffs. Trigger fallback lane if gap remains above 15 points.",65,90,0,"Risk Control","High")],d=[{label:"Days 1-30",objective:"Baseline lock + launch primary lane",expectedGain:l[1].impact},{label:"Days 31-60",objective:"Add secondary lane + document readiness",expectedGain:l[2].impact},{label:"Days 61-90",objective:"Audit, stabilize, and draw-position for submission",expectedGain:0}];return{tasks:l,milestones:d}}function Te(a={}){if(typeof window>"u")return{};const s=`${ze}:${Ue(a)}`;try{const n=window.localStorage.getItem(s);return n?JSON.parse(n):{}}catch{return{}}}function Oa(a={},s={}){if(typeof window>"u")return;const n=`${ze}:${Ue(a)}`;try{window.localStorage.setItem(n,JSON.stringify(s||{}))}catch{}}function Da({value:a}){const s=a==="High"?"priority-high":a==="Medium"?"priority-medium":"priority-low";return e.jsx("span",{className:`priority-badge ${s}`,children:a})}function Be({value:a}){const s=a==="Easy"?"effort-easy":a==="Medium"?"effort-medium":"effort-hard";return e.jsx("span",{className:`effort-badge ${s}`,children:a})}function Wa({answers:a,result:s,suggestions:n,averageCutoff:i,activeDraws:o,activeCategoryInfo:p,provinces:l,drawFreshness:d,categoryFreshness:h,saveStatus:g,onJumpToSection:c,onOpenAccount:r}){const u=m.useMemo(()=>Ia({answers:a,result:s,averageCutoff:i,categoryInfo:p,provinces:l}),[p,a,i,l,s]),y=m.useMemo(()=>Ra({suggestions:n,strategy:u,scoreGap:Math.max((i||0)-(s?.total||0),0)}),[i,s?.total,u,n]),[P,N]=m.useState(()=>Te(a));m.useEffect(()=>{N(Te(a))},[a]);const E=m.useMemo(()=>y.tasks.filter(f=>!!P[f.id]).length,[y.tasks,P]),S=y.tasks.length,v=S>0?Math.round(E/S*100):0,D=f=>{const T={...P,[f]:!P[f]};N(T),Oa(a,T),w("action_plan_task_toggled",{task_id:f,completed:!!T[f],completion_pct:v})},ne=[{label:"Core Human Capital",value:s?.breakdown?.coreHumanCapital||0},{label:"Skill Transferability",value:s?.breakdown?.skillTransferability||0},{label:"Additional Points",value:s?.breakdown?.additionalPoints||0},{label:"Spouse Factors",value:s?.breakdown?.spouseFactors||0}].sort((f,T)=>T.value-f.value).slice(0,3);return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"card strategic-action-center",id:"section-action-center",children:[e.jsx("h3",{children:"Action Center"}),e.jsx("p",{className:"cat-intro",children:"Use this control center to execute the highest-impact moves without losing flow."}),e.jsxs("div",{className:"strategic-action-grid",children:[e.jsx("button",{type:"button",className:"action-btn",onClick:()=>c("section-save"),children:"Save profile"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>c("section-optimizer"),children:"Open strategy optimizer"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>c("section-90-day-plan"),children:"Open 90-day plan"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>c("section-pricing"),children:"Compare plans"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>c("section-coach"),children:"Expert strategy coach"}),e.jsx("button",{type:"button",className:"action-btn",onClick:r,children:"Manage account"})]}),e.jsxs("div",{className:"strategic-action-status",children:[e.jsxs("span",{children:["Profile save status: ",e.jsx("strong",{children:g||"Not saved yet"})]}),e.jsxs("span",{children:["90-day completion: ",e.jsxs("strong",{children:[v,"%"]})]})]})]}),e.jsxs("section",{className:"card strategic-optimizer",id:"section-optimizer",children:[e.jsx("h3",{children:"Strategy Optimizer"}),e.jsx("p",{className:"cat-intro",children:u.guidanceSummary}),u.top&&e.jsxs("div",{className:"optimizer-top-callout",children:[e.jsxs("strong",{children:["Top lane: ",u.top.title]}),e.jsx("p",{children:u.top.reason}),e.jsxs("div",{className:"optimizer-meta",children:[e.jsxs("span",{children:["Estimated gain: +",u.top.scoreGain]}),e.jsxs("span",{children:["Expected timeline: ~",u.top.months," months"]}),e.jsxs("span",{children:["Confidence: ",u.top.confidence,"%"]}),e.jsx(Be,{value:u.top.effort})]})]}),e.jsx("div",{className:"optimizer-options",children:u.ranked.map((f,T)=>e.jsxs("article",{className:"optimizer-option",children:[e.jsxs("div",{className:"optimizer-option-head",children:[e.jsxs("strong",{children:[T+1,". ",f.title]}),e.jsx(Be,{value:f.effort})]}),e.jsx("p",{children:f.reason}),e.jsxs("div",{className:"optimizer-meta",children:[e.jsxs("span",{children:["Lane: ",f.lane]}),e.jsxs("span",{children:["+",f.scoreGain," pts"]}),e.jsxs("span",{children:[f.months," mo"]}),e.jsxs("span",{children:[f.confidence,"% confidence"]})]})]},f.id))})]}),e.jsxs("section",{className:"card strategic-plan",id:"section-90-day-plan",children:[e.jsx("h3",{children:"90-Day Action Plan"}),e.jsx("p",{className:"cat-intro",children:"Execution-focused milestones with realistic sequence and measurable progress."}),e.jsx("div",{className:"plan-milestones",children:y.milestones.map(f=>e.jsxs("div",{className:"plan-milestone",children:[e.jsx("strong",{children:f.label}),e.jsx("p",{children:f.objective}),e.jsxs("small",{children:["Expected gain: +",f.expectedGain," pts"]})]},f.label))}),e.jsx("ul",{className:"plan-task-list",children:y.tasks.map(f=>e.jsxs("li",{className:P[f.id]?"done":"",children:[e.jsx("button",{type:"button",className:"plan-task-toggle",onClick:()=>D(f.id),"aria-label":`Toggle ${f.title}`,children:P[f.id]?"✓":"○"}),e.jsxs("div",{children:[e.jsxs("div",{className:"plan-task-head",children:[e.jsx("strong",{children:f.title}),e.jsx(Da,{value:f.priority})]}),e.jsx("p",{children:f.rationale}),e.jsxs("div",{className:"optimizer-meta",children:[e.jsx("span",{children:f.window}),e.jsxs("span",{children:["Lane: ",f.lane]}),e.jsxs("span",{children:["Impact: +",f.impact," pts"]})]})]})]},f.id))})]}),e.jsxs("section",{className:"card strategic-pricing",id:"section-pricing",children:[e.jsx("h3",{children:"Plans & Upgrade Path"}),e.jsx("p",{className:"cat-intro",children:"Choose the depth of support based on your urgency and complexity."}),e.jsxs("div",{className:"pricing-grid",children:[e.jsxs("article",{className:"pricing-tier",children:[e.jsx("h4",{children:"Free"}),e.jsx("strong",{children:"0 CAD"}),e.jsxs("ul",{children:[e.jsx("li",{children:"CRS scoring + basic suggestions"}),e.jsx("li",{children:"Scenario compare"}),e.jsx("li",{children:"Local profile save"})]})]}),e.jsxs("article",{className:"pricing-tier featured",children:[e.jsx("h4",{children:"Pro Tracking"}),e.jsx("strong",{children:"5 CAD / month"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Expert strategy coach"}),e.jsx("li",{children:"Daily action tracking"}),e.jsx("li",{children:"Cloud sync + alerts"})]}),e.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>c("section-coach"),children:"Go to Pro setup"})]}),e.jsxs("article",{className:"pricing-tier",children:[e.jsx("h4",{children:"Advisor Mode"}),e.jsx("strong",{children:"Coming soon"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Multi-profile management"}),e.jsx("li",{children:"Team workflows"}),e.jsx("li",{children:"Priority insights"})]})]})]})]}),e.jsxs("section",{className:"card strategic-explainability",id:"section-explainability",children:[e.jsx("h3",{children:"Explainability & Confidence"}),e.jsx("p",{className:"cat-intro",children:"Why your recommendations are prioritized and what assumptions matter most."}),e.jsxs("div",{className:"explain-grid",children:[e.jsxs("article",{children:[e.jsx("h4",{children:"Top score drivers"}),e.jsx("ul",{children:ne.map(f=>e.jsxs("li",{children:[e.jsx("span",{children:f.label}),e.jsx("strong",{children:f.value})]},f.label))})]}),e.jsxs("article",{children:[e.jsx("h4",{children:"Data confidence"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Draw freshness: ",e.jsx("strong",{children:d?.label||"Unknown"})]}),e.jsxs("li",{children:["Category freshness: ",e.jsx("strong",{children:h?.label||"Unknown"})]}),e.jsxs("li",{children:["Draw source snapshot: ",e.jsx("strong",{children:o?.lastUpdated||"Unavailable"})]})]})]}),e.jsxs("article",{children:[e.jsx("h4",{children:"Assumptions used"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Self-reported profile values are accurate."}),e.jsx("li",{children:"Recent draw patterns remain directionally stable."}),e.jsx("li",{children:"Strategy projections are estimate ranges, not guarantees."})]})]})]}),e.jsxs("p",{className:"save-note",children:["Read governance details in the ",e.jsx("a",{href:"/trust.html",children:"Trust Center"})," and execution playbooks in ",e.jsx("a",{href:"/guides.html",children:"Guides"}),"."]})]})]})}const Ga=m.lazy(()=>ha(()=>import("./feature-path-coach-CtSDU3nA.js").then(a=>a.P),__vite__mapDeps([0,1,2,3,4]))),Fe={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},k={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:18}}};function Ie(a){return a==="supabase"?"Live sync":"Local fallback"}function Re(a){return a==="supabase"?"draw-source-live":"draw-source-fallback"}function qe(a){if(!a)return null;const s=new Date(a);return Number.isNaN(s.getTime())?null:s}function Oe(a){const s=qe(a);if(!s)return{tier:"unknown",label:"Freshness unknown",dateLabel:a||"—"};const i=Math.max(new Date().getTime()-s.getTime(),0),o=Math.floor(i/(1e3*60*60*24)),p=o===0?"Updated today":o===1?"Updated 1 day ago":`Updated ${o} days ago`;return o<=2?{tier:"fresh",label:p,dateLabel:s.toLocaleDateString()}:o<=14?{tier:"recent",label:p,dateLabel:s.toLocaleDateString()}:{tier:"stale",label:p,dateLabel:s.toLocaleDateString()}}function De(a={}){return[{label:"Age",value:a.age||"—"},{label:"Education",value:a.education||"—"},{label:"Language test",value:a.langTestType||"—"},{label:"Canadian work",value:a.canadianWorkExp||"0"},{label:"Program",value:a.pathway||"—"}]}function Ya({value:a,duration:s=1.2,reduceMotion:n=!1}){const[i,o]=m.useState(a);return m.useEffect(()=>{if(n)return;const p=a,l=performance.now(),d=h=>{const g=(h-l)/(s*1e3);if(g>=1){o(p);return}const c=1-Math.pow(1-g,3);o(Math.round(p*c)),requestAnimationFrame(d)};requestAnimationFrame(d)},[a,s,n]),n?e.jsx(e.Fragment,{children:a}):e.jsx(e.Fragment,{children:i})}function Ha({score:a,statusColor:s,reduceMotion:n=!1}){const o=2*Math.PI*54,p=Math.min(a/1200,1);return e.jsxs("div",{className:"score-gauge","aria-label":`CRS Score: ${a} out of 1200`,children:[e.jsxs("svg",{viewBox:"0 0 120 120",width:"180",height:"180",children:[e.jsx("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:"var(--surface-2)",strokeWidth:"8"}),e.jsx(j.circle,{cx:"60",cy:"60",r:54,fill:"none",stroke:s,strokeWidth:"8",strokeLinecap:"round",transform:"rotate(-90 60 60)",strokeDasharray:o,initial:n?!1:{strokeDashoffset:o},animate:{strokeDashoffset:o-p*o},transition:n?{duration:0}:{duration:1.4,ease:[.22,1,.36,1]}})]}),e.jsxs("div",{className:"gauge-text",children:[e.jsx("div",{className:"gauge-number","aria-live":"polite",children:e.jsx(Ya,{value:a,reduceMotion:n})}),e.jsx("div",{className:"gauge-max",children:"/ 1,200"})]})]})}function se({id:a,label:s,open:n,onToggle:i}){return e.jsx("h3",{className:"section-toggle-heading",children:e.jsxs("button",{type:"button",className:"section-toggle",onClick:i,"aria-expanded":n,"aria-controls":a,children:[e.jsx("span",{children:s}),e.jsx("span",{className:"toggle-arrow","aria-hidden":"true",children:"▾"})]})})}function za({icon:a,label:s,value:n,max:i,note:o}){const p=Math.round(n/i*100);return e.jsxs(j.div,{className:"bd-item",variants:k,children:[e.jsx("span",{className:"bd-icon",children:a}),e.jsxs("div",{className:"bd-info",children:[e.jsxs("div",{className:"bd-top",children:[e.jsxs("span",{className:"bd-label",children:[s,o&&e.jsxs("small",{className:"bd-note",children:[" (",o,")"]})]}),e.jsxs("span",{className:"bd-pts",children:[n," ",e.jsxs("small",{children:["/ ",i]})]})]}),e.jsx("div",{className:"bd-bar-bg",children:e.jsx(j.div,{className:"bd-bar-fill",initial:{width:0},animate:{width:`${p}%`},transition:{duration:.8,delay:.3,ease:"easeOut"}})})]})]})}function je({draw:a,userScore:s}){const n=s>=a.score;return e.jsxs("div",{className:`draw-row ${n?"draw-above":"draw-below"}`,children:[e.jsx("span",{className:"draw-date",children:a.date}),e.jsx("span",{className:"draw-program",children:a.program}),e.jsx("span",{className:"draw-score",children:a.score})]})}const Ua=[{value:"secondary",label:"High School"},{value:"one_year_post",label:"1-Year Diploma"},{value:"two_year_post",label:"2-Year Diploma"},{value:"bachelors",label:"Bachelor's"},{value:"two_or_more",label:"2+ Credentials"},{value:"masters",label:"Master's"},{value:"doctoral",label:"PhD"}];function ye(a,s,n){return{id:a,label:s,age:n.age||"",education:n.education||"",canadianWorkExp:n.canadianWorkExp||"0",minClb:""}}function qa(a){return{5:5,6:5.5,7:6,8:6.5,9:7,10:7.5}[a]||0}function Va(a,s){const n={};if(s.age&&s.age!==a.age&&(n.age=s.age),s.education&&s.education!==a.education&&(n.education=s.education),s.canadianWorkExp&&s.canadianWorkExp!==a.canadianWorkExp&&(n.canadianWorkExp=s.canadianWorkExp),s.minClb){const i=parseInt(s.minClb,10),o=["listening","reading","writing","speaking"];if(a.langTestType==="celpip")for(const p of o){const l=`celpip_${p}`;n[l]=String(Math.max(parseInt(a[l],10)||0,i))}else{const p=qa(i);for(const l of o){const d=`ielts_${l}`;n[d]=String(Math.max(parseFloat(a[d])||0,p))}}}return Object.keys(n).length===0?null:q(a,n)}function Ka({answers:a,originalScore:s,t:n}){const[i,o]=m.useState(()=>[ye("a","Scenario A",a),ye("b","Scenario B",a)]),p=()=>{i.length>=3||o(h=>[...h,ye("c","Scenario C",a)])},l=h=>{i.length<=2||o(g=>g.filter(c=>c.id!==h))},d=(h,g)=>{o(c=>c.map(r=>r.id===h?{...r,...g}:r))};return e.jsxs("div",{className:"scenario-panel",children:[e.jsx("div",{className:"scenario-grid",children:i.map(h=>{const g=Va(a,h),c=g?g.total-s:0;return e.jsxs("div",{className:"scenario-card",children:[e.jsxs("div",{className:"scenario-head",children:[e.jsx("strong",{children:h.label}),h.id==="c"&&e.jsx("button",{type:"button",className:"scenario-remove",onClick:()=>l(h.id),children:"Remove"})]}),e.jsxs("div",{className:"wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Age"}),e.jsxs("select",{value:h.age,onChange:r=>d(h.id,{age:r.target.value}),children:[e.jsx("option",{value:"",children:"Current"}),Array.from({length:30},(r,u)=>u+18).map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Education"}),e.jsxs("select",{value:h.education,onChange:r=>d(h.id,{education:r.target.value}),children:[e.jsx("option",{value:"",children:"Current"}),Ua.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Canadian Work (yrs)"}),e.jsx("select",{value:h.canadianWorkExp,onChange:r=>d(h.id,{canadianWorkExp:r.target.value}),children:[0,1,2,3,4,5].map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Min Language CLB"}),e.jsxs("select",{value:h.minClb,onChange:r=>d(h.id,{minClb:r.target.value}),children:[e.jsx("option",{value:"",children:"Current"}),[5,6,7,8,9,10].map(r=>e.jsxs("option",{value:r,children:["CLB ",r,"+"]},r))]})]})]}),g&&e.jsx(j.div,{className:"wi-result",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"wi-scores",children:[e.jsxs("div",{className:"wi-score-block",children:[e.jsx("small",{children:n("results.original")}),e.jsx("strong",{children:s})]}),e.jsx("span",{className:"wi-arrow",children:"→"}),e.jsxs("div",{className:"wi-score-block projected",children:[e.jsx("small",{children:n("results.projected")}),e.jsx("strong",{children:g.total})]}),e.jsxs("span",{className:`wi-delta ${c>0?"pos":c<0?"neg":""}`,children:[c>0?"+":"",c," pts"]})]})})]},h.id)})}),i.length<3&&e.jsx("button",{type:"button",className:"btn-toggle scenario-add-btn",onClick:p,children:"Add Scenario C ▼"})]})}function Ja(){return e.jsx(j.div,{className:"loading-screen",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.95,transition:{duration:.3}},children:e.jsx(Ge,{})})}function Qa(a){const s=m.useRef(null);return m.useEffect(()=>{if(!a)return;const n=s.current;if(!n)return;const i=n.getContext("2d");n.width=window.innerWidth,n.height=window.innerHeight;const o=["#22c55e","#4CC9F0","#7C3AED","#f59e0b","#ec4899","#3A0CA3"],p=Array.from({length:120},()=>({x:Math.random()*n.width,y:Math.random()*n.height-n.height,w:Math.random()*8+4,h:Math.random()*6+2,color:o[Math.floor(Math.random()*o.length)],vx:(Math.random()-.5)*4,vy:Math.random()*3+2,rot:Math.random()*360,rv:(Math.random()-.5)*8}));let l;const d=()=>{i.clearRect(0,0,n.width,n.height);let g=!1;for(const c of p)c.x+=c.vx,c.y+=c.vy,c.rot+=c.rv,c.vy+=.05,c.y<n.height+20&&(g=!0),i.save(),i.translate(c.x,c.y),i.rotate(c.rot*Math.PI/180),i.fillStyle=c.color,i.fillRect(-c.w/2,-c.h/2,c.w,c.h),i.restore();g&&(l=requestAnimationFrame(d))};l=requestAnimationFrame(d);const h=setTimeout(()=>{cancelAnimationFrame(l),i.clearRect(0,0,n.width,n.height)},4e3);return()=>{cancelAnimationFrame(l),clearTimeout(h)}},[a]),s}function nt({answers:a,onRestart:s,drawData:n,drawSource:i="local-fallback",categoryInfo:o,motionIntensity:p="full"}){const{t:l}=ra(),d=va()||p==="off",{user:h,isAuthenticated:g}=ja(),c=m.useMemo(()=>$e(),[]),r=n||ca(),u=m.useMemo(()=>Array.isArray(o)&&o.length>0?o:oa(),[o]),[y,P]=m.useState(!0),[N,E]=m.useState(!1),[S,v]=m.useState(!1),[D,ne]=m.useState(!1),[f,T]=m.useState(!1),[ie,Ve]=m.useState(!1),[Ne,ke]=m.useState(()=>te()),[H,Se]=m.useState("__current__"),[V,we]=m.useState(()=>te()[0]?.id||"__current__"),[re,Ke]=m.useState(()=>c.profileName||""),[Ce,Je]=m.useState(()=>c.contactEmail||""),[A,Qe]=m.useState(()=>!!c.defaultDrawAlerts),[oe,z]=m.useState(""),[_e,Pe]=m.useState(!1),[ce,J]=m.useState([]),[le,U]=m.useState("idle"),de=c.autoSyncProfiles!==!1;m.useEffect(()=>{const t=setTimeout(()=>P(!1),500);return()=>clearTimeout(t)},[]),m.useEffect(()=>{ke(te())},[]);const O=m.useMemo(()=>{if(a.knowsScore==="yes"){const t=parseInt(a.scoreRange,10)||400;return{total:t,breakdown:{coreHumanCapital:t,spouseFactors:0,skillTransferability:0,additionalPoints:0},details:{age:0,education:0,firstLanguage:0,secondLanguage:0,canadianWork:0,foreignWork:0,spouseTotal:0,skillTotal:0,additionalTotal:0}}}return ya(a)},[a]),$=a.knowsScore!=="yes",b=O.total,W=r.averageCutoff,B=b-W,me=la(),he=m.useMemo(()=>Oe(r.lastUpdated),[r.lastUpdated]),Q=m.useMemo(()=>{const t=u.map(x=>x?.updatedAt).filter(Boolean).map(x=>qe(x)).filter(Boolean).sort((x,M)=>M.getTime()-x.getTime())[0];return Oe(t?t.toISOString():r.lastUpdated)},[u,r.lastUpdated]),Ee=m.useMemo(()=>u.some(t=>t?.source==="supabase")?"Live sync":"Local fallback",[u]),L=m.useMemo(()=>[{id:"__current__",name:"Current profile",score:b,answers:a},...Ne.map(t=>({id:t.id,name:t.name||t.id,score:Number(t.score)||0,answers:t.answers||{}}))],[a,Ne,b]),F=m.useMemo(()=>L.find(t=>t.id===H),[H,L]),I=m.useMemo(()=>L.find(t=>t.id===V),[V,L]),ue=!!F&&!!I&&F.id!==I.id,X=ue?I.score-F.score:0,Xe=m.useMemo(()=>De(F?.answers||a),[a,F?.answers]),Ze=m.useMemo(()=>De(I?.answers||a),[a,I?.answers]);m.useEffect(()=>{const t=L.some(M=>M.id===H),x=L.some(M=>M.id===V);if(t||Se("__current__"),!x){const M=L.find(ee=>ee.id!==H)?.id||"__current__";we(M)}},[H,V,L]),m.useEffect(()=>{if(!g||!me||!h?.id){J([]),U("idle");return}let t=!0;return U("loading"),Le(h.id).then(x=>{t&&(x.status==="ok"?(J(x.data||[]),U("ready")):(J([]),U("empty")))}).catch(()=>{t&&U("error")}),()=>{t=!1}},[me,g,h?.id]);const G=B>=20?{cls:"above",marker:"+",title:"Great News!",desc:`Your score is ${B} points above the recent cut-off (${W}). You have a strong chance of receiving an Invitation to Apply.`,color:"#22c55e"}:B>=-10?{cls:"close",marker:"~",title:"Almost There!",desc:`You're just ${Math.abs(B)} points ${B>=0?"above":"below"} the recent cut-off (${W}). A few small improvements could make the difference.`,color:"#f59e0b"}:{cls:"below",marker:"—",title:"Room to Improve",desc:`You're ${Math.abs(B)} points below the recent cut-off (${W}). Don't worry — see the suggestions below to boost your score.`,color:"#ef4444"},Z=m.useMemo(()=>Na(a,O),[a,O]),pe=m.useMemo(()=>ka(O),[O]),C=O.details,ea=m.useMemo(()=>{const t=[{icon:"A",label:"Age",value:C.age,max:110},{icon:"E",label:"Education",value:C.education,max:150},{icon:"L",label:"English Language",value:C.firstLanguage,max:136},{icon:"W",label:"Canadian Work",value:C.canadianWork,max:80}];return C.secondLanguage>0&&t.splice(3,0,{icon:"F",label:"French",value:C.secondLanguage,max:24}),C.foreignWork>0?t.push({icon:"S",label:l("results.foreignWork"),value:C.skillTotal,max:100,note:"via skill transferability"}):t.push({icon:"S",label:"Skill Bonus",value:C.skillTotal,max:100}),C.spouseTotal>0&&t.push({icon:"P",label:"Spouse",value:C.spouseTotal,max:40}),C.additionalTotal>0&&t.push({icon:"+",label:"Bonus Points",value:C.additionalTotal,max:600}),t},[C,l]),aa=Z.slice(0,3),fe=Z.slice(3),ge=ba[a.pathway],xe=m.useMemo(()=>$?Ca(a):[],[a,$]),Me=!d&&!y&&B>=20,ta=Qa(Me),sa=async()=>{const t=Ce.trim()||h?.email||"";if(A&&!t){z("Add an email to enable draw alerts (or sign in).");return}if(t&&!/^\S+@\S+\.\S+$/.test(t)){z("Please enter a valid email address.");return}const x=Aa({name:re.trim(),answers:a,score:b,email:t,alertOptIn:!!A&&!!t});ke(te());const M=$e();da({...M,profileName:re.trim(),contactEmail:t,defaultDrawAlerts:!!A}),Pe(!0),w("profile_save_started",{has_email:!!t,alerts_opt_in:!!A,is_authenticated:!!g,score:b});try{if(de&&(t||A))if((await ma(x,{userId:h?.id||null})).status==="ok"){if(g&&h?.id){const Ae=await Le(h.id);Ae.status==="ok"&&(J(Ae.data||[]),U("ready"))}z(A?"Profile saved, synced, and draw alerts subscribed.":"Profile saved and synced with your account."),w("profile_save_completed",{status:"cloud_synced",alerts_opt_in:!!A,score:b})}else z("Profile saved locally. Configure Supabase env vars to enable cloud sync/alerts."),w("profile_save_completed",{status:"local_only",alerts_opt_in:!!A,score:b});else z(de?"Profile saved locally.":"Profile saved locally. Auto-sync is off in account settings."),w("profile_save_completed",{status:de?"local_only":"local_autosync_off",alerts_opt_in:!!A,score:b})}catch(ee){z(`Profile saved locally, but cloud sync failed: ${ee.message}`),w("profile_save_completed",{status:"cloud_sync_failed",alerts_opt_in:!!A,score:b})}finally{Pe(!1)}},na=()=>{w("results_pdf_print_clicked",{score:b}),window.print()},_=t=>{const x=document.getElementById(t);x&&(x.scrollIntoView({behavior:"smooth",block:"start"}),w("results_section_jump",{section_id:t}))},ia=()=>{window.dispatchEvent(new CustomEvent("crs-open-account-modal")),w("account_modal_open_requested",{source:"results_action_center"})};return m.useEffect(()=>{y||w("results_viewed",{score:b,diff_from_cutoff:B,draw_source:i,category_count:u.length})},[u.length,B,i,y,b]),y?e.jsx(Ja,{}):e.jsxs(j.div,{className:"results",variants:Fe,initial:"hidden",animate:"show",exit:{opacity:0,transition:{duration:.2}},children:[Me&&e.jsx("canvas",{ref:ta,className:"confetti-canvas"}),e.jsx(j.div,{className:"score-hero",variants:k,children:e.jsx(Ha,{score:b,statusColor:G.color,reduceMotion:d})}),e.jsx(j.div,{className:"result-actions",variants:k,children:e.jsx("button",{type:"button",className:"action-btn",onClick:na,"aria-label":"Download PDF",children:l("results.pdf")})}),e.jsx(Wa,{answers:a,result:O,suggestions:Z,averageCutoff:r.averageCutoff,activeDraws:r,activeCategoryInfo:u,provinces:xe,drawFreshness:he,categoryFreshness:Q,saveStatus:oe,onJumpToSection:_,onOpenAccount:ia}),e.jsxs(j.div,{className:"card quick-nav-card",variants:k,children:[e.jsx("h3",{children:"Quick navigation"}),e.jsxs("div",{className:"quick-nav-grid",children:[e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-action-center"),children:"Action center"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-save"),children:"Save profile"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-optimizer"),children:"Optimizer"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-90-day-plan"),children:"90-day plan"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-pricing"),children:"Plans"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-explainability"),children:"Explainability"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-profile-compare"),children:"Profile compare"}),$&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-breakdown"),children:"Score breakdown"}),$&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-improve"),children:"Improve score"}),$&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-coach"),children:"Expert strategy"}),$&&e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-category"),children:"Category draws"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-timeline"),children:"Timeline"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>_("section-draws"),children:"Recent draws"})]})]}),e.jsxs(j.div,{className:`card status-card ${G.cls}-card`,variants:k,children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:`status-marker ${G.cls}`,children:G.marker})," ",e.jsx("strong",{children:G.title})]}),e.jsx("p",{className:"status-desc",children:G.desc}),e.jsxs("div",{className:`draw-source-pill ${Re(i)}`,children:["Draw data source: ",Ie(i)," · Updated ",r.lastUpdated||"—",e.jsx("span",{className:`freshness-pill freshness-${he.tier}`,children:he.label})]}),e.jsxs("div",{className:"cutoff-compare",children:[e.jsx(We,{label:"Your Score",value:b,max:Math.max(b,W,600),color:"var(--primary)"}),e.jsx(We,{label:"Cut-off",value:W,max:Math.max(b,W,600),color:"var(--surface-3)"})]})]}),e.jsxs(j.div,{className:"card save-profile-card",variants:k,id:"section-save",children:[e.jsx("h3",{children:"Save your profile"}),e.jsx("p",{className:"cat-intro",children:"Save this result and optionally subscribe to draw alerts."}),g?e.jsxs("p",{className:"save-note",children:["Signed in as ",h.email,". Saves are synced across your devices."]}):e.jsx("p",{className:"save-note",children:"Tip: sign in to sync profiles and score tracking across devices."}),e.jsxs("div",{className:"save-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Profile name (optional)"}),e.jsx("input",{type:"text",value:re,onChange:t=>Ke(t.target.value),placeholder:"e.g., Feb 2026 Profile"})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Email (optional)"}),e.jsx("input",{type:"email",value:Ce,onChange:t=>Je(t.target.value),placeholder:"you@example.com"})]})]}),e.jsxs("label",{className:"save-alert-row",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:t=>Qe(t.target.checked)}),e.jsx("span",{children:"Notify me by email when my score is at/above the latest cutoff"})]}),!me&&e.jsx("p",{className:"save-note",children:"Cloud alerts need Supabase env vars (`VITE_SUPABASE_URL`, `VITE_SUPABASE_ANON_KEY`)."}),e.jsx("div",{className:"save-actions",children:e.jsx("button",{type:"button",className:"action-btn",onClick:sa,disabled:_e,children:_e?"Saving…":"Save Profile"})}),oe&&e.jsx("p",{className:"save-status",children:oe}),g&&e.jsxs("div",{className:"save-synced-list",children:[e.jsx("h4",{children:"Synced profiles"}),le==="loading"&&e.jsx("p",{className:"save-note",children:"Loading your synced profiles..."}),le==="error"&&e.jsx("p",{className:"save-note",children:"Could not load synced profiles right now."}),le!=="loading"&&ce.length===0&&e.jsx("p",{className:"save-note",children:"No synced profiles yet. Save your current result to start tracking."}),ce.length>0&&e.jsx("ul",{className:"save-synced-items",children:ce.slice(0,5).map(t=>e.jsxs("li",{children:[e.jsx("span",{children:t.name||t.id}),e.jsx("strong",{children:t.score})]},t.id))})]})]}),e.jsxs(j.div,{className:"card profile-compare-card",variants:k,id:"section-profile-compare",children:[e.jsx(se,{id:"profile-compare-panel",label:"Profile Compare Mode",open:ie,onToggle:()=>{const t=!ie;Ve(t),w("profile_compare_toggled",{open:t})}}),e.jsx(ae,{initial:!1,children:ie&&e.jsxs(j.div,{id:"profile-compare-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:d?{duration:0}:{duration:.2},children:[e.jsx("p",{className:"cat-intro",children:"Compare your current answers with any locally saved profile to spot score gaps quickly."}),e.jsxs("div",{className:"profile-compare-controls wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Profile A"}),e.jsx("select",{value:H,onChange:t=>Se(t.target.value),children:L.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.score,")"]},`a-${t.id}`))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Profile B"}),e.jsx("select",{value:V,onChange:t=>we(t.target.value),children:L.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.score,")"]},`b-${t.id}`))})]})]}),!ue&&e.jsx("p",{className:"path-empty-text",children:"Choose two different profiles to compare."}),ue&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"profile-compare-delta",children:[e.jsx("strong",{children:I.name})," vs ",e.jsx("strong",{children:F.name}),":",e.jsxs("span",{className:X>0?"delta-up":X<0?"delta-down":"",children:[" ",X>0?"+":"",X," points"]})]}),e.jsxs("div",{className:"profile-compare-grid",children:[e.jsxs("div",{className:"profile-compare-column",children:[e.jsx("h4",{children:F.name}),e.jsx("strong",{className:"profile-compare-score",children:F.score}),e.jsx("ul",{children:Xe.map(t=>e.jsxs("li",{children:[e.jsx("span",{children:t.label}),e.jsx("strong",{children:t.value})]},`${F.id}-${t.label}`))})]}),e.jsxs("div",{className:"profile-compare-column",children:[e.jsx("h4",{children:I.name}),e.jsx("strong",{className:"profile-compare-score",children:I.score}),e.jsx("ul",{children:Ze.map(t=>e.jsxs("li",{children:[e.jsx("span",{children:t.label}),e.jsx("strong",{children:t.value})]},`${I.id}-${t.label}`))})]})]})]})]})})]}),$&&e.jsxs(j.div,{className:"card",variants:k,id:"section-breakdown",children:[e.jsx("h3",{children:l("results.breakdown")}),e.jsx(j.div,{className:"breakdown-grid",variants:Fe,initial:"hidden",animate:"show",children:ea.map(t=>e.jsx(za,{...t},t.label))}),e.jsxs("div",{className:"bd-total",children:[e.jsx("span",{children:"Total CRS Score"}),e.jsx("span",{className:"bd-total-num",children:b})]})]}),$&&e.jsxs(j.div,{className:"card whatif-card",variants:k,children:[e.jsx(se,{id:"scenario-compare-panel",label:"Scenario Compare (A vs B)",open:D,onToggle:()=>{const t=!D;ne(t),w("scenario_compare_toggled",{open:t})}}),e.jsx(ae,{initial:!1,children:D&&e.jsxs(j.div,{id:"scenario-compare-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:d?{duration:0}:{duration:.2},children:[e.jsx("p",{className:"cat-intro",children:l("results.whatifDesc")}),e.jsx(Ka,{answers:a,originalScore:b,t:l})]})})]}),Z.length>0&&e.jsxs(j.div,{className:"card",variants:k,id:"section-improve",children:[e.jsx("h3",{children:l("results.improve")}),aa.map((t,x)=>e.jsxs(j.div,{className:"action-card",variants:k,children:[e.jsx("div",{className:"action-rank",children:x+1}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[t.title,t.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",t.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:t.description}),t.action&&e.jsx("div",{className:"action-specific",children:t.action}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:t.timeframe}),e.jsx("span",{className:`action-diff diff-${t.difficulty.toLowerCase()}`,children:t.difficulty})]})]})]},x)),fe.length>0&&e.jsxs(e.Fragment,{children:[N&&fe.map((t,x)=>e.jsxs(j.div,{className:"action-card",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"action-rank",children:x+4}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[t.title,t.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",t.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:t.description}),t.action&&e.jsx("div",{className:"action-specific",children:t.action}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:t.timeframe}),e.jsx("span",{className:`action-diff diff-${t.difficulty.toLowerCase()}`,children:t.difficulty})]})]})]},x+3)),e.jsx("button",{type:"button",className:"btn-toggle",onClick:()=>E(!N),children:N?"Show fewer ▲":`Show ${fe.length} more suggestions ▼`})]})]}),$&&e.jsx("div",{id:"section-coach",children:e.jsx(m.Suspense,{fallback:e.jsx("div",{className:"loading-fallback",children:e.jsx(Ge,{})}),children:e.jsx(Ga,{answers:a,result:O,averageCutoff:r.averageCutoff,categoryInfo:u,motionIntensity:p})})}),$&&e.jsxs(j.div,{className:"card",variants:k,id:"section-category",children:[e.jsx("h3",{children:l("results.category")}),e.jsx("p",{className:"cat-intro",children:l("results.catIntro")}),e.jsxs("div",{className:"category-meta-row",children:[e.jsxs("span",{className:`draw-source-pill ${Ee==="Live sync"?"draw-source-live":"draw-source-fallback"}`,children:["Category config: ",Ee]}),e.jsxs("span",{className:`freshness-pill freshness-${Q.tier}`,children:[Q.label," · ",Q.dateLabel]})]}),e.jsx("div",{className:"cat-grid",children:u.map(t=>{const x=t.check(a),M=x&&b>=t.recentCutoff;return e.jsxs(j.div,{className:`cat-card ${x?M?"cat-above":"cat-eligible":"cat-na"}`,variants:k,children:[e.jsxs("div",{className:"cat-header",children:[e.jsx("span",{className:"cat-icon",children:t.icon}),e.jsxs("div",{children:[e.jsx("strong",{className:"cat-name",children:t.name}),x&&e.jsx("span",{className:`cat-badge ${M?"badge-above":"badge-eligible"}`,children:M?"Above Cutoff":"Eligible"}),!x&&e.jsx("span",{className:"cat-badge badge-na",children:"Not Eligible"})]})]}),e.jsx("p",{className:"cat-desc",children:t.description}),e.jsxs("div",{className:"cat-cutoff",children:[e.jsxs("span",{children:["Recent cutoff: ",e.jsx("strong",{children:t.recentCutoff})]}),e.jsxs("span",{className:"cat-range",children:["Range: ",t.cutoffRange]})]}),!x&&e.jsx("p",{className:"cat-req",children:t.eligibility})]},t.id)})})]}),$&&xe.length>0&&e.jsxs(j.div,{className:"card",variants:k,children:[e.jsx(se,{id:"province-recommender-panel",label:"Province Recommender",open:f,onToggle:()=>{const t=!f;T(t),w("province_recommender_toggled",{open:t})}}),e.jsx(ae,{initial:!1,children:f&&e.jsxs(j.div,{id:"province-recommender-panel",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:d?{duration:0}:{duration:.2},children:[e.jsx("p",{className:"cat-intro",children:"Based on your profile, these provinces may be good matches for Provincial Nominee Programs."}),e.jsx("div",{className:"prov-grid",children:xe.slice(0,5).map(t=>e.jsxs("div",{className:"prov-card",children:[e.jsxs("div",{className:"prov-header",children:[e.jsx("span",{className:"prov-abbr",children:t.abbr}),e.jsxs("div",{children:[e.jsx("strong",{className:"prov-name",children:t.name}),e.jsxs("span",{className:`prov-match ${t.matchScore>=70?"match-high":t.matchScore>=40?"match-mid":"match-low"}`,children:[t.matchScore,"% match"]})]})]}),e.jsx("div",{className:"prov-bar-wrap",children:e.jsx(j.div,{className:"prov-bar",initial:{width:0},animate:{width:`${t.matchScore}%`},transition:d?{duration:0}:{duration:.8,ease:"easeOut"},style:{background:t.matchScore>=70?"#22c55e":t.matchScore>=40?"#f59e0b":"var(--surface-3)"}})}),e.jsx("p",{className:"prov-notes",children:t.notes})]},t.id))})]})})]}),e.jsxs(j.div,{className:"card",variants:k,id:"section-timeline",children:[e.jsx("h3",{children:l("results.timeline")}),e.jsxs("div",{className:`timeline-badge tl-${G.cls}`,children:[e.jsx("strong",{children:pe.label})," — est. ",pe.months," months"]}),e.jsx("p",{className:"timeline-desc",children:pe.description})]}),e.jsxs(j.div,{className:"card",variants:k,id:"section-draws",children:[e.jsx(se,{id:"recent-draws-panel",label:l("results.draws"),open:S,onToggle:()=>{const t=!S;v(t),w("recent_draws_toggled",{open:t})}}),e.jsxs("div",{className:`draw-source-pill ${Re(i)}`,children:["Source: ",Ie(i)," · Updated ",r.lastUpdated||"—"]}),e.jsx(ae,{initial:!1,children:S&&e.jsxs(j.div,{id:"recent-draws-panel",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:d?{duration:0}:{duration:.22},className:"draws-content",children:[e.jsx("h4",{className:"draws-subhead",children:"General / CEC Draws"}),r.generalProgram.slice(0,4).map((t,x)=>e.jsx(je,{draw:t,userScore:b},`g${x}`)),e.jsx("h4",{className:"draws-subhead",children:"Category-Based Draws"}),r.categoryBased.slice(0,4).map((t,x)=>e.jsx(je,{draw:t,userScore:b},`c${x}`)),!!r.pnpDraws?.length&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"draws-subhead",children:"Provincial Nominee (PNP)"}),r.pnpDraws.slice(0,3).map((t,x)=>e.jsx(je,{draw:t,userScore:b},`p${x}`))]})]})})]}),ge&&e.jsxs(j.div,{className:"card",variants:k,children:[e.jsxs("h3",{children:[ge.name," Requirements"]}),e.jsx("ul",{className:"pathway-list",children:ge.requirements.map((t,x)=>e.jsx("li",{children:t},x))})]}),e.jsx(j.div,{className:"card disclaimer",variants:k,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Disclaimer:"})," ",l("results.disclaimer")," ",e.jsx("a",{href:"https://www.canada.ca/en/immigration-refugees-citizenship.html",target:"_blank",rel:"noopener noreferrer",children:"canada.ca"})]})}),e.jsx(j.button,{type:"button",className:"btn-restart",onClick:()=>{w("results_restart_clicked",{score:b}),s()},whileHover:d?void 0:{scale:1.03},whileTap:d?void 0:{scale:.96},variants:k,children:l("results.restart")})]})}function We({label:a,value:s,max:n,color:i}){const o=Math.round(s/n*100);return e.jsxs("div",{className:"cutoff-row",children:[e.jsx("span",{className:"cutoff-label",children:a}),e.jsx("div",{className:"cutoff-bar-wrap",children:e.jsx(j.div,{className:"cutoff-bar",style:{background:i},initial:{width:0},animate:{width:`${o}%`},transition:{duration:.8,ease:"easeOut"},children:s})})]})}export{nt as default};
