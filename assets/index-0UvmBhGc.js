const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Wizard-CmBh95oU.js","assets/vendor-react-Ah1pgjPn.js","assets/data-question-bank-B4XMvuLP.js","assets/feature-strategy-hub-fuPwwwZw.js","assets/feature-path-coach-B7GyEZ3-.js","assets/vendor-motion-CtNR3TjB.js","assets/questionDataSource-CwcKSSii.js","assets/Results-DRG4QetC.js","assets/AuthModal-BjXiRZMJ.js","assets/WelcomeScreen-DNGyVQzV.js","assets/motionFeatures-DFpXREjK.js"])))=>i.map(i=>d[i]);
import{_ as H,u as cn,i as He,g as V,r as ln,a as un,A as dn}from"./feature-path-coach-B7GyEZ3-.js";import{r as h,j as i,c as fn}from"./vendor-react-Ah1pgjPn.js";import{u as _t,t as E,r as re,a as pn,b as hn,c as q,L as gn}from"./feature-strategy-hub-fuPwwwZw.js";import{u as yn,m as $n,A as mn,L as vn}from"./vendor-motion-CtNR3TjB.js";import{r as Z,t as se}from"./data-question-bank-B4XMvuLP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const St=h.createContext();function wn({children:e}){const[t,n]=h.useState(()=>{try{return localStorage.getItem("crs-theme")==="dark"}catch{return!1}});h.useEffect(()=>{document.documentElement.setAttribute("data-theme",t?"dark":"light");try{localStorage.setItem("crs-theme",t?"dark":"light")}catch{}},[t]);const r=()=>n(s=>!s);return i.jsx(St.Provider,{value:{dark:t,toggle:r},children:e})}function _n(){return h.useContext(St)}const Ae=new Set;function Sn(e){if(typeof window>"u"){e();return}typeof window.requestIdleCallback=="function"?window.requestIdleCallback(()=>e(),{timeout:1800}):window.setTimeout(e,220)}function bn(e,t){Ae.has(e)||(Ae.add(e),Promise.resolve().then(()=>t()).catch(()=>{Ae.delete(e)}))}function we(e,t,{idle:n=!1}={}){const r=()=>bn(e,t);if(n){Sn(r);return}r()}function tt(e){we("chunk:wizard",()=>H(()=>import("./Wizard-CmBh95oU.js"),__vite__mapDeps([0,1,2,3,4,5,6])),e)}function En(e){we("chunk:results",()=>H(()=>import("./Results-DRG4QetC.js"),__vite__mapDeps([7,4,1,2,5,3])),e)}function kn(e){we("chunk:path-coach",()=>H(()=>import("./feature-path-coach-B7GyEZ3-.js").then(t=>t.P),__vite__mapDeps([4,1,2,5])),e)}function he(e){we("chunk:auth-modal",()=>H(()=>import("./AuthModal-BjXiRZMJ.js"),__vite__mapDeps([8,1,4,2,5,6,3])),e)}const xn=h.lazy(()=>H(()=>import("./AuthModal-BjXiRZMJ.js"),__vite__mapDeps([8,1,4,2,5,6,3]))),An={en:"EN",fr:"FR"};function jn({canInstallApp:e=!1,onInstallApp:t=()=>{},motionIntensity:n="full"}){const r=yn()||n!=="full",{dark:s,toggle:a}=_n(),{lang:o,setLang:c,t:u}=_t(),{user:l,ensureAuthReady:d}=cn(),[g,p]=h.useState(!1);return h.useEffect(()=>{const m=()=>{p(!0),he(),d().catch(()=>{})};return window.addEventListener("crs-open-account-modal",m),()=>{window.removeEventListener("crs-open-account-modal",m)}},[d]),i.jsxs(i.Fragment,{children:[i.jsx($n.header,{className:"header",initial:r?!1:{y:-60,opacity:0},animate:{y:0,opacity:1},transition:r?{duration:0}:{type:"spring",stiffness:120,damping:20},children:i.jsxs("div",{className:"header-inner",children:[i.jsxs("div",{className:"logo",children:[i.jsx("span",{className:"logo-leaf","aria-hidden":"true",children:i.jsx("ion-icon",{name:"diamond-sharp"})}),i.jsxs("div",{className:"logo-copy",children:[i.jsx("span",{children:u("header.title")}),i.jsx("small",{children:u("header.tagline","Clear score. Clear plan.")})]})]}),i.jsxs("div",{className:"header-actions",children:[e&&i.jsx("button",{type:"button",className:"install-btn",onClick:t,"aria-label":"Install app",title:"Add app shortcut",children:"Install app"}),i.jsx("button",{type:"button",className:"auth-toggle",onClick:()=>{he(),p(!0),d().catch(()=>{}),E("account_modal_opened",{source:"header_button",is_authenticated:!!l})},onMouseEnter:()=>{he(),d().catch(()=>{})},onFocus:()=>{he(),d().catch(()=>{})},"aria-label":l?"Manage account":"Login or signup",title:l?l.email:"Login / Signup",children:l?"Account":"Sign in"}),i.jsx("select",{className:"lang-select",value:o,onChange:m=>c(m.target.value),"aria-label":"Select language",children:Object.entries(An).map(([m,y])=>i.jsx("option",{value:m,children:y},m))}),i.jsx("button",{type:"button",className:"theme-toggle",onClick:a,"aria-label":s?"Switch to light mode":"Switch to dark mode",title:s?"Light mode":"Dark mode",children:s?"Light":"Dark"})]})]})}),g&&i.jsx(h.Suspense,{fallback:i.jsx("div",{className:"auth-modal-backdrop",role:"presentation",children:i.jsx("div",{className:"auth-modal auth-modal-loading",role:"dialog","aria-modal":"true",children:i.jsxs("div",{className:"auth-modal-head",children:[i.jsx("h3",{children:"Loading account…"}),i.jsx("button",{type:"button",className:"auth-close",onClick:()=>p(!1),"aria-label":"Close dialog",children:"×"})]})})}),children:i.jsx(xn,{open:g,onClose:()=>p(!1)})})]})}function je(){const e=Array.from({length:9});return i.jsxs("div",{className:"uv-loader",children:[e.map((t,n)=>i.jsx("div",{className:"uv-text",children:i.jsx("span",{children:"Loading"})},n)),i.jsx("div",{className:"uv-line"})]})}function Pn(e,t){const n=e.answers||{};return{id:e.id,user_id:t||null,name:e.name||null,score:Number(e.score)||0,email:e.email||null,alert_opt_in:!!e.alertOptIn,alert_token:e.alertToken||null,profile_json:{answers:n,tracking:{userId:t||null,savedAt:new Date().toISOString()}},updated_at:new Date().toISOString()}}function _e(e){const t=String(e?.message||"");return/column\s+["']?user_id["']?\s+does not exist/i.test(t)}function ce(e,t){const n=t?.message||t?.hint||String(t);return`${e}: ${n}`}function le(){return He}async function Zr(e,t={}){if(!le())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=await V();if(!n)return{status:"skipped",reason:"Supabase client is unavailable"};const r=t.userId||null,s=Pn(e,r);let a,o;if({data:a,error:o}=await n.from("saved_profiles").upsert(s,{onConflict:"id"}).select(),o&&r&&_e(o)){const{user_id:c,...u}=s;({data:a,error:o}=await n.from("saved_profiles").upsert(u,{onConflict:"id"}).select())}if(o)throw new Error(ce("Supabase upsert failed",o));return{status:"ok",data:a||[]}}async function Cn(e){if(!e)return{status:"skipped",reason:"Missing token"};if(!le())return{status:"skipped",reason:"Supabase env vars are not configured"};const t=await V();if(!t)return{status:"skipped",reason:"Supabase client is unavailable"};const{data:n,error:r}=await t.from("saved_profiles").update({alert_opt_in:!1,updated_at:new Date().toISOString()}).eq("alert_token",e).select();if(r)throw new Error(ce("Supabase unsubscribe failed",r));return n?.length?{status:"ok",data:n[0]}:{status:"not-found"}}async function Vr(e){if(!e)return{status:"skipped",reason:"Missing user id"};if(!le())return{status:"skipped",reason:"Supabase env vars are not configured"};const t=await V();if(!t)return{status:"skipped",reason:"Supabase client is unavailable"};const{data:n,error:r}=await t.from("saved_profiles").select("id,name,score,email,updated_at").eq("user_id",e).order("updated_at",{ascending:!1}).limit(12);if(r&&_e(r))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(r)throw new Error(ce("Supabase profile list failed",r));return{status:"ok",data:n||[]}}async function es(e,t){if(!e)return{status:"skipped",reason:"Missing user id"};if(!le())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=await V();if(!n)return{status:"skipped",reason:"Supabase client is unavailable"};const{error:r,data:s}=await n.from("saved_profiles").update({alert_opt_in:!!t,updated_at:new Date().toISOString()}).eq("user_id",e).select("id");if(r&&_e(r))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(r)throw new Error(ce("Supabase alert preference update failed",r));return{status:"ok",updatedCount:s?.length||0}}async function ts(e,t){if(!e)return{status:"skipped",reason:"Missing user id"};if(!le())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=await V();if(!n)return{status:"skipped",reason:"Supabase client is unavailable"};const r=t?String(t).trim().toLowerCase():null,{error:s,data:a}=await n.from("saved_profiles").update({email:r||null,updated_at:new Date().toISOString()}).eq("user_id",e).select("id");if(s&&_e(s))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(s)throw new Error(ce("Supabase profile email update failed",s));return{status:"ok",updatedCount:a?.length||0}}const In=300*1e3,bt=!1,Be="crs-cache-latest-draws-v1",qe="crs-cache-category-config-v1";let M={data:null,source:"none",fetchedAt:0},F={data:null,source:"none",fetchedAt:0},Ie=!1,Le=!1,Te=bt;function Ln(e){return!!e&&typeof e=="object"&&Array.isArray(e.generalProgram)&&Array.isArray(e.categoryBased)&&Array.isArray(e.pnpDraws)&&Number.isFinite(Number(e.averageCutoff))}function Et(e){return Ln(e)?{...e,generalProgram:e.generalProgram||[],categoryBased:e.categoryBased||[],pnpDraws:e.pnpDraws||[],averageCutoff:Number(e.averageCutoff)||Z.averageCutoff,lastUpdated:e.lastUpdated||Z.lastUpdated,pnpRanges:e.pnpRanges||Z.pnpRanges}:null}function Tn(e){if(!e||typeof e!="object")return null;const t=String(e.id||"").trim(),n=String(e.name||"").trim(),r=String(e.icon||"").trim(),s=String(e.description||"").trim(),a=String(e.eligibility||"").trim(),o=String(e.cutoff_range||e.cutoffRange||"").trim(),c=Number(e.recent_cutoff??e.recentCutoff);return!t||!n||!r||!s||!a||!Number.isFinite(c)?null:{id:t,name:n,icon:r,description:s,eligibility:a,recentCutoff:c,cutoffRange:o||"N/A",source:e.source||"supabase",updatedAt:e.updated_at||null}}function Rn(e){if(!e)return!1;const t=String(e.code||"").toUpperCase(),n=`${e.message||""} ${e.details||""} ${e.hint||""}`.toLowerCase();return!!(t==="PGRST205"||n.includes("could not find the table")||n.includes("category_draw_configs")&&n.includes("schema cache")||n.includes("relation")&&n.includes("does not exist"))}function kt(e=[]){const t=new Map(se.map(a=>[a.id,a])),n=new Map;for(const a of e){const o=Tn(a);o&&(n.has(o.id)||n.set(o.id,o))}const r=se.map(a=>{const o=n.get(a.id);return o?{...a,name:o.name,icon:o.icon,description:o.description,eligibility:o.eligibility,recentCutoff:o.recentCutoff,cutoffRange:o.cutoffRange,source:o.source,updatedAt:o.updatedAt}:a}),s=[...n.values()].filter(a=>!t.has(a.id)).map(a=>({...a,check:()=>!1}));return[...r,...s]}function xt(e){try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function At(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{}}function jt(e){try{localStorage.removeItem(e)}catch{}}function Dn(e){return Number.isFinite(e)&&e>0&&Date.now()-e<In}function On(e){return Dn(e)?"fresh":"stale"}function L(e,{revalidating:t=!1}={}){return{status:"ok",source:e.source,data:e.data,fetchedAt:e.fetchedAt,freshness:On(e.fetchedAt),revalidating:t}}function Pt(e=[]){return Array.isArray(e)?e.map(t=>({id:t?.id||"",source:t?.source||"supabase",name:t?.name||"",icon:t?.icon||"",description:t?.description||"",eligibility:t?.eligibility||"",recent_cutoff:Number(t?.recentCutoff??t?.recent_cutoff),cutoff_range:t?.cutoffRange??t?.cutoff_range??"N/A",updated_at:t?.updatedAt??t?.updated_at??null})):[]}function Ct(){if(Ie)return;Ie=!0;const e=xt(Be),t=Et(e?.data),n=Number(e?.fetchedAt||0);!t||!Number.isFinite(n)||n<=0||(M={data:t,source:String(e?.source||"supabase-cache"),fetchedAt:n})}function It(){if(Le)return;Le=!0;const e=xt(qe),t=Pt(e?.data||[]);if(!t.length)return;const n=kt(t);if(!n.length)return;const r=Number(e?.fetchedAt||0);!Number.isFinite(r)||r<=0||(F={data:n,source:String(e?.source||"supabase-cache"),fetchedAt:r})}function Re(e,t){M={data:e,source:t,fetchedAt:Date.now()},At(Be,{data:e,source:t,fetchedAt:M.fetchedAt})}function De(e,t){F={data:e,source:t,fetchedAt:Date.now()},At(qe,{data:Pt(e),source:t,fetchedAt:F.fetchedAt})}function nt(){return Z}function Pe(){return se}function Mn(){return Ct(),M.data?L(M):L({data:Z,source:"local-fallback",fetchedAt:0})}function Fn(){return It(),F.data?L(F):L({data:se,source:"local-fallback",fetchedAt:0})}function ns(){M={data:null,source:"none",fetchedAt:0},Ie=!0,jt(Be)}function rs(){F={data:null,source:"none",fetchedAt:0},Le=!0,Te=bt,jt(qe)}async function rt(){if(He)try{const e=await V();if(!e)throw new Error("Supabase client unavailable");const{data:t,error:n}=await e.from("draw_snapshots").select("payload,last_updated").order("last_updated",{ascending:!1}).limit(1);if(!n){const r=t?.[0],s=Et(r?.payload);if(s)return Re(s,"supabase"),L(M)}}catch{}return M.data||Re(Z,"local-fallback"),L(M)}async function st(){if(He&&Te)try{const e=await V();if(!e)throw new Error("Supabase client unavailable");const{data:t,error:n}=await e.from("category_draw_configs").select("id,source,name,icon,description,eligibility,recent_cutoff,cutoff_range,is_active,updated_at").eq("is_active",!0).order("updated_at",{ascending:!1});if(Rn(n)&&(Te=!1),!n&&Array.isArray(t)&&t.length>0){const r=kt(t);return De(r,"supabase"),L(F)}}catch{}return F.data||De(se,"local-fallback"),L(F)}function Lt(e,t){typeof e=="function"&&e(t)}async function Nn({forceRefresh:e=!1,staleWhileRevalidate:t=!0,onRevalidated:n=null}={}){if(re().forceLocalData)return Re(Z,"local-forced"),L(M);if(Ct(),!e&&M.data){const a=L(M);return a.freshness==="fresh"||!t?a:(rt().then(o=>Lt(n,o)).catch(()=>{}),{...a,revalidating:!0})}return await rt()}async function zn({forceRefresh:e=!1,staleWhileRevalidate:t=!0,onRevalidated:n=null}={}){if(re().forceLocalData)return De(se,"local-forced"),L(F);if(It(),!e&&F.data){const a=L(F);return a.freshness==="fresh"||!t?a:(st().then(o=>Lt(n,o)).catch(()=>{}),{...a,revalidating:!0})}return await st()}const Tt="crs-account-settings-v1",te={profileName:"",contactEmail:"",defaultDrawAlerts:!1,autoSyncProfiles:!0,autoSaveProgress:!0,motionIntensity:"full"};function at(){try{const e=localStorage.getItem(Tt);if(!e)return{...te};const t=JSON.parse(e);return!t||typeof t!="object"?{...te}:{...te,...t}}catch{return{...te}}}function ss(e){const t={...te,...e||{}};["off","subtle","full"].includes(t.motionIntensity)||(t.motionIntensity=te.motionIntensity);try{localStorage.setItem(Tt,JSON.stringify(t))}catch{}try{window.dispatchEvent(new Event("crs-account-settings-updated"))}catch{}return t}const Rt="crs-policy-autopilot-state-v1";function Un(e,t){if(typeof window>"u")return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch{return t}}function Hn(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function Bn(){return Un(Rt,{activePolicyId:"",policySource:"",registryVersion:"",lastRunAt:"",lastChangeAt:"",lastRecalculation:null})}function qn(e){if(!(typeof window>"u"))try{window.dispatchEvent(new CustomEvent("crs-policy-autopilot-synced",{detail:e}))}catch{}}function ot({reason:e="app_startup",force:t=!1}={}){const n=ln(),r=un(),s=Bn(),a=s.activePolicyId!==n.id||s.policySource!==n.source,o=s.registryVersion!==r.version;if(!(!!t||a||o))return{status:"noop",reason:e,activePolicyId:n.id,policySource:n.source,registryVersion:r.version,recalculation:null,changed:!1};const u=pn({reason:`policy_autopilot:${e}`,force:!!t||a||o}),l=new Date().toISOString(),d={activePolicyId:n.id,policySource:n.source,registryVersion:r.version,lastRunAt:l,lastChangeAt:a||o?l:s.lastChangeAt||l,lastRecalculation:u};Hn(Rt,d);const g={status:"updated",reason:e,activePolicyId:n.id,policySource:n.source,registryVersion:r.version,recalculation:u,changed:a||o};return qn(g),g}const Wn=h.lazy(()=>H(()=>import("./WelcomeScreen-DNGyVQzV.js"),__vite__mapDeps([9,1,3,4,2,5]))),Yn=h.lazy(()=>H(()=>import("./Wizard-CmBh95oU.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Gn=h.lazy(()=>H(()=>import("./Results-DRG4QetC.js"),__vite__mapDeps([7,4,1,2,5,3]))),We="crs-progress",Jn={welcome:"/",wizard:"/wizard",results:"/results",unsubscribe:"/unsubscribe",handoff:"/handoff"},Kn={FCP:{good:1800,needsImprovement:3e3},LCP:{good:2500,needsImprovement:4e3},CLS:{good:.1,needsImprovement:.25},INP:{good:200,needsImprovement:500}};function it(e){return Jn[e]||"/"}function Xn(){return typeof PerformanceObserver>"u"?[]:Array.isArray(PerformanceObserver.supportedEntryTypes)?PerformanceObserver.supportedEntryTypes:[]}function Qn(e){return Xn().includes(e)}function Zn(e,t){const n=Kn[e];return!n||!Number.isFinite(t)?"unknown":t<=n.good?"good":t<=n.needsImprovement?"needs_improvement":"poor"}function ct(){try{const e=localStorage.getItem(We);return e?JSON.parse(e):null}catch{return null}}function Vn(e){try{localStorage.setItem(We,JSON.stringify(e))}catch{}}function lt(){try{localStorage.removeItem(We)}catch{}}function er(){try{return new URLSearchParams(window.location.search).get("unsubscribe")}catch{return null}}function tr(){return{}}function nr(){const e=typeof navigator<"u"?navigator:null;if(!e)return!1;const n=!!(e.connection||e.mozConnection||e.webkitConnection)?.saveData,r=Number(e.deviceMemory||0),s=Number(e.hardwareConcurrency||0),a=Number.isFinite(r)&&r>0&&r<=4,o=Number.isFinite(s)&&s>0&&s<=4;return n||a||o}function rr(e){return new Promise(t=>window.setTimeout(t,e))}async function ut(e,{retries:t=2,baseDelayMs:n=250}={}){let r=null;for(let s=0;s<=t;s+=1)try{return await e()}catch(a){if(r=a,s===t)break;await rr(n*2**s)}throw r||new Error("Retry attempts exhausted.")}function sr(){const{t:e}=_t(),[t,n]=h.useState(()=>at()),[r,s]=h.useState(()=>re()),a=t.autoSaveProgress!==!1,o=["off","subtle","full"].includes(t.motionIntensity)?t.motionIntensity:"full",c=h.useMemo(()=>nr(),[]),u=o==="off"?"off":c&&o==="full"?"subtle":o,l=er(),d=h.useMemo(()=>hn(),[]),g=tr(),p=h.useMemo(()=>Mn(),[]),m=h.useMemo(()=>Fn(),[]),[y,_]=h.useState(()=>l?"unsubscribe":d?"handoff":Object.keys(g).length>0?"results":"welcome"),j=h.useRef(y),k=h.useRef(it(y)),T=h.useRef(0),Se=h.useRef(new Set),[R,Y]=h.useState(()=>g),[K,ue]=h.useState(()=>l?"loading":"idle"),[Ze,be]=h.useState(()=>p?.data||nt()),[Ve,Ee]=h.useState(()=>p?.source||"local-fallback"),[Xt,de]=h.useState(()=>Array.isArray(m?.data)&&m.data.length>0?m.data:Pe()),[X,fe]=h.useState(()=>({syncing:!1,lastError:"",lastSyncedAt:"",drawFreshness:p?.freshness||"stale",categoryFreshness:m?.freshness||"stale",drawRevalidating:!1,categoryRevalidating:!1}));h.useEffect(()=>{if(!l)return;let f=!0;return Cn(l).then(v=>{f&&ue(v.status==="ok"?"success":"notfound")}).catch(v=>{f&&(ue("error"),q("unsubscribe_request_failed",v,{source:"unsubscribe_flow",has_token:!!l}))}),()=>{f=!1}},[l]);const pe=h.useCallback(async({forceRefresh:f=!1,reason:v="initial"}={})=>{fe($=>({...$,syncing:!0,lastError:""}));let b=null,P=null,A={freshness:"fresh",revalidating:!1},D={freshness:"fresh",revalidating:!1};const B=$=>{$?.status==="ok"&&$.data&&(be($.data),Ee($.source||"local-fallback")),fe(O=>({...O,drawFreshness:$?.freshness||O.drawFreshness,drawRevalidating:!1,lastSyncedAt:new Date().toISOString()})),E("draw_data_swr_revalidated",{resource:"latest_draws",source:$?.source||"unknown",freshness:$?.freshness||"unknown"})},N=$=>{$?.status==="ok"&&Array.isArray($.data)&&$.data.length>0&&de($.data),fe(O=>({...O,categoryFreshness:$?.freshness||O.categoryFreshness,categoryRevalidating:!1,lastSyncedAt:new Date().toISOString()})),E("draw_data_swr_revalidated",{resource:"category_config",source:$?.source||"unknown",freshness:$?.freshness||"unknown"})};try{const $=await ut(()=>Nn({forceRefresh:f,onRevalidated:B}),{retries:2,baseDelayMs:250});$?.status==="ok"&&$.data&&(be($.data),Ee($.source||"local-fallback")),A={freshness:$?.freshness||"fresh",revalidating:!!$?.revalidating}}catch($){b=$,q("draw_data_sync_error",$,{reason:v,resource:"latest_draws",force_refresh:!!f}),be(nt()),Ee("local-fallback"),A={freshness:"stale",revalidating:!1}}try{const $=await ut(()=>zn({forceRefresh:f,onRevalidated:N}),{retries:2,baseDelayMs:250});$?.status==="ok"&&Array.isArray($.data)&&$.data.length>0?de($.data):de(Pe()),D={freshness:$?.freshness||"fresh",revalidating:!!$?.revalidating}}catch($){P=$,q("draw_data_sync_error",$,{reason:v,resource:"category_config",force_refresh:!!f}),de(Pe()),D={freshness:"stale",revalidating:!1}}const z=!!b||!!P;fe({syncing:!1,lastError:z?"Live sync is currently unavailable. Showing local data mode.":"",lastSyncedAt:new Date().toISOString(),drawFreshness:A.freshness,categoryFreshness:D.freshness,drawRevalidating:A.revalidating,categoryRevalidating:D.revalidating}),z?E("draw_data_sync_degraded",{reason:v,latest_error:String(b?.message||""),category_error:String(P?.message||"")}):E("draw_data_sync_ok",{reason:v,source:"live"})},[]),Qt=h.useCallback(()=>{pe({forceRefresh:!0,reason:"manual_retry"})},[pe]);h.useEffect(()=>{const f=window.setTimeout(()=>{pe()},0);return()=>window.clearTimeout(f)},[pe]),h.useEffect(()=>{try{const f=ot({reason:"app_boot"});E("policy_autopilot_sync",{reason:"app_boot",status:f.status,active_policy_id:f.activePolicyId||"",policy_source:f.policySource||"",changed:!!f.changed,recalculated_profiles:Number(f.recalculation?.updated||0)})}catch(f){q("policy_autopilot_sync_failed",f,{reason:"app_boot"})}},[]),h.useEffect(()=>{const f=()=>{try{const v=ot({reason:"policy_override_updated",force:!0});E("policy_autopilot_sync",{reason:"policy_override_updated",status:v.status,active_policy_id:v.activePolicyId||"",policy_source:v.policySource||"",changed:!!v.changed,recalculated_profiles:Number(v.recalculation?.updated||0)})}catch(v){q("policy_autopilot_sync_failed",v,{reason:"policy_override_updated"})}};return window.addEventListener("crs-policy-ruleset-updated",f),()=>{window.removeEventListener("crs-policy-ruleset-updated",f)}},[]),h.useEffect(()=>{if(y==="welcome"){tt({idle:!0});return}if(y==="wizard"){En({idle:!0});return}y==="results"&&kn({idle:!0})},[y]);const Zt=h.useCallback(f=>{if(f&&a){const v=ct();v&&Y(v)}E("wizard_started",{resumed:!!f}),_("wizard")},[a]),Vt=h.useCallback(f=>{Y(f),lt(),E("wizard_completed",{answer_count:Object.keys(f||{}).length}),_("results"),window.scrollTo({top:0,behavior:"smooth"})},[]),en=h.useCallback(()=>{Y({}),lt(),E("calculator_restarted"),window.history.replaceState(null,"",window.location.pathname),_("welcome"),window.scrollTo({top:0,behavior:"smooth"})},[]),tn=a&&!!ct(),[nn,rn]=h.useState(!1),[oe,ke]=h.useState(null),[sn,an]=h.useState(()=>{const f=window.matchMedia?.("(display-mode: standalone)")?.matches,v=window.navigator?.standalone===!0;return!!(f||v)});h.useEffect(()=>{const f=()=>rn(window.scrollY>400);return window.addEventListener("scroll",f,{passive:!0}),()=>window.removeEventListener("scroll",f)},[]),h.useEffect(()=>{const f=b=>{typeof b?.prompt=="function"&&ke(b)},v=()=>{ke(null),an(!0)};return window.addEventListener("beforeinstallprompt",f),window.addEventListener("appinstalled",v),()=>{window.removeEventListener("beforeinstallprompt",f),window.removeEventListener("appinstalled",v)}},[]);const on=h.useCallback(async()=>{if(!oe)return;E("install_prompt_triggered"),oe.prompt(),(await oe.userChoice)?.outcome==="accepted"?(ke(null),E("install_prompt_accepted")):E("install_prompt_dismissed")},[oe]);return h.useEffect(()=>{const f=()=>{n(at())};return window.addEventListener("storage",f),window.addEventListener("crs-account-settings-updated",f),()=>{window.removeEventListener("storage",f),window.removeEventListener("crs-account-settings-updated",f)}},[]),h.useEffect(()=>{const f=()=>{s(re())};return window.addEventListener("storage",f),window.addEventListener("crs-runtime-flags-updated",f),()=>{window.removeEventListener("storage",f),window.removeEventListener("crs-runtime-flags-updated",f)}},[]),h.useEffect(()=>{T.current===0&&(T.current=typeof performance<"u"?performance.now():Date.now())},[]),h.useEffect(()=>{if(!r.enablePerfTelemetry)return;const f=b=>{const P=b?.error instanceof Error?b.error:new Error(b?.message||"Window error");q("app_window_error",P,{source:"window_error",filename:b?.filename||"",line:Number(b?.lineno||0),column:Number(b?.colno||0)})},v=b=>{const P=b?.reason,A=P instanceof Error?P:new Error(typeof P=="string"?P:"Unhandled promise rejection");q("app_unhandled_rejection",A,{source:"unhandled_rejection",reason_type:typeof P})};return window.addEventListener("error",f),window.addEventListener("unhandledrejection",v),()=>{window.removeEventListener("error",f),window.removeEventListener("unhandledrejection",v)}},[r.enablePerfTelemetry]),h.useEffect(()=>{if(!r.enablePerfTelemetry)return;const f=it(y);E("perf_route_view",{mode:y,route:f,previous_route:k.current,transition_type:k.current===f?"initial":"virtual_navigation"}),k.current=f},[y,r.enablePerfTelemetry]),h.useEffect(()=>{if(r.enablePerfTelemetry)try{const f=window.performance?.getEntriesByType?.("navigation")?.[0];if(!f)return;E("perf_navigation_summary",{type:f.type||"navigate",dom_content_loaded_ms:Math.round(f.domContentLoadedEventEnd||0),load_event_ms:Math.round(f.loadEventEnd||0),transfer_kb:Number(((f.transferSize||0)/1024).toFixed(1))})}catch{}},[r.enablePerfTelemetry]),h.useEffect(()=>{if(!r.enablePerfTelemetry||typeof window>"u"||typeof PerformanceObserver>"u")return;const f=[],v=Se.current;let b=0,P=0,A=0,D=0,B=0,N=0,z=0,$=0;const O=(w,S,C={})=>{if(!Number.isFinite(S)||S<=0||v.has(w))return;v.add(w);const xe=w==="CLS"?Number(S.toFixed(3)):Math.round(S);E("perf_web_vital",{metric:w,value:xe,rating:Zn(w,S),...C})},G=(w,S)=>{if(Qn(w))try{const C=new PerformanceObserver(xe=>{S(xe.getEntries()||[])});C.observe(w==="event"?{type:w,buffered:!0,durationThreshold:16}:{type:w,buffered:!0}),f.push(C)}catch{}};G("paint",w=>{const S=w.find(C=>C.name==="first-contentful-paint");S&&O("FCP",Number(S.startTime||0))}),G("largest-contentful-paint",w=>{const S=w[w.length-1];S&&(b=Number(S.startTime||0),P=Number(S.size||0))}),G("layout-shift",w=>{for(const S of w)S.hadRecentInput||(A+=Number(S.value||0))}),G("event",w=>{for(const S of w){const C=Number(S.duration||0);!Number.isFinite(C)||C<=0||(D=Math.max(D,C),B+=1)}}),G("longtask",w=>{for(const S of w){const C=Number(S.duration||0);!Number.isFinite(C)||C<=0||(N+=1,z+=C,$=Math.max($,C))}});let ie=!1;const Q=()=>{ie||(ie=!0,O("LCP",b,{element_size_px:Math.round(P)}),O("CLS",A),O("INP",D,{sample_count:B}),N>0&&!v.has("LONG_TASK_SUMMARY")&&(v.add("LONG_TASK_SUMMARY"),E("perf_long_task_summary",{task_count:N,max_duration_ms:Math.round($),total_duration_ms:Math.round(z),average_duration_ms:Math.round(z/N)})))},et=()=>{document.visibilityState==="hidden"&&Q()};return document.addEventListener("visibilitychange",et,!0),window.addEventListener("pagehide",Q,!0),()=>{Q(),document.removeEventListener("visibilitychange",et,!0),window.removeEventListener("pagehide",Q,!0),f.forEach(w=>w.disconnect())}},[r.enablePerfTelemetry]),h.useEffect(()=>{const f=typeof performance<"u"?performance.now():Date.now(),v=j.current;if(!r.enablePerfTelemetry){j.current=y,T.current=f;return}v!==y&&(E("perf_mode_transition",{from_mode:v,to_mode:y,duration_ms:Math.max(Math.round(f-T.current),0)}),j.current=y,T.current=f)},[y,r.enablePerfTelemetry]),h.useEffect(()=>{document.documentElement.setAttribute("data-motion",u)},[u]),h.useEffect(()=>{const f=document.documentElement,v=window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,b=window.matchMedia?.("(pointer: fine)")?.matches;if(!(u!=="off"&&!v&&!!b)){f.style.setProperty("--pointer-x","50%"),f.style.setProperty("--pointer-y","40%"),f.style.setProperty("--pointer-glow","0");return}f.style.setProperty("--pointer-glow",u==="subtle"?"0.45":"1");let A=0,D=50,B=40,N=50,z=40;const $=()=>{D+=(N-D)*.12,B+=(z-B)*.12,f.style.setProperty("--pointer-x",`${D.toFixed(2)}%`),f.style.setProperty("--pointer-y",`${B.toFixed(2)}%`),Math.abs(N-D)>.05||Math.abs(z-B)>.05?A=window.requestAnimationFrame($):A=0},O=()=>{A||(A=window.requestAnimationFrame($))},G=Q=>{N=Q.clientX/window.innerWidth*100,z=Q.clientY/window.innerHeight*100,O()},ie=()=>{N=50,z=40,O()};return window.addEventListener("pointermove",G,{passive:!0}),window.addEventListener("pointerleave",ie,{passive:!0}),()=>{window.removeEventListener("pointermove",G),window.removeEventListener("pointerleave",ie),A&&window.cancelAnimationFrame(A)}},[u]),i.jsxs("div",{className:"app",children:[i.jsxs("div",{className:"anime-bg","aria-hidden":"true",children:[i.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--one"}),i.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--two"}),i.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--three"}),i.jsx("span",{className:"anime-bg-grid"}),i.jsx("span",{className:"anime-bg-noise"}),i.jsx("span",{className:"anime-bg-pointer-glow"}),i.jsx("span",{className:"anime-bg-flare"}),i.jsx("span",{className:"anime-bg-vignette"}),i.jsxs("div",{className:"anime-bg-sparks",children:[i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{}),i.jsx("span",{})]})]}),i.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),i.jsx(jn,{canInstallApp:!sn&&!!oe,onInstallApp:on,motionIntensity:u}),i.jsx("main",{className:"main",role:"main",id:"main-content",children:i.jsxs(mn,{mode:"wait",children:[y==="welcome"&&i.jsx(h.Suspense,{fallback:i.jsx("div",{className:"loading-fallback",children:i.jsx(je,{})}),children:i.jsx(Wn,{onStart:Zt,onPrepareStart:()=>tt(),hasSaved:tn,drawData:Ze,drawSource:Ve,motionIntensity:u},"welcome")}),y==="wizard"&&i.jsx(h.Suspense,{fallback:i.jsx("div",{className:"loading-fallback",children:i.jsx(je,{})}),children:i.jsx(Yn,{onFinish:Vt,onProgress:a?Vn:void 0,initialAnswers:R,motionIntensity:u},"wizard")}),y==="unsubscribe"&&i.jsxs("div",{className:"card unsubscribe-card",children:[i.jsx("h3",{children:"Draw alert preferences"}),K==="loading"&&i.jsx("p",{children:"Processing your unsubscribe request…"}),K==="success"&&i.jsx("p",{children:"You’ve been unsubscribed from draw alerts successfully."}),K==="notfound"&&i.jsx("p",{children:"This unsubscribe link is invalid or already inactive."}),K==="error"&&i.jsx("p",{children:"We couldn’t process this request right now. Please try again later."}),i.jsx("button",{type:"button",className:"btn-restart",onClick:()=>_("welcome"),children:"Back to calculator"})]}),y==="handoff"&&i.jsxs("div",{className:"card unsubscribe-card",children:[i.jsx("h3",{children:"Consultant handoff summary"}),d?i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Score: ",i.jsx("strong",{children:d?.summary?.score??"—"})," · ","Avg cutoff: ",i.jsx("strong",{children:d?.summary?.averageCutoff??"—"})," · ","Confidence: ",i.jsx("strong",{children:d?.summary?.confidenceBand||"Unknown"})]}),i.jsxs("p",{children:["Generated: ",d?.generatedAt?new Date(d.generatedAt).toLocaleString():"—"]})]}):i.jsx("p",{children:"This handoff link is invalid or expired."}),i.jsx("button",{type:"button",className:"btn-restart",onClick:()=>{window.history.replaceState(null,"",window.location.pathname),_("welcome")},children:"Open calculator"})]}),y==="results"&&i.jsx(h.Suspense,{fallback:i.jsx("div",{className:"loading-fallback",children:i.jsx(je,{})}),children:i.jsx(Gn,{answers:R,onRestart:en,drawData:Ze,drawSource:Ve,categoryInfo:Xt,motionIntensity:u,onRetryDataSync:Qt,isDataSyncing:X.syncing,dataSyncError:X.lastError,dataSyncFreshness:X.drawFreshness==="stale"||X.categoryFreshness==="stale"?"stale":"fresh",isDataRevalidating:X.drawRevalidating||X.categoryRevalidating,dataLastSyncedAt:X.lastSyncedAt},"results")})]})}),i.jsxs("footer",{className:"footer",children:[i.jsxs("p",{children:["© ",new Date().getFullYear()," ",e("footer.copy")]}),i.jsxs("p",{className:"footer-legal-links",children:[i.jsx("a",{href:"/guides.html",children:"Guides"}),i.jsx("span",{"aria-hidden":"true",children:" · "}),i.jsx("a",{href:"/terms.html",children:"Terms of Service"}),i.jsx("span",{"aria-hidden":"true",children:" · "}),i.jsx("a",{href:"/privacy.html",children:"Privacy Policy"}),i.jsx("span",{"aria-hidden":"true",children:" · "}),i.jsx("a",{href:"/trust.html",children:"Trust Center"})]})]}),nn&&i.jsx("button",{type:"button",className:"btn-top",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),"aria-label":"Back to top",children:"↑"})]})}class ar extends h.Component{constructor(t){super(t),this.state={hasError:!1,errorMessage:""}}static getDerivedStateFromError(t){return{hasError:!0,errorMessage:t?.message||"Unexpected application error."}}componentDidCatch(t,n){q("app_error_boundary_triggered",t,{component_stack:String(n?.componentStack||"").slice(0,600),route:typeof window<"u"?window.location.pathname:"server"})}handleTryAgain=()=>{this.setState({hasError:!1,errorMessage:""})};render(){return this.state.hasError?i.jsx("main",{className:"error-boundary-screen",role:"alert","aria-live":"assertive",children:i.jsxs("section",{className:"error-boundary-card",children:[i.jsx("h1",{children:"Something went wrong"}),i.jsx("p",{children:"We hit an unexpected issue while rendering this page."}),i.jsx("p",{className:"error-boundary-message",children:this.state.errorMessage}),i.jsxs("div",{className:"error-boundary-actions",children:[i.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:this.handleTryAgain,children:"Try again"}),i.jsx("button",{type:"button",className:"action-btn",onClick:()=>window.location.reload(),children:"Reload app"})]})]})}):this.props.children}}const or="ionicons",Ye={hydratedSelectorName:"hydrated",lazyLoad:!0,updatable:!0};var ir=Object.defineProperty,cr=(e,t)=>{for(var n in t)ir(e,n,{get:t[n],enumerable:!0})},U=e=>{if(e.__stencil__getHostRef)return e.__stencil__getHostRef()},lr=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};n.$onReadyPromise$=new Promise(s=>n.$onReadyResolve$=s),e["s-p"]=[],e["s-rc"]=[];const r=n;return e.__stencil__getHostRef=()=>r,r},dt=(e,t)=>t in e,ae=(e,t)=>(0,console.error)(e,t),ft=new Map,ur=(e,t,n)=>{const r=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$;if(!s)return;const a=ft.get(s);if(a)return a[r];return H(()=>import(`./${s}.entry.js`),[]).then(o=>(ft.set(s,o),o[r]),o=>{ae(o,t.$hostElement$)})},me=new Map,dr="{visibility:hidden}.hydrated{visibility:inherit}",Dt="slot-fb{display:contents}slot-fb[hidden]{display:none}",pt="http://www.w3.org/1999/xlink",I=typeof window<"u"?window:{},x={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},fr=e=>Promise.resolve(e),Ot=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Oe=!1,ht=[],Mt=[],pr=(e,t)=>n=>{e.push(n),Oe||(Oe=!0,x.$flags$&4?Ge(Me):x.raf(Me))},gt=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){ae(n)}e.length=0},Me=()=>{gt(ht),gt(Mt),(Oe=ht.length>0)&&x.raf(Me)},Ge=e=>fr().then(e),hr=pr(Mt),Je=e=>(e=typeof e,e==="object"||e==="function");function Ft(e){var t,n,r;return(r=(n=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}var gr=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),yr={};cr(yr,{err:()=>Nt,map:()=>$r,ok:()=>Fe,unwrap:()=>mr,unwrapErr:()=>vr});var Fe=e=>({isOk:!0,isErr:!1,value:e}),Nt=e=>({isOk:!1,isErr:!0,value:e});function $r(e,t){if(e.isOk){const n=t(e.value);return n instanceof Promise?n.then(r=>Fe(r)):Fe(n)}if(e.isErr){const n=e.value;return Nt(n)}throw"should never get here"}var mr=e=>{if(e.isOk)return e.value;throw e.value},vr=e=>{if(e.isErr)return e.value;throw e.value};var ge;function wr(e){var t;const n=this.attachShadow({mode:"open"});ge===void 0&&(ge=(t=void 0)!=null?t:null),ge&&n.adoptedStyleSheets.push(ge)}var W=(e,t="")=>()=>{},_r=(e,t)=>()=>{},ne=new WeakMap,Sr=(e,t,n)=>{let r=me.get(e);Ot&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,me.set(e,r)},br=(e,t,n)=>{var r;const s=zt(t),a=me.get(s);if(!I.document)return s;if(e=e.nodeType===11?e:I.document,a)if(typeof a=="string"){e=e.head||e;let o=ne.get(e),c;if(o||ne.set(e,o=new Set),!o.has(s)){{c=I.document.createElement("style"),c.innerHTML=a;const u=(r=x.$nonce$)!=null?r:Ft(I.document);if(u!=null&&c.setAttribute("nonce",u),!(t.$flags$&1))if(e.nodeName==="HEAD"){const l=e.querySelectorAll("link[rel=preconnect]"),d=l.length>0?l[l.length-1].nextSibling:e.querySelector("style");e.insertBefore(c,d?.parentNode===e?d:null)}else if("host"in e)if(Ot){const l=new CSSStyleSheet;l.replaceSync(a),e.adoptedStyleSheets.unshift(l)}else{const l=e.querySelector("style");l?l.innerHTML=a+l.innerHTML:e.prepend(c)}else e.append(c);t.$flags$&1&&e.insertBefore(c,null)}t.$flags$&4&&(c.innerHTML+=Dt),o&&o.add(s)}}else e.adoptedStyleSheets.includes(a)||e.adoptedStyleSheets.push(a);return s},Er=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,s=W("attachStyles",t.$tagName$),a=br(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);r&10&&(n["s-sc"]=a,n.classList.add(a+"-h")),s()},zt=(e,t)=>"sc-"+e.$tagName$,kr=(e,t,...n)=>{let r=null,s=null,a=!1,o=!1;const c=[],u=d=>{for(let g=0;g<d.length;g++)r=d[g],Array.isArray(r)?u(r):r!=null&&typeof r!="boolean"&&((a=!Je(r))&&(r=String(r)),a&&o?c[c.length-1].$text$+=r:c.push(a?Ne(null,r):r),o=a)};u(n);const l=Ne(e,null);return l.$attrs$=t,c.length>0&&(l.$children$=c),l.$key$=s,l},Ne=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n},xr={},Ar=e=>e&&e.$tag$===xr,Ke=e=>{const t=gr(e);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${t}))(${t}\\b)`,"g")};Ke("::slotted");Ke(":host");Ke(":host-context");var ze=(e,t,n)=>e!=null&&!Je(e)?t&4?e==="false"?!1:e===""||!!e:t&1?String(e):e:e,jr=(e,t,n)=>{const r=x.ce(t,n);return e.dispatchEvent(r),r},yt=(e,t,n,r,s,a,o)=>{if(n===r)return;let c=dt(e,t),u=t.toLowerCase();if(t==="class"){const l=e.classList,d=$t(n);let g=$t(r);l.remove(...d.filter(p=>p&&!g.includes(p))),l.add(...g.filter(p=>p&&!d.includes(p)))}else if(t==="style"){for(const l in n)(!r||r[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in r)(!n||r[l]!==n[l])&&(l.includes("-")?e.style.setProperty(l,r[l]):e.style[l]=r[l])}else if(t!=="key")if(t==="ref")r&&r(e);else if(!c&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):dt(I,u)?t=u.slice(2):t=u[2]+t.slice(3),n||r){const l=t.endsWith(Ut);t=t.replace(Cr,""),n&&x.rel(e,t,n,l),r&&x.ael(e,t,r,l)}}else{const l=Je(r);if(c||l&&r!==null)try{if(e.tagName.includes("-"))e[t]!==r&&(e[t]=r);else{const g=r??"";t==="list"?c=!1:(n==null||e[t]!=g)&&(typeof e.__lookupSetter__(t)=="function"?e[t]=g:e.setAttribute(t,g))}}catch{}let d=!1;u!==(u=u.replace(/^xlink\:?/,""))&&(t=u,d=!0),r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&(d?e.removeAttributeNS(pt,t):e.removeAttribute(t)):(!c||a&4||s)&&!l&&e.nodeType===1&&(r=r===!0?"":r,d?e.setAttributeNS(pt,t,r):e.setAttribute(t,r))}},Pr=/\s/,$t=e=>(typeof e=="object"&&e&&"baseVal"in e&&(e=e.baseVal),!e||typeof e!="string"?[]:e.split(Pr)),Ut="Capture",Cr=new RegExp(Ut+"$"),Ht=(e,t,n,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||{},o=t.$attrs$||{};for(const c of mt(Object.keys(a)))c in o||yt(s,c,a[c],void 0,n,t.$flags$);for(const c of mt(Object.keys(o)))yt(s,c,a[c],o[c],n,t.$flags$)};function mt(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var Xe,Bt=!1,ve=(e,t,n)=>{const r=t.$children$[n];let s=0,a,o;if(r.$text$!==null)a=r.$elm$=I.document.createTextNode(r.$text$);else{if(!I.document)throw new Error("You are trying to render a Stencil component in an environment that doesn't support the DOM. Make sure to populate the [`window`](https://developer.mozilla.org/en-US/docs/Web/API/Window/window) object before rendering a component.");if(a=r.$elm$=I.document.createElement(r.$tag$),Ht(null,r,Bt),r.$children$)for(s=0;s<r.$children$.length;++s)o=ve(e,r,s),o&&a.appendChild(o)}return a["s-hn"]=Xe,a},qt=(e,t,n,r,s,a)=>{let o=e,c;for(o.shadowRoot&&o.tagName===Xe&&(o=o.shadowRoot);s<=a;++s)r[s]&&(c=ve(null,n,s),c&&(r[s].$elm$=c,$e(o,c,t)))},Wt=(e,t,n)=>{for(let r=t;r<=n;++r){const s=e[r];if(s){const a=s.$elm$;Yt(s),a&&a.remove()}}},Ir=(e,t,n,r,s=!1)=>{let a=0,o=0,c=0,u=0,l=t.length-1,d=t[0],g=t[l],p=r.length-1,m=r[0],y=r[p],_,j;for(;a<=l&&o<=p;)if(d==null)d=t[++a];else if(g==null)g=t[--l];else if(m==null)m=r[++o];else if(y==null)y=r[--p];else if(ye(d,m,s))ee(d,m,s),d=t[++a],m=r[++o];else if(ye(g,y,s))ee(g,y,s),g=t[--l],y=r[--p];else if(ye(d,y,s))ee(d,y,s),$e(e,d.$elm$,g.$elm$.nextSibling),d=t[++a],y=r[--p];else if(ye(g,m,s))ee(g,m,s),$e(e,g.$elm$,d.$elm$),g=t[--l],m=r[++o];else{for(c=-1,u=a;u<=l;++u)if(t[u]&&t[u].$key$!==null&&t[u].$key$===m.$key$){c=u;break}c>=0?(j=t[c],j.$tag$!==m.$tag$?_=ve(t&&t[o],n,c):(ee(j,m,s),t[c]=void 0,_=j.$elm$),m=r[++o]):(_=ve(t&&t[o],n,o),m=r[++o]),_&&$e(d.$elm$.parentNode,_,d.$elm$)}a>l?qt(e,r[p+1]==null?null:r[p+1].$elm$,n,r,o,p):o>p&&Wt(t,a,l)},ye=(e,t,n=!1)=>e.$tag$===t.$tag$?n?(n&&!e.$key$&&t.$key$&&(e.$key$=t.$key$),!0):e.$key$===t.$key$:!1,ee=(e,t,n=!1)=>{const r=t.$elm$=e.$elm$,s=e.$children$,a=t.$children$,o=t.$text$;o===null?(Ht(e,t,Bt),s!==null&&a!==null?Ir(r,s,t,a,n):a!==null?(e.$text$!==null&&(r.textContent=""),qt(r,null,t,a,0,a.length-1)):!n&&Ye.updatable&&s!==null&&Wt(s,0,s.length-1)):e.$text$!==o&&(r.data=o)},Yt=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Yt)},$e=(e,t,n)=>e?.insertBefore(t,n),Lr=(e,t,n=!1)=>{const r=e.$hostElement$,s=e.$cmpMeta$,a=e.$vnode$||Ne(null,null),c=Ar(t)?t:kr(null,null,t);if(Xe=r.tagName,s.$attrsToReflect$&&(c.$attrs$=c.$attrs$||{},s.$attrsToReflect$.map(([u,l])=>c.$attrs$[l]=r[u])),n&&c.$attrs$)for(const u of Object.keys(c.$attrs$))r.hasAttribute(u)&&!["key","ref","style","class"].includes(u)&&(c.$attrs$[u]=r[u]);c.$tag$=null,c.$flags$|=4,e.$vnode$=c,c.$elm$=a.$elm$=r.shadowRoot||r,ee(a,c,n)},Gt=(e,t)=>{if(t&&!e.$onRenderResolve$&&t["s-p"]){const n=t["s-p"].push(new Promise(r=>e.$onRenderResolve$=()=>{t["s-p"].splice(n-1,1),r()}))}},Qe=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return Gt(e,e.$ancestorComponent$),hr(()=>Tr(e,t))},Tr=(e,t)=>{const n=e.$hostElement$,r=W("scheduleUpdate",e.$cmpMeta$.$tagName$),s=e.$lazyInstance$;if(!s)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let a;return t?a=J(s,"componentWillLoad",void 0,n):a=J(s,"componentWillUpdate",void 0,n),a=vt(a,()=>J(s,"componentWillRender",void 0,n)),r(),vt(a,()=>Dr(e,s,t))},vt=(e,t)=>Rr(e)?e.then(t).catch(n=>{console.error(n),t()}):t(),Rr=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",Dr=async(e,t,n)=>{var r;const s=e.$hostElement$,a=W("update",e.$cmpMeta$.$tagName$),o=s["s-rc"];n&&Er(e);const c=W("render",e.$cmpMeta$.$tagName$);Or(e,t,s,n),o&&(o.map(u=>u()),s["s-rc"]=void 0),c(),a();{const u=(r=s["s-p"])!=null?r:[],l=()=>Mr(e);u.length===0?l():(Promise.all(u).then(l),e.$flags$|=4,u.length=0)}},Or=(e,t,n,r)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,Lr(e,t,r)}catch(s){ae(s,e.$hostElement$)}return null},Mr=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=W("postUpdate",t),s=e.$lazyInstance$,a=e.$ancestorComponent$;J(s,"componentDidRender",void 0,n),e.$flags$&64?(J(s,"componentDidUpdate",void 0,n),r()):(e.$flags$|=64,Fr(n),J(s,"componentDidLoad",void 0,n),r(),e.$onReadyResolve$(n),a||Jt()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&Ge(()=>Qe(e,!1)),e.$flags$&=-517},Jt=e=>{Ge(()=>jr(I,"appload",{detail:{namespace:or}}))},J=(e,t,n,r)=>{if(e&&e[t])try{return e[t](n)}catch(s){ae(s,r)}},Fr=e=>{var t;return e.classList.add((t=Ye.hydratedSelectorName)!=null?t:"hydrated")},Nr=(e,t)=>U(e).$instanceValues$.get(t),Ce=(e,t,n,r)=>{const s=U(e);if(!s)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/stenciljs/core/issues/5457).`);const a=s.$hostElement$,o=s.$instanceValues$.get(t),c=s.$flags$,u=s.$lazyInstance$;n=ze(n,r.$members$[t][0]);const l=Number.isNaN(o)&&Number.isNaN(n),d=n!==o&&!l;if((!(c&8)||o===void 0)&&d&&(s.$instanceValues$.set(t,n),u)){if(r.$watchers$&&c&128){const g=r.$watchers$[t];g&&g.map(p=>{try{u[p](n,o,t)}catch(m){ae(m,a)}})}if((c&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(n,o,t)===!1)return;Qe(s,!1)}}},Kt=(e,t,n)=>{var r,s;const a=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((r=t.$members$)!=null?r:{});if(o.map(([c,[u]])=>{if(u&31||n&2&&u&32){const{get:l,set:d}=Object.getOwnPropertyDescriptor(a,c)||{};l&&(t.$members$[c][0]|=2048),d&&(t.$members$[c][0]|=4096),(n&1||!l)&&Object.defineProperty(a,c,{get(){{if((t.$members$[c][0]&2048)===0)return Nr(this,c);const g=U(this),p=g?g.$lazyInstance$:a;return p?p[c]:void 0}},configurable:!0,enumerable:!0}),Object.defineProperty(a,c,{set(g){const p=U(this);if(d){const m=u&32?this[c]:p.$hostElement$[c];typeof m>"u"&&p.$instanceValues$.get(c)?g=p.$instanceValues$.get(c):!p.$instanceValues$.get(c)&&m&&p.$instanceValues$.set(c,m),d.apply(this,[ze(g,u)]),g=u&32?this[c]:p.$hostElement$[c],Ce(this,c,g,t);return}{if((n&1)===0||(t.$members$[c][0]&4096)===0){Ce(this,c,g,t),n&1&&!p.$lazyInstance$&&p.$onReadyPromise$.then(()=>{t.$members$[c][0]&4096&&p.$lazyInstance$[c]!==p.$instanceValues$.get(c)&&(p.$lazyInstance$[c]=g)});return}const m=()=>{const y=p.$lazyInstance$[c];!p.$instanceValues$.get(c)&&y&&p.$instanceValues$.set(c,y),p.$lazyInstance$[c]=ze(g,u),Ce(this,c,p.$lazyInstance$[c],t)};p.$lazyInstance$?m():p.$onReadyPromise$.then(()=>m())}}})}}),n&1){const c=new Map;a.attributeChangedCallback=function(u,l,d){x.jmp(()=>{var g;const p=c.get(u);if(this.hasOwnProperty(p)&&Ye.lazyLoad)d=this[p],delete this[p];else{if(a.hasOwnProperty(p)&&typeof this[p]=="number"&&this[p]==d)return;if(p==null){const y=U(this),_=y?.$flags$;if(_&&!(_&8)&&_&128&&d!==l){const j=y.$lazyInstance$,k=(g=t.$watchers$)==null?void 0:g[u];k?.forEach(T=>{j[T]!=null&&j[T].call(j,d,l,u)})}return}}const m=Object.getOwnPropertyDescriptor(a,p);d=d===null&&typeof this[p]=="boolean"?!1:d,d!==this[p]&&(!m.get||m.set)&&(this[p]=d)})},e.observedAttributes=Array.from(new Set([...Object.keys((s=t.$watchers$)!=null?s:{}),...o.filter(([u,l])=>l[0]&15).map(([u,l])=>{var d;const g=l[1]||u;return c.set(g,u),l[0]&512&&((d=t.$attrsToReflect$)==null||d.push([u,g])),g})]))}}return e},zr=async(e,t,n,r)=>{let s;if((t.$flags$&32)===0){if(t.$flags$|=32,n.$lazyBundleId$){const u=ur(n,t);if(u&&"then"in u){const d=_r();s=await u,d()}else s=u;if(!s)throw new Error(`Constructor for "${n.$tagName$}#${t.$modeName$}" was not found`);s.isProxied||(n.$watchers$=s.watchers,Kt(s,n,2),s.isProxied=!0);const l=W("createInstance",n.$tagName$);t.$flags$|=8;try{new s(t)}catch(d){ae(d,e)}t.$flags$&=-9,t.$flags$|=128,l(),Ue(t.$lazyInstance$,e)}else{s=e.constructor;const u=e.localName;customElements.whenDefined(u).then(()=>t.$flags$|=128)}if(s&&s.style){let u;typeof s.style=="string"&&(u=s.style);const l=zt(n);if(!me.has(l)){const d=W("registerStyles",n.$tagName$);Sr(l,u,!!(n.$flags$&1)),d()}}}const a=t.$ancestorComponent$,o=()=>Qe(t,!0);a&&a["s-rc"]?a["s-rc"].push(o):o()},Ue=(e,t)=>{J(e,"connectedCallback",void 0,t)},Ur=e=>{if((x.$flags$&1)===0){const t=U(e),n=t.$cmpMeta$,r=W("connectedCallback",n.$tagName$);if(t.$flags$&1)t?.$lazyInstance$?Ue(t.$lazyInstance$,e):t?.$onReadyPromise$&&t.$onReadyPromise$.then(()=>Ue(t.$lazyInstance$,e));else{t.$flags$|=1;{let s=e;for(;s=s.parentNode||s.host;)if(s["s-p"]){Gt(t,t.$ancestorComponent$=s);break}}n.$members$&&Object.entries(n.$members$).map(([s,[a]])=>{if(a&31&&e.hasOwnProperty(s)){const o=e[s];delete e[s],e[s]=o}}),zr(e,t,n)}r()}},wt=(e,t)=>{J(e,"disconnectedCallback",void 0,t||e)},Hr=async e=>{if((x.$flags$&1)===0){const t=U(e);t?.$lazyInstance$?wt(t.$lazyInstance$,e):t?.$onReadyPromise$&&t.$onReadyPromise$.then(()=>wt(t.$lazyInstance$,e))}ne.has(e)&&ne.delete(e),e.shadowRoot&&ne.has(e.shadowRoot)&&ne.delete(e.shadowRoot)},Br=(e,t={})=>{var n;if(!I.document){console.warn("Stencil: No document found. Skipping bootstrapping lazy components.");return}const r=W(),s=[],a=t.exclude||[],o=I.customElements,c=I.document.head,u=c.querySelector("meta[charset]"),l=I.document.createElement("style"),d=[];let g,p=!0;Object.assign(x,t),x.$resourcesUrl$=new URL(t.resourcesUrl||"./",I.document.baseURI).href;let m=!1;if(e.map(y=>{y[1].map(_=>{var j;const k={$flags$:_[0],$tagName$:_[1],$members$:_[2],$listeners$:_[3]};k.$flags$&4&&(m=!0),k.$members$=_[2],k.$attrsToReflect$=[],k.$watchers$=(j=_[4])!=null?j:{};const T=k.$tagName$,Se=class extends HTMLElement{constructor(R){if(super(R),this.hasRegisteredEventListeners=!1,R=this,lr(R,k),k.$flags$&1){if(!R.shadowRoot)wr.call(R,k);else if(R.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${k.$tagName$}! Mode is set to ${R.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}connectedCallback(){U(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),g&&(clearTimeout(g),g=null),p?d.push(this):x.jmp(()=>Ur(this))}disconnectedCallback(){x.jmp(()=>Hr(this)),x.raf(()=>{var R;const Y=U(this),K=d.findIndex(ue=>ue===this);K>-1&&d.splice(K,1),((R=Y?.$vnode$)==null?void 0:R.$elm$)instanceof Node&&!Y.$vnode$.$elm$.isConnected&&delete Y.$vnode$.$elm$})}componentOnReady(){return U(this).$onReadyPromise$}};k.$lazyBundleId$=y[0],!a.includes(T)&&!o.get(T)&&(s.push(T),o.define(T,Kt(Se,k,1)))})}),s.length>0&&(m&&(l.textContent+=Dt),l.textContent+=s.sort()+dr,l.innerHTML.length)){l.setAttribute("data-styles","");const y=(n=x.$nonce$)!=null?n:Ft(I.document);y!=null&&l.setAttribute("nonce",y),c.insertBefore(l,u?u.nextSibling:c.firstChild)}p=!1,d.length?d.map(y=>y.connectedCallback()):x.jmp(()=>g=setTimeout(Jt,30)),r()};const qr=()=>{},Wr=async(e,t)=>{if(!(typeof window>"u"))return await qr(),Br([["ion-icon",[[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},null,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]]]],t)},Yr=()=>H(()=>import("./motionFeatures-DFpXREjK.js"),__vite__mapDeps([10,5,1])).then(e=>e.default);typeof window<"u"&&Wr();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("[SW] Service Worker registered:",e),re().enablePerfTelemetry&&E("service_worker_registered",{scope:e?.scope||"/"})}).catch(e=>{console.error("[SW] Service Worker registration failed:",e),re().enablePerfTelemetry&&q("service_worker_registration_failed",e,{source:"main_bootstrap"})})});fn.createRoot(document.getElementById("root")).render(i.jsx(h.StrictMode,{children:i.jsx(ar,{children:i.jsx(dn,{children:i.jsx(wn,{children:i.jsx(gn,{children:i.jsx(vn,{features:Yr,children:i.jsx(sr,{})})})})})})}));export{je as L,kn as a,nt as b,Bn as c,Nn as d,zn as e,es as f,Pe as g,ts as h,le as i,ns as j,rs as k,Vr as l,ot as m,En as p,at as r,ss as s,Zr as u};
