import{c as te,a as ne,b as ie,e as re,f as oe,s as ce,d as le,g as de,h as me,i as he,j as ue,k as pe,l as fe,m as ge,n as xe,o as ve,p as be,q as ye,u as je,r as f,t as we,v as e,w as p,x as ke,y as L,z as Ne,A as Ce}from"./index-DO_uKPvs.js";const Se=(a,s,t)=>Math.max(s,Math.min(t,a));function Ee(a){const s={...a};if(a.hasFrench==="yes"&&a.frenchTestType==="tef")for(const t of["listening","reading","writing","speaking"])s[`french_${t}`]=String(te(t,parseInt(a[`tef_${t}`])||0));else if(a.hasFrench==="yes"&&a.frenchTestType==="tcf")for(const t of["listening","reading","writing","speaking"])s[`french_${t}`]=String(ne(t,parseInt(a[`tcf_${t}`])||0));return s}function D(a){return a.hasSpouse==="yes"&&a.spouseIsCanadian!=="yes"&&a.spouseAccompanying!=="no"}const T=a=>D(a)?1:0;function J(a,s){if(a.langTestType==="celpip")return Se(parseInt(a[`celpip_${s}`])||0,0,12);const t=parseFloat(a[`ielts_${s}`])||0;return ve(s,t)}function I(a){const s=["listening","reading","writing","speaking"];let t=99;for(const i of s){const r=J(a,i);r<t&&(t=r)}return t===99?0:t}function U(a,s){return parseInt(a[`french_${s}`])||0}function V(a){const s=["listening","reading","writing","speaking"];let t=99;for(const i of s){const r=U(a,i);r<t&&(t=r)}return t===99?0:t}function _e(a){const s=I(a);return s>=9?2:s>=7?1:0}function Me(a){const s=parseInt(a.canadianWorkExp)||0;return s>=2?2:s>=1?1:0}function Le(a){const s=parseInt(a.foreignWorkExp)||0;return s>=3?2:s>=1?1:0}function Te(a){let s=parseInt(a.age);return isNaN(s)?0:(s<18&&(s=17),s>47&&(s=47),s>44&&(s=45),ie[s]?.[T(a)]||0)}function Pe(a){return re[a.education]?.[T(a)]||0}function We(a){const s=["listening","reading","writing","speaking"],t=T(a);return s.reduce((i,r)=>{const d=J(a,r);return i+(oe[d]?.[t]||0)},0)}function Ie(a){if(a.hasFrench!=="yes")return 0;const s=["listening","reading","writing","speaking"],t=T(a),i=s.reduce((r,d)=>{const h=U(a,d);return r+(ce[h]?.[t]||0)},0);return Math.min(i,t===0?24:22)}function $e(a){let s=parseInt(a.canadianWorkExp)||0;return s>5&&(s=5),le[s]?.[T(a)]||0}function Ae(a){if(!D(a))return 0;let s=0;s+=de[a.spouseEducation]||0;const t=["listening","reading","writing","speaking"];let i=0;for(const d of t){const h=parseInt(a[`spouseLang_${d}`])||0;i+=be[h]||0}s+=Math.min(i,20);let r=parseInt(a.spouseCanadianWork)||0;return r>5&&(r=5),s+=me[r]||0,Math.min(s,40)}function Fe(a){const s=he[a.education]||0,t=_e(a),i=Me(a),r=Le(a),d=ue[s]?.[t]||0,h=pe[s]?.[i]||0,o=Math.min(d+h,50),u=fe[r]?.[t]||0,c=ge[r]?.[i]||0,m=Math.min(u+c,50);let v=0;if(a.pathway==="fst"&&a.hasCertificate==="yes"){const y=I(a);v=ye[y>=7?2:y>=5?1:0]}return Math.min(o+m+v,100)}function Be(a){let s=0;const t=xe;return a.hasPNP==="yes"&&(s+=t.pnp_nomination),a.hasJobOffer==="yes"&&(a.jobOfferTeer==="teer_0"&&a.jobOfferMajorGroup00==="yes"?s+=t.job_offer_00:["teer_0","teer_1","teer_2","teer_3"].includes(a.jobOfferTeer)&&(s+=t.job_offer_other)),a.canadianEducation==="yes"&&(s+=a.canadianEduType==="long"?t.canadian_edu_long:t.canadian_edu_short),a.hasSibling==="yes"&&(s+=t.sibling_in_canada),a.hasFrench==="yes"&&V(a)>=7&&(s+=I(a)>=5?t.french_strong_strong_english:t.french_strong_weak_english),Math.min(s,600)}function K(a){const s=Ee(a),t=Te(s),i=Pe(s),r=We(s),d=Ie(s),h=$e(s),o=parseInt(s.foreignWorkExp)||0,u=t+i+r+d+h,c=Ae(s),m=Fe(s),v=Be(s);return{total:Math.min(u+c+m+v,1200),breakdown:{coreHumanCapital:u,spouseFactors:c,skillTransferability:m,additionalPoints:v},details:{age:t,education:i,firstLanguage:r,secondLanguage:d,canadianWork:h,foreignWork:o,spouseTotal:c,skillTotal:m,additionalTotal:v}}}function M(a,s){return K({...a,...s})}function N(a,s,t,i,r,d){return{title:a,description:s,potentialGain:t,difficulty:i,timeframe:r,icon:d}}function Re(a,s){const t=[],i=I(a);if(i<10){const o=Math.min(i+1,10),u=a.langTestType==="celpip"?"CELPIP":"IELTS",c={},m=["listening","reading","writing","speaking"];for(const l of m){const k=a.langTestType==="celpip"?`celpip_${l}`:`ielts_${l}`,w=a.langTestType==="celpip"?parseInt(a[k])||0:parseFloat(a[k])||0;a.langTestType==="celpip"?c[k]=Math.max(w,o):c[k]=Math.max(w,w+.5)}const y=M(a,c).total-s.total;y>0&&t.push(N(`Improve ${u} Scores`,`Raising your weakest ${u} skill to CLB ${o} could add significant points. Focus on your lowest band.`,y,"Medium","2-4 months","language"))}const r=["less_than_secondary","secondary","one_year_post","two_year_post","bachelors","two_or_more","masters","doctoral"],d=r.indexOf(a.education);if(d>=0&&d<r.length-1){const o=r[d+1],c=M(a,{education:o}).total-s.total;if(c>0){const m={secondary:"high school diploma",one_year_post:"1-year diploma",two_year_post:"2-year diploma",bachelors:"bachelor's degree",two_or_more:"two credentials",masters:"master's degree",doctoral:"doctoral degree"};t.push(N("Higher Education",`Completing a ${m[o]||"higher credential"} could boost your score.`,c,"Hard","1-4 years","education"))}}const h=parseInt(a.canadianWorkExp)||0;if(h<5){const u=M(a,{canadianWorkExp:String(h+1)}).total-s.total;u>0&&t.push(N("Gain Canadian Work Experience","An additional year of Canadian work experience adds points across multiple categories including skill transferability.",u,"Hard","1 year","work"))}if(a.hasFrench!=="yes"){const c=M(a,{hasFrench:"yes",french_listening:"7",french_reading:"7",french_writing:"7",french_speaking:"7"}).total-s.total;c>0&&t.push(N("Learn French (TEF/TCF)",`Strong French skills (NCLC 7+) earn ${i>=5?"50":"25"} additional CRS points. Plus, French-language category draws have cutoffs around 400 — much lower than general draws (~520).`,c,"Hard","6-12 months","french"))}else V(a)>=7&&s.total<520&&s.total>=370&&t.push(N("Target French-Language Category Draw",`With your French NCLC 7+ scores, you qualify for French-language category draws where recent cutoffs are around 400 — your score of ${s.total} may already be competitive!`,0,"Easy","Immediate","french"));if(a.hasPNP!=="yes"&&t.push(N("Provincial Nominee Program","A PNP nomination adds 600 points, virtually guaranteeing an ITA. Explore programs in provinces like Ontario, BC, Alberta and Saskatchewan.",600,"Hard","3-12 months","province")),a.hasJobOffer!=="yes"){const u=M(a,{hasJobOffer:"yes",jobOfferTeer:"teer_0"}).total-s.total;u>0&&t.push(N("Obtain LMIA-Backed Job Offer","A valid job offer with LMIA in a TEER 0-3 occupation adds 50-200 points.",u,"Hard","3-6 months","job"))}if(a.canadianEducation!=="yes"&&t.push(N("Study in Canada","A Canadian credential (1-2 year program) adds 15 points, or 30 points for a 3+ year program.",30,"Hard","1-3 years","study")),a.hasSibling!=="yes"&&t.push(N("Sibling in Canada (If Applicable)","If you have a sibling who is a Canadian citizen or PR, this adds 15 points. Check if any siblings qualify.",15,"Easy","N/A","family")),D(a)){const o=["listening","reading","writing","speaking"];let u=99;for(const c of o){const m=parseInt(a[`spouseLang_${c}`])||0;m<u&&(u=m)}if(u<9){const c=Math.min(u+1,9),m={};for(const l of o)m[`spouseLang_${l}`]=String(Math.max(parseInt(a[`spouseLang_${l}`])||0,c));const y=M(a,m).total-s.total;y>0&&t.push(N("Improve Spouse's Language Scores",`Your spouse's language improvement to CLB ${c} could add points.`,y,"Medium","2-4 months","language"))}}return t.sort((o,u)=>u.potentialGain-o.potentialGain),t}function Oe(a){const s=a.total;return s>=500?{label:"Very Strong",months:"1-3",description:"You are very likely to receive an ITA in the next few draws."}:s>=470?{label:"Strong",months:"3-6",description:"Your score is competitive. An ITA is likely within a few months."}:s>=440?{label:"Moderate",months:"6-12",description:"Your score is near recent cutoffs. Category-based draws may help."}:s>=400?{label:"Below Average",months:"12-18",description:"You may need to improve your profile or target a category-based draw."}:{label:"Needs Improvement",months:"18+",description:"Significant profile improvements are recommended before applying."}}const Ye=[{id:"on",name:"Ontario",abbr:"ON",streams:["Human Capital Priorities","Skilled Trades","French-Speaking"],demandSectors:["stem","healthcare","trade"],minCLB:7,minEducation:"bachelors",minWorkYears:1,notes:"Largest province. Strong demand for tech, healthcare, and skilled trades. Ontario often sends NOIs to Express Entry candidates with CRS 400+."},{id:"bc",name:"British Columbia",abbr:"BC",streams:["Skills Immigration","Express Entry BC","Tech"],demandSectors:["stem","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:1,notes:"Tech hub (Vancouver). BC PNP Tech targets 29 in-demand occupations including software, data, and engineering roles."},{id:"ab",name:"Alberta",abbr:"AB",streams:["Alberta Advantage Immigration","Express Entry Stream"],demandSectors:["trade","healthcare","stem","transport"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Strong energy/oil sector. Growing tech scene in Calgary and Edmonton. Lower cost of living than ON/BC."},{id:"sk",name:"Saskatchewan",abbr:"SK",streams:["International Skilled Worker","Express Entry"],demandSectors:["agriculture","healthcare","trade","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"In-Demand Occupations list is broad. One of the easiest PNPs to qualify for. Agriculture and mining are key industries."},{id:"mb",name:"Manitoba",abbr:"MB",streams:["Skilled Workers Overseas","Skilled Workers in Manitoba"],demandSectors:["healthcare","agriculture","trade","transport"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Welcoming to newcomers. Strong need for healthcare workers and tradespeople. Lower CRS requirements than federal draws."},{id:"ns",name:"Nova Scotia",abbr:"NS",streams:["Labour Market Priorities","Skilled Worker","Physician"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing tech sector in Halifax. Healthcare workers are highly sought after."},{id:"nb",name:"New Brunswick",abbr:"NB",streams:["Express Entry Labour Market","Skilled Workers with Employer Support"],demandSectors:["healthcare","trade","agriculture"],minCLB:5,minEducation:"secondary",minWorkYears:1,notes:"Bilingual province (English/French). Part of Atlantic Immigration Program. Francophone candidates get priority."},{id:"pe",name:"Prince Edward Island",abbr:"PE",streams:["Express Entry","Labour Impact"],demandSectors:["agriculture","healthcare","trade"],minCLB:5,minEducation:"two_year_post",minWorkYears:2,notes:"Small province with lower competition. Agriculture and tourism are key industries."},{id:"nl",name:"Newfoundland & Labrador",abbr:"NL",streams:["Express Entry","Skilled Worker","Priority Skills"],demandSectors:["healthcare","trade","stem"],minCLB:5,minEducation:"one_year_post",minWorkYears:1,notes:"Part of Atlantic Immigration Program. Growing need for healthcare and tech workers. Oil and gas sector."},{id:"yt",name:"Yukon",abbr:"YT",streams:["Yukon Express Entry","Skilled Worker"],demandSectors:["trade","healthcare","transport"],minCLB:4,minEducation:"secondary",minWorkYears:1,notes:"Territory with small population. Job offer typically required. Good for tradespeople and healthcare workers."}],Y={less_than_secondary:0,secondary:1,one_year_post:2,two_year_post:3,bachelors:4,two_or_more:5,masters:6,doctoral:7};function De(a,s){return(Y[a]||0)>=(Y[s]||0)}function He(a){const s=qe(a),t=a.education||"secondary",i=Math.max(parseInt(a.canadianWorkExp)||0,parseInt(a.foreignWorkExp)||0),r=a.occupationCategory||"other",d=a.hasFrench==="yes";return Ye.map(h=>{let o=0;const u=100;s>=h.minCLB&&(o+=20,s>=h.minCLB+2&&(o+=10)),De(t,h.minEducation)&&(o+=15,(Y[t]||0)>=4&&(o+=5)),i>=h.minWorkYears&&(o+=15,i>=3&&(o+=5)),h.demandSectors.includes(r)&&(o+=25),d&&(h.id==="nb"||h.id==="on")&&(o+=5);const c=Math.min(Math.round(o/u*100),100);return{...h,matchScore:c}}).sort((h,o)=>o.matchScore-h.matchScore)}function qe(a){if(a.langTestType==="celpip"){const t=["listening","reading","writing","speaking"].map(i=>parseInt(a[`celpip_${i}`])||0);return Math.min(...t)}if(a.langTestType==="ielts"){const t=["listening","reading","writing","speaking"].map(i=>{const r=parseFloat(a[`ielts_${i}`])||0;return r>=8?10:r>=7?9:r>=6.5?8:r>=6?7:r>=5.5?6:r>=5?5:r>=4?4:0});return Math.min(...t)}return 0}const G={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},b={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:18}}};function Ge({value:a,duration:s=1.2}){const[t,i]=f.useState(0);return f.useEffect(()=>{const r=a,d=performance.now(),h=o=>{const u=(o-d)/(s*1e3);if(u>=1){i(r);return}const c=1-Math.pow(1-u,3);i(Math.round(r*c)),requestAnimationFrame(h)};requestAnimationFrame(h)},[a,s]),e.jsx(e.Fragment,{children:t})}function ze({score:a,statusColor:s}){const i=2*Math.PI*54,r=Math.min(a/1200,1);return e.jsxs("div",{className:"score-gauge","aria-label":`CRS Score: ${a} out of 1200`,children:[e.jsxs("svg",{viewBox:"0 0 120 120",width:"180",height:"180",children:[e.jsx("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:"var(--surface-2)",strokeWidth:"8"}),e.jsx(p.circle,{cx:"60",cy:"60",r:54,fill:"none",stroke:s,strokeWidth:"8",strokeLinecap:"round",transform:"rotate(-90 60 60)",strokeDasharray:i,initial:{strokeDashoffset:i},animate:{strokeDashoffset:i-r*i},transition:{duration:1.4,ease:[.22,1,.36,1]}})]}),e.jsxs("div",{className:"gauge-text",children:[e.jsx("div",{className:"gauge-number","aria-live":"polite",children:e.jsx(Ge,{value:a})}),e.jsx("div",{className:"gauge-max",children:"/ 1,200"})]})]})}function Je({icon:a,label:s,value:t,max:i,note:r}){const d=Math.round(t/i*100);return e.jsxs(p.div,{className:"bd-item",variants:b,children:[e.jsx("span",{className:"bd-icon",children:a}),e.jsxs("div",{className:"bd-info",children:[e.jsxs("div",{className:"bd-top",children:[e.jsxs("span",{className:"bd-label",children:[s,r&&e.jsxs("small",{className:"bd-note",children:[" (",r,")"]})]}),e.jsxs("span",{className:"bd-pts",children:[t," ",e.jsxs("small",{children:["/ ",i]})]})]}),e.jsx("div",{className:"bd-bar-bg",children:e.jsx(p.div,{className:"bd-bar-fill",initial:{width:0},animate:{width:`${d}%`},transition:{duration:.8,delay:.3,ease:"easeOut"}})})]})]})}function O({draw:a,userScore:s}){const t=s>=a.score;return e.jsxs("div",{className:`draw-row ${t?"draw-above":"draw-below"}`,children:[e.jsx("span",{className:"draw-date",children:a.date}),e.jsx("span",{className:"draw-program",children:a.program}),e.jsx("span",{className:"draw-score",children:a.score})]})}const Ue=[{value:"secondary",label:"High School"},{value:"one_year_post",label:"1-Year Diploma"},{value:"two_year_post",label:"2-Year Diploma"},{value:"bachelors",label:"Bachelor's"},{value:"two_or_more",label:"2+ Credentials"},{value:"masters",label:"Master's"},{value:"doctoral",label:"PhD"}];function Ve({answers:a,originalScore:s,t}){const[i,r]=f.useState(a.age||""),[d,h]=f.useState(a.education||""),[o,u]=f.useState(a.canadianWorkExp||"0"),[c,m]=f.useState(""),v=f.useMemo(()=>{const l={};if(i&&i!==a.age&&(l.age=i),d&&d!==a.education&&(l.education=d),o&&o!==a.canadianWorkExp&&(l.canadianWorkExp=o),c){const k=["listening","reading","writing","speaking"],w=a.langTestType==="celpip"?"celpip":"ielts";for(const C of k){const x=`${w}_${C}`;a.langTestType==="celpip"?l[x]=String(Math.max(parseInt(a[x])||0,parseInt(c))):l[x]=String(Math.max(parseFloat(a[x])||0,parseFloat(c)))}}return Object.keys(l).length===0?null:M(a,l)},[a,i,d,o,c]),y=v?v.total-s:0;return e.jsxs("div",{className:"whatif-panel",children:[e.jsxs("div",{className:"wi-grid",children:[e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Age"}),e.jsxs("select",{value:i,onChange:l=>r(l.target.value),children:[e.jsx("option",{value:"",children:"Current"}),Array.from({length:30},(l,k)=>k+18).map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Education"}),e.jsxs("select",{value:d,onChange:l=>h(l.target.value),children:[e.jsx("option",{value:"",children:"Current"}),Ue.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Canadian Work (yrs)"}),e.jsx("select",{value:o,onChange:l=>u(l.target.value),children:[0,1,2,3,4,5].map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsxs("label",{className:"wi-field",children:[e.jsx("span",{children:"Min Language CLB"}),e.jsxs("select",{value:c,onChange:l=>m(l.target.value),children:[e.jsx("option",{value:"",children:"Current"}),[5,6,7,8,9,10].map(l=>e.jsxs("option",{value:l,children:["CLB ",l,"+"]},l))]})]})]}),v&&e.jsx(p.div,{className:"wi-result",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"wi-scores",children:[e.jsxs("div",{className:"wi-score-block",children:[e.jsx("small",{children:t("results.original")}),e.jsx("strong",{children:s})]}),e.jsx("span",{className:"wi-arrow",children:"→"}),e.jsxs("div",{className:"wi-score-block projected",children:[e.jsx("small",{children:t("results.projected")}),e.jsx("strong",{children:v.total})]}),e.jsxs("span",{className:`wi-delta ${y>0?"pos":y<0?"neg":""}`,children:[y>0?"+":"",y," pts"]})]})})]})}const W=["Analyzing profile","Calculating core factors","Evaluating language scores","Computing skill transferability","Checking eligibility","Finalizing CRS score"];function Ke(){const[a,s]=f.useState(0),[t,i]=f.useState(0);return f.useEffect(()=>{let r;const d=performance.now(),h=2200,o=u=>{const c=Math.min((u-d)/h,1),m=1-Math.pow(1-c,3);s(Math.round(m*100)),i(Math.min(Math.floor(m*W.length),W.length-1)),c<1&&(r=requestAnimationFrame(o))};return r=requestAnimationFrame(o),()=>cancelAnimationFrame(r)},[]),e.jsxs(p.div,{className:"loading-screen",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.95,transition:{duration:.3}},children:[e.jsx("div",{className:"loader-pulse"}),e.jsxs("div",{className:"loader-pct-wrap",children:[e.jsx("span",{className:"loader-num",children:a}),e.jsx("span",{className:"loader-pct-sign",children:"%"})]}),e.jsxs("div",{className:"uv-progress-container",children:[e.jsx("div",{className:"uv-progress-bar",style:{width:`${a}%`}}),e.jsxs("div",{className:"uv-progress-text",children:[a,"%"]}),e.jsxs("div",{className:"uv-particles",children:[e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"}),e.jsx("div",{className:"uv-particle"})]})]}),e.jsx(Ce,{mode:"wait",children:e.jsx(p.p,{className:"loader-phase",initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.15},children:W[t]},t)}),e.jsx("div",{className:"loader-dots",children:W.map((r,d)=>e.jsx("div",{className:`loader-dot${d<=t?" active":""}`},d))})]})}function Qe(a){const s=f.useRef(null);return f.useEffect(()=>{if(!a)return;const t=s.current;if(!t)return;const i=t.getContext("2d");t.width=window.innerWidth,t.height=window.innerHeight;const r=["#22c55e","#4CC9F0","#7C3AED","#f59e0b","#ec4899","#3A0CA3"],d=Array.from({length:120},()=>({x:Math.random()*t.width,y:Math.random()*t.height-t.height,w:Math.random()*8+4,h:Math.random()*6+2,color:r[Math.floor(Math.random()*r.length)],vx:(Math.random()-.5)*4,vy:Math.random()*3+2,rot:Math.random()*360,rv:(Math.random()-.5)*8}));let h;const o=()=>{i.clearRect(0,0,t.width,t.height);let c=!1;for(const m of d)m.x+=m.vx,m.y+=m.vy,m.rot+=m.rv,m.vy+=.05,m.y<t.height+20&&(c=!0),i.save(),i.translate(m.x,m.y),i.rotate(m.rot*Math.PI/180),i.fillStyle=m.color,i.fillRect(-m.w/2,-m.h/2,m.w,m.h),i.restore();c&&(h=requestAnimationFrame(o))};h=requestAnimationFrame(o);const u=setTimeout(()=>{cancelAnimationFrame(h),i.clearRect(0,0,t.width,t.height)},4e3);return()=>{cancelAnimationFrame(h),clearTimeout(u)}},[a]),s}function Ze({answers:a,onRestart:s}){const{t}=je(),[i,r]=f.useState(!0),[d,h]=f.useState(!1),[o,u]=f.useState(!1),[c,m]=f.useState(!1),[v,y]=f.useState(!1),[l,k]=f.useState(!1);f.useEffect(()=>{const n=setTimeout(()=>r(!1),2500);return()=>clearTimeout(n)},[]);const w=f.useMemo(()=>{if(a.knowsScore==="yes"){const n=parseInt(a.scoreRange)||400;return{total:n,breakdown:{coreHumanCapital:n,spouseFactors:0,skillTransferability:0,additionalPoints:0},details:{age:0,education:0,firstLanguage:0,secondLanguage:0,canadianWork:0,foreignWork:0,spouseTotal:0,skillTotal:0,additionalTotal:0}}}return K(a)},[a]),C=a.knowsScore!=="yes",x=w.total,S=L.averageCutoff,E=x-S,_=E>=20?{cls:"above",marker:"+",title:"Great News!",desc:`Your score is ${E} points above the recent cut-off (${S}). You have a strong chance of receiving an Invitation to Apply.`,color:"#22c55e"}:E>=-10?{cls:"close",marker:"~",title:"Almost There!",desc:`You're just ${Math.abs(E)} points ${E>=0?"above":"below"} the recent cut-off (${S}). A few small improvements could make the difference.`,color:"#f59e0b"}:{cls:"below",marker:"—",title:"Room to Improve",desc:`You're ${Math.abs(E)} points below the recent cut-off (${S}). Don't worry — see the suggestions below to boost your score.`,color:"#ef4444"},$=f.useMemo(()=>Re(a,w),[a,w]),A=f.useMemo(()=>Oe(w),[w]),j=w.details,Q=f.useMemo(()=>{const n=[{icon:"A",label:"Age",value:j.age,max:110},{icon:"E",label:"Education",value:j.education,max:150},{icon:"L",label:"English Language",value:j.firstLanguage,max:136},{icon:"W",label:"Canadian Work",value:j.canadianWork,max:80}];return j.secondLanguage>0&&n.splice(3,0,{icon:"F",label:"French",value:j.secondLanguage,max:24}),j.foreignWork>0?n.push({icon:"S",label:t("results.foreignWork"),value:j.skillTotal,max:100,note:"via skill transferability"}):n.push({icon:"S",label:"Skill Bonus",value:j.skillTotal,max:100}),j.spouseTotal>0&&n.push({icon:"P",label:"Spouse",value:j.spouseTotal,max:40}),j.additionalTotal>0&&n.push({icon:"+",label:"Bonus Points",value:j.additionalTotal,max:600}),n},[j,t]),X=$.slice(0,3),F=$.slice(3),Z=a.pathway,B=ke[Z],H=f.useMemo(()=>C?He(a):[],[a,C]),q=!i&&E>=20,ee=Qe(q),R=`${window.location.origin}${window.location.pathname}#${we(a)}`,ae=async()=>{try{if(navigator.share){await navigator.share({title:"My CRS Score",text:`My CRS score is ${x}/1200!`,url:R});return}}catch{}try{await navigator.clipboard.writeText(R)}catch{const n=document.createElement("textarea");n.value=R,n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}k(!0),setTimeout(()=>k(!1),2e3)},se=()=>window.print();return i?e.jsx(Ke,{}):e.jsxs(p.div,{className:"results",variants:G,initial:"hidden",animate:"show",exit:{opacity:0,transition:{duration:.2}},children:[q&&e.jsx("canvas",{ref:ee,className:"confetti-canvas"}),e.jsx(p.div,{className:"score-hero",variants:b,children:e.jsx(ze,{score:x,statusColor:_.color})}),e.jsxs(p.div,{className:"result-actions",variants:b,children:[e.jsx("button",{className:"action-btn",onClick:ae,"aria-label":"Share results",children:l?"✓ Copied!":t("results.share")}),e.jsx("button",{className:"action-btn",onClick:se,"aria-label":"Download PDF",children:t("results.pdf")})]}),e.jsxs(p.div,{className:`card status-card ${_.cls}-card`,variants:b,children:[e.jsxs("div",{className:"status-header",children:[e.jsx("span",{className:`status-marker ${_.cls}`,children:_.marker})," ",e.jsx("strong",{children:_.title})]}),e.jsx("p",{className:"status-desc",children:_.desc}),e.jsxs("div",{className:"cutoff-compare",children:[e.jsx(z,{label:"Your Score",value:x,max:Math.max(x,S,600),color:"var(--primary)"}),e.jsx(z,{label:"Cut-off",value:S,max:Math.max(x,S,600),color:"var(--surface-3)"})]})]}),C&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.breakdown")}),e.jsx(p.div,{className:"breakdown-grid",variants:G,initial:"hidden",animate:"show",children:Q.map(n=>e.jsx(Je,{...n},n.label))}),e.jsxs("div",{className:"bd-total",children:[e.jsx("span",{children:"Total CRS Score"}),e.jsx("span",{className:"bd-total-num",children:x})]})]}),C&&e.jsxs(p.div,{className:"card whatif-card",variants:b,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>m(!c),children:[t("results.whatif")," ",e.jsx("span",{className:"toggle-arrow",children:c?"▲":"▼"})]}),c&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("p",{className:"cat-intro",children:t("results.whatifDesc")}),e.jsx(Ve,{answers:a,originalScore:x,t})]})]}),$.length>0&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.improve")}),X.map((n,g)=>e.jsxs(p.div,{className:"action-card",variants:b,children:[e.jsx("div",{className:"action-rank",children:g+1}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[n.title,n.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",n.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:n.description}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:n.timeframe}),e.jsx("span",{className:`action-diff diff-${n.difficulty.toLowerCase()}`,children:n.difficulty})]})]})]},g)),F.length>0&&e.jsxs(e.Fragment,{children:[d&&F.map((n,g)=>e.jsxs(p.div,{className:"action-card",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"action-rank",children:g+4}),e.jsxs("div",{className:"action-body",children:[e.jsxs("div",{className:"action-title",children:[n.title,n.potentialGain>0&&e.jsxs("span",{className:"action-badge",children:["+",n.potentialGain," pts"]})]}),e.jsx("div",{className:"action-desc",children:n.description}),e.jsxs("div",{className:"action-meta",children:[e.jsx("span",{className:"action-time",children:n.timeframe}),e.jsx("span",{className:`action-diff diff-${n.difficulty.toLowerCase()}`,children:n.difficulty})]})]})]},g+3)),e.jsx("button",{className:"btn-toggle",onClick:()=>h(!d),children:d?"Show fewer ▲":`Show ${F.length} more suggestions ▼`})]})]}),C&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.category")}),e.jsx("p",{className:"cat-intro",children:t("results.catIntro")}),e.jsx("div",{className:"cat-grid",children:Ne.map(n=>{const g=n.check(a),P=g&&x>=n.recentCutoff;return e.jsxs(p.div,{className:`cat-card ${g?P?"cat-above":"cat-eligible":"cat-na"}`,variants:b,children:[e.jsxs("div",{className:"cat-header",children:[e.jsx("span",{className:"cat-icon",children:n.icon}),e.jsxs("div",{children:[e.jsx("strong",{className:"cat-name",children:n.name}),g&&e.jsx("span",{className:`cat-badge ${P?"badge-above":"badge-eligible"}`,children:P?"Above Cutoff":"Eligible"}),!g&&e.jsx("span",{className:"cat-badge badge-na",children:"Not Eligible"})]})]}),e.jsx("p",{className:"cat-desc",children:n.description}),e.jsxs("div",{className:"cat-cutoff",children:[e.jsxs("span",{children:["Recent cutoff: ",e.jsx("strong",{children:n.recentCutoff})]}),e.jsxs("span",{className:"cat-range",children:["Range: ",n.cutoffRange]})]}),g&&e.jsxs("div",{className:"cat-compare",children:[e.jsxs("div",{className:"cat-bar-wrap",children:[e.jsx(p.div,{className:`cat-bar ${P?"bar-above":"bar-below"}`,initial:{width:0},animate:{width:`${Math.min(x/Math.max(x,n.recentCutoff+50)*100,100)}%`},transition:{duration:.8,ease:"easeOut"}}),e.jsx("div",{className:"cat-marker",style:{left:`${n.recentCutoff/Math.max(x,n.recentCutoff+50)*100}%`}})]}),e.jsxs("div",{className:"cat-labels",children:[e.jsxs("span",{children:["Your score: ",x]}),e.jsxs("span",{children:["Cutoff: ",n.recentCutoff]})]})]}),!g&&e.jsx("p",{className:"cat-req",children:n.eligibility})]},n.id)})})]}),C&&H.length>0&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>y(!v),children:["Province Recommender ",e.jsx("span",{className:"toggle-arrow",children:v?"▲":"▼"})]}),v&&e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},children:[e.jsx("p",{className:"cat-intro",children:"Based on your profile, these provinces may be good matches for Provincial Nominee Programs."}),e.jsx("div",{className:"prov-grid",children:H.slice(0,5).map(n=>e.jsxs("div",{className:"prov-card",children:[e.jsxs("div",{className:"prov-header",children:[e.jsx("span",{className:"prov-abbr",children:n.abbr}),e.jsxs("div",{children:[e.jsx("strong",{className:"prov-name",children:n.name}),e.jsxs("span",{className:`prov-match ${n.matchScore>=70?"match-high":n.matchScore>=40?"match-mid":"match-low"}`,children:[n.matchScore,"% match"]})]})]}),e.jsx("div",{className:"prov-bar-wrap",children:e.jsx(p.div,{className:"prov-bar",initial:{width:0},animate:{width:`${n.matchScore}%`},transition:{duration:.8,ease:"easeOut"},style:{background:n.matchScore>=70?"#22c55e":n.matchScore>=40?"#f59e0b":"var(--surface-3)"}})}),e.jsx("p",{className:"prov-notes",children:n.notes}),e.jsx("div",{className:"prov-streams",children:n.streams.map(g=>e.jsx("span",{className:"prov-stream",children:g},g))})]},n.id))})]})]}),e.jsxs(p.div,{className:"card",variants:b,children:[e.jsx("h3",{children:t("results.timeline")}),e.jsxs("div",{className:`timeline-badge tl-${_.cls}`,children:[e.jsx("strong",{children:A.label})," — est. ",A.months," months"]}),e.jsx("p",{className:"timeline-desc",children:A.description})]}),e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{className:"draws-toggle",onClick:()=>u(!o),children:[t("results.draws")," ",e.jsx("span",{className:"toggle-arrow",children:o?"▲":"▼"})]}),o&&e.jsxs(p.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"draws-content",children:[e.jsx("h4",{className:"draws-subhead",children:"General / CEC Draws"}),L.generalProgram.slice(0,4).map((n,g)=>e.jsx(O,{draw:n,userScore:x},`g${g}`)),e.jsx("h4",{className:"draws-subhead",children:"Category-Based Draws"}),L.categoryBased.slice(0,4).map((n,g)=>e.jsx(O,{draw:n,userScore:x},`c${g}`)),L.pnpDraws?.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"draws-subhead",children:"Provincial Nominee (PNP)"}),L.pnpDraws.slice(0,3).map((n,g)=>e.jsx(O,{draw:n,userScore:x},`p${g}`))]})]})]}),B&&e.jsxs(p.div,{className:"card",variants:b,children:[e.jsxs("h3",{children:[B.name," Requirements"]}),e.jsx("ul",{className:"pathway-list",children:B.requirements.map((n,g)=>e.jsx("li",{children:n},g))})]}),e.jsx(p.div,{className:"card disclaimer",variants:b,children:e.jsxs("p",{children:[e.jsx("strong",{children:"Disclaimer:"})," ",t("results.disclaimer")," ",e.jsx("a",{href:"https://www.canada.ca/en/immigration-refugees-citizenship.html",target:"_blank",rel:"noopener noreferrer",children:"canada.ca"})]})}),e.jsx(p.button,{className:"btn-restart",onClick:s,whileHover:{scale:1.03},whileTap:{scale:.96},variants:b,children:t("results.restart")})]})}function z({label:a,value:s,max:t,color:i}){const r=Math.round(s/t*100);return e.jsxs("div",{className:"cutoff-row",children:[e.jsx("span",{className:"cutoff-label",children:a}),e.jsx("div",{className:"cutoff-bar-wrap",children:e.jsx(p.div,{className:"cutoff-bar",style:{background:i},initial:{width:0},animate:{width:`${r}%`},transition:{duration:.8,ease:"easeOut"},children:s})})]})}export{Ze as default};
