import{r as w,j as t}from"./vendor-react-Ah1pgjPn.js";import{c as Kt,b as Jt}from"./feature-path-coach-Beny58Sb.js";const Qt={"header.title":"Express Entry Score Studio","header.tagline":"Clear score. Clear plan.","welcome.heading":`Know your CRS score
and your next best move`,"welcome.sub":"Answer a few simple questions to see your CRS score, where your points come from, and what to do next.","welcome.btn":"Start free score check","welcome.updated":"IRCC data updated:","welcome.trust":"Draw data source — last updated:","welcome.microcopy":"Takes about 3 minutes. No paperwork. No spam.","welcome.resume":"You have a saved session.","welcome.resumeBtn":"Resume","welcome.startFresh":"Start Fresh","feature.accurate":"Understand your score","feature.accurateDesc":"See exactly how your CRS points are calculated.","feature.suggestions":"Focus on high-impact actions","feature.suggestionsDesc":"Get practical steps that can realistically raise your score.","feature.draws":"Track real draw movement","feature.drawsDesc":"Use recent draw patterns to plan better timing.","feature.instant":"Trusted and private","feature.instantDesc":"Start free. Save only when you choose.","wizard.step":"Step","wizard.of":"of","wizard.next":"Next →","wizard.back":"← Back","wizard.calculate":"Calculate Score ✓","results.breakdown":"Where your points come from","results.improve":"Best ways to improve your score","results.category":"Category draw eligibility","results.catIntro":"Some category rounds use lower cutoffs. Here is where your profile currently fits:","results.timeline":"Estimated timeline","results.draws":"Recent Express Entry draws","results.disclaimer":"This tool provides estimates using public CRS rules. Always confirm final requirements on canada.ca before filing.","results.restart":"↻ Recalculate","results.share":"Share Results","results.pdf":"Download PDF","results.whatif":"Scenario simulator","results.whatifDesc":"Test a few profile changes and compare possible score outcomes:","results.original":"Current","results.projected":"Projected","results.foreignWork":"Foreign Work (Skill Bonus)","strategy.actionCenter.title":"Action Center","strategy.actionCenter.subtitle":"Start here for the most important next actions — ranked by impact, timing, and risk.","strategy.actionCenter.saveProfile":"Save profile","strategy.actionCenter.openOptimizer":"Open optimizer","strategy.actionCenter.openForecast":"Open forecast","strategy.actionCenter.openDigitalTwin":"Open digital twin","strategy.actionCenter.openOpportunityRadar":"Open opportunity radar","strategy.actionCenter.openCommandCenter":"Open command center","strategy.actionCenter.openCopilot":"Open grounded copilot","strategy.actionCenter.openCollaboration":"Open collaboration workspace","strategy.actionCenter.openBenchmarks":"Open community benchmarks","strategy.actionCenter.openPlan":"Open 90-day plan","strategy.actionCenter.comparePlans":"Compare plans","strategy.actionCenter.expertCoach":"Expert strategy coach","strategy.actionCenter.manageAccount":"Manage account","strategy.actionCenter.exportHandoff":"Export consultant file","strategy.actionCenter.shareHandoff":"Copy handoff share link","strategy.actionCenter.profileStatus":"Profile save status","strategy.actionCenter.notSavedYet":"Not saved yet","strategy.actionCenter.planCompletion":"90-day completion","strategy.actionCenter.confidence":"Confidence","strategy.actionCenter.riskLevel":"Risk level","strategy.actionCenter.nextTask":"Next best task","strategy.actionCenter.startTask":"Start task","strategy.optimizer.title":"Strategy Optimizer","strategy.forecast.title":"Forecast Outlook","strategy.forecast.subtitle":"Projection based on recent draw cutoffs, volatility, and freshness of available data.","strategy.forecast.trend":"Trend","strategy.forecast.confidence":"Forecast confidence","strategy.forecast.sampleSize":"Sample size","strategy.forecast.likelihood":"Invitation likelihood","strategy.forecast.nextCutoff":"Projected next cutoff","strategy.forecast.threeDrawAvg":"3-draw avg","strategy.forecast.latestObserved":"Latest observed cutoff","strategy.forecast.gapToProjection":"Gap to projection","strategy.forecast.projectedSequence":"Projected sequence","strategy.forecast.volatility":"Volatility","strategy.forecast.slope":"Slope/draw","strategy.plan.title":"90-Day Action Plan","strategy.pricing.title":"Plans & Upgrade Path","strategy.pricing.experimentLabel":"Active experiment variant","strategy.pricing.freeCta":"Continue with Free","strategy.pricing.proCtaDefault":"Go to Pro setup","strategy.pricing.proCtaExperiment":"Start Pro planning","strategy.explainability.title":"Explainability & Confidence","footer.copy":"Free CRS Calculator 2026 · Not affiliated with IRCC"},Xt={"header.title":"Calculateur SRC","welcome.heading":`Immigration au Canada
Calculateur de Points`,"welcome.sub":"Calculez votre score du Système de classement global (SCG) et découvrez votre meilleur chemin vers la résidence permanente canadienne.","welcome.btn":"Calculer Mon Score","welcome.updated":"Dernière mise à jour :","welcome.trust":"Données officielles d’IRCC — dernière mise à jour :","welcome.microcopy":"Cela prend 3 minutes — une question à la fois.","welcome.resume":"Vous avez un calcul en cours.","welcome.resumeBtn":"Reprendre","welcome.startFresh":"Recommencer","feature.accurate":"Score SCG Précis","feature.accurateDesc":"Calcul complet du Système de classement global","feature.suggestions":"Suggestions Intelligentes","feature.suggestionsDesc":"Conseils personnalisés pour augmenter vos points","feature.draws":"Derniers Tirages","feature.drawsDesc":"Résultats à jour des tirages Entrée express d'IRCC","feature.instant":"Résultats Instantanés","feature.instantDesc":"Obtenez votre score en moins de 2 minutes","wizard.step":"Étape","wizard.of":"de","wizard.next":"Suivant →","wizard.back":"← Retour","wizard.calculate":"Calculer le Score ✓","results.breakdown":"Détail de Votre Score","results.improve":"Comment Améliorer Votre Score","results.category":"Admissibilité aux Tirages par Catégorie","results.catIntro":"Le Canada organise des tirages spéciaux pour des groupes spécifiques avec des seuils plus bas. Voici ce à quoi vous pourriez être admissible :","results.timeline":"Calendrier Estimé","results.draws":"Tirages Récents Entrée Express","results.disclaimer":"Ce calculateur fournit une estimation basée sur les critères SCG publics. Il n'est pas affilié à IRCC.","results.restart":"↻ Recommencer","results.share":"Partager les Résultats","results.pdf":"Télécharger PDF","results.whatif":"Comparaison Hypothétique","results.whatifDesc":"Ajustez les variables pour voir comment votre score change :","results.original":"Original","results.projected":"Projeté","results.foreignWork":"Exp. Étrangère (Bonus)","strategy.actionCenter.title":"Centre d’action","strategy.actionCenter.subtitle":"Utilisez ce centre de contrôle pour exécuter les actions à plus fort impact avec priorités et risques visibles.","strategy.actionCenter.saveProfile":"Enregistrer le profil","strategy.actionCenter.openOptimizer":"Ouvrir l’optimiseur","strategy.actionCenter.openForecast":"Ouvrir la prévision","strategy.actionCenter.openPlan":"Ouvrir le plan 90 jours","strategy.actionCenter.comparePlans":"Comparer les offres","strategy.actionCenter.expertCoach":"Coach stratégie expert","strategy.actionCenter.manageAccount":"Gérer le compte","strategy.actionCenter.exportHandoff":"Exporter le dossier consultant","strategy.actionCenter.profileStatus":"Statut d’enregistrement","strategy.actionCenter.notSavedYet":"Pas encore enregistré","strategy.actionCenter.planCompletion":"Progression 90 jours","strategy.actionCenter.confidence":"Confiance","strategy.actionCenter.riskLevel":"Niveau de risque","strategy.actionCenter.nextTask":"Prochaine tâche prioritaire","strategy.actionCenter.startTask":"Démarrer la tâche","strategy.optimizer.title":"Optimiseur de stratégie","strategy.forecast.title":"Perspective de prévision","strategy.forecast.subtitle":"Projection basée sur les seuils récents, la volatilité et la fraîcheur des données.","strategy.forecast.trend":"Tendance","strategy.forecast.confidence":"Confiance de la prévision","strategy.forecast.sampleSize":"Taille d’échantillon","strategy.forecast.likelihood":"Probabilité d’invitation","strategy.forecast.nextCutoff":"Seuil projeté suivant","strategy.forecast.threeDrawAvg":"Moy. 3 tirages","strategy.forecast.latestObserved":"Dernier seuil observé","strategy.forecast.gapToProjection":"Écart à la projection","strategy.forecast.projectedSequence":"Séquence projetée","strategy.forecast.volatility":"Volatilité","strategy.forecast.slope":"Pente/tirage","strategy.plan.title":"Plan d’action 90 jours","strategy.pricing.title":"Offres et montée en gamme","strategy.pricing.experimentLabel":"Variante d’expérience active","strategy.pricing.freeCta":"Continuer en gratuit","strategy.pricing.proCtaDefault":"Accéder à la configuration Pro","strategy.pricing.proCtaExperiment":"Démarrer la planification Pro","strategy.explainability.title":"Explicabilité et confiance","footer.copy":"Calculateur SRC · Non affilié à IRCC"},at={en:Qt,fr:Xt},ft=w.createContext();function pa({children:e}){const[n,a]=w.useState(()=>{try{return localStorage.getItem("crs-lang")||"en"}catch{return"en"}}),s=w.useCallback(o=>{a(o);try{localStorage.setItem("crs-lang",o)}catch{}},[]),i=w.useCallback((o,l="")=>at[n]?.[o]||at.en[o]||l||o,[n]);return t.jsx(ft.Provider,{value:{lang:n,setLang:s,t:i},children:e})}function en(){return w.useContext(ft)}const gt="crs-analytics-queue-v2",st="crs-analytics-session-v1",it="2.0",tn=1800*1e3,nn=2500;function xt(e,n){try{return e?JSON.parse(e):n}catch{return n}}function rn(e,n){return typeof window>"u"?n:xt(window.localStorage.getItem(e),n)}function an(e,n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}}function yt(e="evt"){return`${e}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,9)}`}function sn(e,n=0){const a=Number(e);return Number.isFinite(a)?a:n}function on(e){return e?String(e).trim().toLowerCase().replace(/[^a-z0-9:_-]+/g,"_").slice(0,80):""}function wt(e={}){const n={};for(const[a,s]of Object.entries(e||{}))if(!(!a||s==null)){if(typeof s=="string"){n[a]=s.slice(0,280);continue}if(typeof s=="number"||typeof s=="boolean"){n[a]=s;continue}if(Array.isArray(s)){n[a]=s.slice(0,20).map(i=>String(i).slice(0,120));continue}n[a]=String(s).slice(0,280)}return n}function cn(){return rn(gt,[])}function ln(e){const n=Array.isArray(e)?e.slice(-300):[];an(gt,n)}function dn(){if(typeof window>"u")return{id:"server",seq:0,started_at:new Date().toISOString()};const e=Date.now(),n=xt(window.sessionStorage.getItem(st),null),s=!n||!n.last_activity_ms||e-n.last_activity_ms>tn?{id:yt("sess"),seq:1,started_at:new Date().toISOString(),last_activity_ms:e}:{...n,seq:sn(n.seq,0)+1,last_activity_ms:e};try{window.sessionStorage.setItem(st,JSON.stringify(s))}catch{}return s}function un(){if(typeof window>"u")return{app_version:"dev"};let e="unknown";try{e=Intl.DateTimeFormat().resolvedOptions().timeZone||"unknown"}catch{}return{app_version:"dev",lang:window.navigator?.language||"unknown",timezone:e,path:window.location?.pathname||"/"}}function pn(e){return!1}async function mn(e){if(typeof window>"u")return!1;const n=void 0;if(!pn())return!1;const a=JSON.stringify(e);if(window.navigator?.sendBeacon&&document.visibilityState==="hidden")try{if(window.navigator.sendBeacon(n,new Blob([a],{type:"application/json"})))return!0}catch{}const s=typeof AbortController<"u"?new AbortController:null;let i=null;s&&(i=window.setTimeout(()=>s.abort(),nn));try{return(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:a,keepalive:!0,signal:s?.signal})).ok}catch{return!1}finally{i&&window.clearTimeout(i)}}function hn(e,n){if(!(typeof window>"u")&&typeof window.plausible=="function")try{window.plausible(e,{props:n})}catch{}}function fn(e){if(e instanceof Error){const n=String(e.stack||"").split(`
`)[0]||"",a=e?.cause instanceof Error?e.cause.message:typeof e?.cause=="string"?e.cause:"";return{error_name:String(e.name||"Error").slice(0,120),error_message:String(e.message||"Unknown error").slice(0,280),error_stack_head:String(n||"").slice(0,280),error_cause:String(a||"").slice(0,200)}}return typeof e=="string"?{error_name:"Error",error_message:e.slice(0,280),error_stack_head:"",error_cause:""}:e&&typeof e=="object"?{error_name:String(e.name||"Error").slice(0,120),error_message:String(e.message||JSON.stringify(e)).slice(0,280),error_stack_head:String(e.stack||"").split(`
`)[0]?.slice(0,280)||"",error_cause:""}:{error_name:"Error",error_message:"Unknown error",error_stack_head:"",error_cause:""}}function A(e,n={}){if(typeof window>"u")return;const a=on(e);if(!a)return;const s=dn(),i=wt(n),o=un(),l={event_id:yt("evt"),schema_version:it,name:a,ts:new Date().toISOString(),session_id:s.id,session_seq:s.seq,session_started_at:s.started_at,payload:i,meta:o},u=cn();u.push(l),ln(u),hn(a,{...i,schema_version:it,session_seq:s.seq}),mn(l)}function ma(e,n,a={}){if(typeof window>"u")return;const s=wt(a),i=fn(n),o=typeof navigator<"u"?navigator.onLine:void 0,l={...s,...i,online:typeof o=="boolean"?o:void 0,visibility:typeof document<"u"?document.visibilityState:void 0};A(e||"app_error",l)}const gn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m268 112 144 144-144 144M392 256H100' stroke-linecap='square' stroke-miterlimit='10' stroke-width='48px' class='ionicon-fill-none'/></svg>",xn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M496 496H16V16h32v448h448z'/><path d='M192 432H80V208h112ZM336 432H224V160h112ZM479.64 432h-112V96h112Z'/></svg>",yn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M32 456a24 24 0 0 0 24 24h400a24 24 0 0 0 24-24V176H32Zm320-244a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm0 80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm-80-80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm0 80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm0 80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm-80-80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm0 80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm-80-80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4Zm0 80a4 4 0 0 1 4-4h40a4 4 0 0 1 4 4v40a4 4 0 0 1-4 4h-40a4 4 0 0 1-4-4ZM456 64h-55.92V32h-48v32H159.92V32h-48v32H56a23.8 23.8 0 0 0-24 23.77V144h448V87.77A23.8 23.8 0 0 0 456 64'/></svg>",wn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48m48.19 121.42 24.1 21.06-73.61 84.1-24.1-23.06ZM191.93 342.63 121.37 272 144 249.37 214.57 320Zm65 .79L185.55 272l22.64-22.62 47.16 47.21 111.13-127.17 24.1 21.06Z'/></svg>",bn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M396.31 32H264l84.19 112.26zM115.69 32l48.12 112.26L248 32zM256 74.67 192 160h128zM422.95 51.06 376.26 160H488zM89.05 51.06 23 160h112.74zM146.68 192H24l222.8 288h.53zM365.32 192 264.67 480h.53L488 192zM329.39 192H182.61L256 400z'/></svg>",vn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M272 160v147.37l64-64L358.63 266 256 368.63 153.37 266 176 243.37l64 64V160H92a12 12 0 0 0-12 12v296a12 12 0 0 0 12 12h328a12 12 0 0 0 12-12V172a12 12 0 0 0-12-12ZM240 32h32v128h-32z'/></svg>",kn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M432 208H288l32-192L80 304h144l-32 192Z'/></svg>",jn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M209 384h-37a28 28 0 0 1-28-28V152a64 64 0 1 0-64-1.16V356a92.1 92.1 0 0 0 92 92h37v55.21L294.39 416 209 328.79ZM113 64a32 32 0 1 1-32 32 32 32 0 0 1 32-32M432 360.61V156a92.1 92.1 0 0 0-92-92h-35V9.93L217.14 96 305 182.07V128h35a28 28 0 0 1 28 28v204.61a64 64 0 1 0 64 0M400 448a32 32 0 1 1 32-32 32 32 0 0 1-32 32'/></svg>",Sn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M240 240H32V32h208ZM480 240H272V32h208ZM240 480H32V272h208ZM480 480H272V272h208Z'/></svg>",Cn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M480 150 256 48 32 150l224 104zM255.71 392.95l-144.81-66.2L32 362l224 102 224-102-78.69-35.3z'/><path d='m480 256-75.53-33.53L256.1 290.6l-148.77-68.17L32 256l224 102z'/></svg>",_n="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m41.37 64 22.628-22.628L470.627 448l-22.628 22.627zM256 480a80.09 80.09 0 0 0 73.3-48H182.7a80.09 80.09 0 0 0 73.3 48M112 227.47V288l-48 64v48h268.12L115.87 183.75a236.8 236.8 0 0 0-3.87 43.72M448 352l-48-64v-60.53C400 157 372.64 95.61 304 80l-8-48h-80l-8 48a117.5 117.5 0 0 0-41.95 18.17l282 282Z'/></svg>",Nn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M256 480a80.09 80.09 0 0 0 73.3-48H182.7a80.09 80.09 0 0 0 73.3 48M400 288v-60.53C400 157 372.64 95.61 304 80l-8-48h-80l-8 48c-68.88 15.61-96 76.76-96 147.47V288l-48 64v48h384v-48Z'/></svg>",Mn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M381.25 112a48 48 0 0 0-90.5 0H48v32h242.75a48 48 0 0 0 90.5 0H464v-32ZM176 208a48.09 48.09 0 0 0-45.25 32H48v32h82.75a48 48 0 0 0 90.5 0H464v-32H221.25A48.09 48.09 0 0 0 176 208M336 336a48.09 48.09 0 0 0-45.25 32H48v32h242.75a48 48 0 0 0 90.5 0H464v-32h-82.75A48.09 48.09 0 0 0 336 336'/></svg>",Pn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><circle cx='152' cy='184' r='72'/><path d='M234 296c-28.16-14.3-59.24-20-82-20-44.58 0-136 27.34-136 82v42h150v-16.07c0-19 8-38.05 22-53.93 11.17-12.68 26.81-24.45 46-34'/><path d='M340 288c-52.07 0-156 32.16-156 96v48h312v-48c0-63.84-103.93-96-156-96'/><circle cx='340' cy='168' r='88'/></svg>",An="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48m2 96a72 72 0 1 1-72 72 72 72 0 0 1 72-72m-2 288a175.55 175.55 0 0 1-129.18-56.6C135.66 329.62 215.06 320 256 320s120.34 9.62 129.18 55.39A175.52 175.52 0 0 1 256 432'/></svg>",Ln="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m58 362.09-6.51-14.59A224 224 0 0 1 256 32h16v234.37Z'/><path d='M304 66.46v220.65L94.62 380.78A208.31 208.31 0 0 0 272 480c114.69 0 208-93.31 208-208 0-103.81-76.45-190.1-176-205.54'/></svg>",Dn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><ellipse cx='256' cy='256' rx='36' ry='35.99'/><path d='m188.4 350.8-14.62-16.44a117.91 117.91 0 0 1 0-156.71l14.62-16.43 32.87 29.24-14.62 16.43a73.93 73.93 0 0 0 0 98.25l14.62 16.44ZM323.6 350.8l-32.89-29.22 14.62-16.44a73.93 73.93 0 0 0 0-98.25l-14.62-16.43 32.87-29.24 14.62 16.43a117.91 117.91 0 0 1 0 156.71Z'/><path d='m138.24 401.76-15-16.06a189.85 189.85 0 0 1 0-259.4l15-16.07 32.14 30.05-15 16.06a145.88 145.88 0 0 0 0 199.32l15 16.06ZM373.76 401.76l-32.14-30 15-16.06a145.88 145.88 0 0 0 0-199.32l-15-16.06 32.14-30 15 16.07a189.85 189.85 0 0 1 0 259.4Z'/><path d='m430.73 447-32.79-29.33 14.66-16.39a218.2 218.2 0 0 0 0-290.56l-14.67-16.38L430.72 65l14.67 16.39a262.18 262.18 0 0 1 0 349.22ZM81.27 447 66.6 430.61a262.18 262.18 0 0 1 0-349.22L81.28 65l32.79 29.34-14.68 16.38a218.2 218.2 0 0 0 0 290.56l14.66 16.39Z'/></svg>",Tn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M380.44 32H64a32 32 0 0 0-32 32v384a32 32 0 0 0 32 32h384a32.09 32.09 0 0 0 32-32V131.56ZM112 176v-64h192v64Zm223.91 179.76a80 80 0 1 1-83.66-83.67 80.21 80.21 0 0 1 83.66 83.67'/></svg>",En="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M378 324a69.78 69.78 0 0 0-48.83 19.91L202 272.41a69.7 69.7 0 0 0 0-32.82l127.13-71.5A69.76 69.76 0 1 0 308.87 129l-130.13 73.2a70 70 0 1 0 0 107.56L308.87 383A70 70 0 1 0 378 324'/></svg>",On="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m479.07 111.36-.79-12.53-12.36-2.21c-86.5-15.52-122.61-26.74-203.33-63.2l-6.59-3-6.59 3C168.69 69.88 132.58 81.1 46.08 96.62l-12.36 2.21-.79 12.53c-3.85 61.11 4.36 118.05 24.43 169.24A349.5 349.5 0 0 0 129 393.11c53.47 56.73 110.24 81.37 121.07 85.73l6 2.41 6-2.41c10.83-4.36 67.6-29 121.07-85.73a349.5 349.5 0 0 0 71.5-112.51c20.07-51.19 28.28-108.13 24.43-169.24m-252.91 216L153.37 256l22.4-22.86 48.47 47.49 110.13-127.2 24.2 20.94Z'/></svg>",In="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='m208 512-52.38-139.62L16 320l139.62-52.38L208 128l52.38 139.62L400 320l-139.62 52.38ZM88 176l-23.57-64.43L0 88l64.43-23.57L88 0l23.57 64.43L176 88l-64.43 23.57ZM400 256l-31.11-80.89L288 144l80.89-31.11L400 32l31.11 80.89L512 144l-80.89 31.11Z'/></svg>",Bn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M128 496H48V304h80ZM352 496h-80V208h80ZM464 496h-80V96h80ZM240 496h-80V16h80Z'/></svg>",zn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M256 48C141.13 48 48 141.13 48 256c0 114.69 93.32 208 208 208 114.86 0 208-93.14 208-208 0-114.69-93.31-208-208-208m108 240H244a4 4 0 0 1-4-4V116a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v140h92a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4'/></svg>",Fn="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512' class='ionicon'><path d='M352 144h112v112' stroke-linecap='square' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path d='m48 368 144-144 96 96 160-160' stroke-linecap='square' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",Rn={"arrow-forward-sharp":gn,"bar-chart-sharp":xn,"calendar-sharp":yn,"checkmark-done-circle-sharp":wn,"diamond-sharp":bn,"download-sharp":vn,"flash-sharp":kn,"git-compare-sharp":jn,"grid-sharp":Sn,"layers-sharp":Cn,"notifications-off-sharp":_n,"notifications-sharp":Nn,"options-sharp":Mn,"people-sharp":Pn,"person-circle-sharp":An,"pie-chart-sharp":Ln,"radar-sharp":Dn,"save-sharp":Tn,"share-social-sharp":En,"shield-checkmark-sharp":On,"sparkles-sharp":In,"stats-chart-sharp":Bn,"time-sharp":zn,"trending-up-sharp":Fn},ke=new Map;function $n(e){if(!e)return"";if(ke.has(e))return ke.get(e);const n=Rn[e];if(typeof n!="string")return ke.set(e,""),"";const a=n.indexOf(","),s=a===-1?"":decodeURIComponent(n.slice(a+1));return ke.set(e,s),s}function Hn({name:e,className:n="",label:a="",...s}){const i=$n(e);if(!i)return null;const o=a?{role:"img","aria-label":a}:{"aria-hidden":"true"};return t.jsx("span",{className:`svg-icon ${n}`.trim(),dangerouslySetInnerHTML:{__html:i},...o,...s})}const ze="crs-runtime-flags-v1",se={forceLocalData:!1,allowRemoteQuestionBank:!0,enableAdvancedForecasting:!0,enablePerfTelemetry:!0};function bt(e){const n=e&&typeof e=="object"?e:{};return{forceLocalData:!!n.forceLocalData,allowRemoteQuestionBank:n.allowRemoteQuestionBank!==!1,enableAdvancedForecasting:n.enableAdvancedForecasting!==!1,enablePerfTelemetry:n.enablePerfTelemetry!==!1}}function ot(){if(typeof window>"u")return{...se};try{const e=window.localStorage.getItem(ze);if(!e)return{...se};const n=JSON.parse(e);return{...se,...bt(n)}}catch{return{...se}}}function ha(e){const n={...se,...bt(e)};if(typeof window>"u")return n;try{window.localStorage.setItem(ze,JSON.stringify(n))}catch{}try{window.dispatchEvent(new Event("crs-runtime-flags-updated"))}catch{}return n}function fa(){if(typeof window>"u")return{...se};try{window.localStorage.removeItem(ze)}catch{}try{window.dispatchEvent(new Event("crs-runtime-flags-updated"))}catch{}return{...se}}const Ie="crs-exp-assignments-v1",Wn="crs-exp-overrides-v1",ct="crs-exp-visitor-id-v1",lt="crs-exp-exposures-v1",Fe={pricing_layout_v1:{variants:[{id:"control",weight:50},{id:"pro_first",weight:50}],goals:["pricing_cta_click","handoff_export"]}};function vt(e,n){try{return e?JSON.parse(e):n}catch{return n}}function Re(e){return typeof window>"u"?{}:vt(window.localStorage.getItem(e),{})}function Un(e,n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n||{}))}catch{}}function Gn(e){return typeof window>"u"?{}:vt(window.sessionStorage.getItem(e),{})}function Vn(e,n){if(!(typeof window>"u"))try{window.sessionStorage.setItem(e,JSON.stringify(n||{}))}catch{}}function qn(e=""){let n=0;for(let a=0;a<e.length;a+=1)n=(n<<5)-n+e.charCodeAt(a),n|=0;return Math.abs(n)}function Zn(e,n,a=Fe){const s=a?.[e];if(!s||!Array.isArray(s.variants)||s.variants.length===0)return"control";const i=s.variants.map(d=>({id:String(d.id||""),weight:Number(d.weight)>0?Number(d.weight):0})).filter(d=>d.id&&d.weight>0);if(!i.length)return"control";const o=i.reduce((d,m)=>d+m.weight,0),u=qn(`${e}:${n||"default"}`)%o;let p=0;for(const d of i)if(p+=d.weight,u<p)return d.id;return i[i.length-1].id}function Yn(){if(typeof window>"u")return"server";const e=String(window.localStorage.getItem(ct)||"").trim();if(e)return e;const n=`visitor_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,9)}`;try{window.localStorage.setItem(ct,n)}catch{}return n}function Kn(e){const n=Re(Wn),a=String(n?.[e]||"").trim();return a&&Fe[e]?.variants?.some(o=>o.id===a)?a:null}function Jn(e){if(typeof window>"u")return;const n=Gn(lt),a=`${e.experimentKey}:${e.variant}`;n?.[e.experimentKey]!==a&&(Vn(lt,{...n,[e.experimentKey]:a}),A("experiment_exposure",{experiment_key:e.experimentKey,experiment_variant:e.variant,experiment_source:e.source}))}function kt(e,{autoTrack:n=!1}={}){if(!Fe[e])return{experimentKey:e,variant:"control",source:"unknown_experiment"};const s=Kn(e),i=Yn(),o=s||Zn(e,i),l=s?"override":"hash",u=Re(Ie);u?.[e]!==o&&Un(Ie,{...u,[e]:o});const p={experimentKey:e,variant:o,source:l,visitorId:i};return n&&Jn(p),p}function Te(e,n,a={}){const s=kt(e,{autoTrack:!0});return A("experiment_goal",{experiment_key:s.experimentKey,experiment_variant:s.variant,experiment_source:s.source,goal:n,...a}),s}function Qn(){return Re(Ie)}function Xn(e={}){const n={};for(const[a,s]of Object.entries(e||{}))s!=null&&(typeof s=="string"||typeof s=="number"||typeof s=="boolean")&&(n[a]=s);return n}function er(e=[],n={}){return(Array.isArray(e)?e:[]).map(a=>{let s=!1;try{s=typeof a?.check=="function"?!!a.check(n):!1}catch{s=!1}return{id:a?.id||"",name:a?.name||"",recentCutoff:Number(a?.recentCutoff)||0,cutoffRange:a?.cutoffRange||"",source:a?.source||"unknown",updatedAt:a?.updatedAt||null,eligible:s}})}function tr(e={}){return{confidenceBand:e?.confidenceBand||"Unknown",overallConfidence:Number(e?.overallConfidence)||0,score:Number(e?.score)||0,cutoff:Number(e?.cutoff)||0,gap:Number(e?.gap)||0,top:e?.top?{title:e.top.title,lane:e.top.lane,score:Number(e.top.score)||0,scoreGain:Number(e.top.scoreGain)||0,months:Number(e.top.months)||0,confidence:Number(e.top.confidence)||0,effort:e.top.effort||"Unknown"}:null,ranked:(e?.ranked||[]).slice(0,4).map(n=>({id:n.id,title:n.title,lane:n.lane,score:Number(n.score)||0,scoreGain:Number(n.scoreGain)||0,months:Number(n.months)||0,confidence:Number(n.confidence)||0,effort:n.effort||"Unknown"})),riskFlags:(e?.globalRiskFlags||[]).map(n=>({id:n.id,label:n.label,severity:n.severity}))}}function nr(e=null){return e?{readinessIndex:Number(e?.readinessIndex)||0,recommendedWindow:e?.recommendedWindow||"",recommendedOpportunityId:e?.recommendedOpportunityId||"",signals:(e?.signals||[]).slice(0,5).map(n=>({id:n.id,title:n.title,lane:n.lane,opportunityScore:Number(n.opportunityScore)||0,confidenceBand:n.confidenceBand||"Unknown",scoreDeltaNeeded:Number(n.scoreDeltaNeeded)||0,windowLabel:n.windowLabel||"",riskLevel:n.riskLevel||"unknown"})),alertTriggers:(e?.alertTriggers||[]).slice(0,4).map(n=>({id:n.id,title:n.title,trigger:n.trigger,windowLabel:n.windowLabel}))}:null}function rr(e=null){return e?{readinessScore:Number(e?.readinessScore)||0,readinessBand:e?.readinessBand||"Unknown",profileCompleteness:Number(e?.profileCompleteness)||0,blockers:(e?.blockers||[]).map(n=>({id:n.id,label:n.label,detail:n.detail})),checklist:(e?.checklist||[]).map(n=>({id:n.id,title:n.title,owner:n.owner,dueWindow:n.dueWindow,status:n.status,evidence:n.evidence}))}:null}function ar(e=null){return e?{modelLabel:e?.modelLabel||"Unknown",groundingMode:e?.groundingMode||"unknown",cards:(e?.cards||[]).map(n=>({id:n.id,prompt:n.prompt,response:n.response,confidenceBand:n.confidenceBand,quickAction:n.quickAction,evidence:Array.isArray(n.evidence)?n.evidence:[]}))}:null}function sr(e=null){return e?{workspaceId:e?.workspaceId||"",workspaceReadiness:Number(e?.workspaceReadiness)||0,readinessBand:e?.readinessBand||"Unknown",packageStatus:e?.packageStatus||"unknown",reviewChecklist:(e?.reviewChecklist||[]).map(n=>({id:n.id,label:n.label,status:n.status,detail:n.detail})),collaborationNotes:Array.isArray(e?.collaborationNotes)?e.collaborationNotes:[]}:null}function ir(e=null){return e?{percentile:Number(e?.percentile)||0,benchmarkBand:e?.benchmarkBand||"Unknown",cohort:e?.cohort||null,summary:e?.summary||"",comparison:(e?.comparison||[]).map(n=>({id:n.id,label:n.label,score:Number(n.score)||0,isUser:!!n.isUser})),leverageSignals:(e?.leverageSignals||[]).map(n=>({id:n.id,label:n.label,headroom:Number(n.headroom)||0}))}:null}function or(e={}){return{completionPct:Number(e?.completionPct)||0,completedCount:Number(e?.completedCount)||0,totalCount:Number(e?.totalCount)||0,nextBestTask:e?.nextBestTask?{id:e.nextBestTask.id,title:e.nextBestTask.title,dateWindow:e.nextBestTask.dateWindow,successMetric:e.nextBestTask.successMetric}:null,tasks:(e?.tasks||[]).map(n=>({id:n.id,title:n.title,lane:n.lane,priority:n.priority,impact:Number(n.impact)||0,dateWindow:n.dateWindow,weekWindow:n.weekWindow}))}}function cr({answers:e={},result:n={},strategy:a={},forecast:s=null,actionPlan:i={},opportunityRadar:o=null,commandCenter:l=null,copilot:u=null,collaboration:p=null,communityBenchmarks:d=null,drawData:m={},categoryInfo:g=[]}={}){const v=Number(n?.total)||0,f=Number(m?.averageCutoff)||Number(a?.cutoff)||0;return{schema:"crs_consultant_handoff_v1",generatedAt:new Date().toISOString(),appVersion:"dev",summary:{score:v,averageCutoff:f,gapToAverageCutoff:v-f,confidenceBand:a?.confidenceBand||"Unknown"},policy:n?.policy||null,profileAnswers:Xn(e),scoreBreakdown:n?.breakdown||{},scoreDetails:n?.details||{},strategy:tr(a),opportunityRadar:nr(o),commandCenter:rr(l),copilot:ar(u),collaboration:sr(p),communityBenchmarks:ir(d),forecast:s?{trendLabel:s.trendLabel,confidenceBand:s.confidenceBand,confidenceScore:Number(s.confidenceScore)||0,projectedNextCutoff:Number(s.projectedNextCutoff)||0,projectedThreeDrawAvg:Number(s.projectedThreeDrawAvg)||0,projectedDraws:Array.isArray(s.projectedDraws)?s.projectedDraws:[],invitationLikelihood:s.invitationLikelihood||"Unknown"}:null,actionPlan:or(i),dataSnapshot:{drawLastUpdated:m?.lastUpdated||null,drawSource:m?.source||null,categoryCount:Array.isArray(g)?g.length:0,categoryEligibility:er(g,e)},experimentAssignments:Qn()}}function lr(e){return String(e||"").replace(/[:]/g,"-").replace(/\..+$/,"").replace("T","_").replace("Z","")}function dr(e,{filePrefix:n="consultant-handoff"}={}){if(typeof window>"u")return!1;try{const a=JSON.stringify(e,null,2),s=new Blob([a],{type:"application/json"}),i=window.URL.createObjectURL(s),o=document.createElement("a"),l=lr(e?.generatedAt||new Date().toISOString());return o.href=i,o.download=`${n}-${l}.json`,document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i),!0}catch{return!1}}function ur(e){try{return btoa(encodeURIComponent(JSON.stringify(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")}catch{return""}}function pr(e){try{if(!e)return null;const n=String(e).replace(/-/g,"+").replace(/_/g,"/"),a=n.length%4===0?"":"=".repeat(4-n.length%4);return JSON.parse(decodeURIComponent(atob(n+a)))}catch{return null}}function mr(e){if(typeof window>"u")return"";const n=ur(e);if(!n)return"";const a=new URL(`${window.location.origin}${window.location.pathname}`);return a.searchParams.set("handoff",n),a.toString()}function ga(e=window.location.search){try{const a=new URLSearchParams(e||"").get("handoff");return pr(a)}catch{return null}}const jt="crs-saved-profiles-v1";function $e(){try{const e=localStorage.getItem(jt);if(!e)return{};const n=JSON.parse(e);return n&&typeof n=="object"?n:{}}catch{return{}}}function St(e){try{localStorage.setItem(jt,JSON.stringify(e))}catch{}}function hr(){const e=Math.random().toString(36).slice(2,8);return`prf_${Date.now().toString(36)}_${e}`}function fr(){return`${Math.random().toString(36).slice(2,10)}${Math.random().toString(36).slice(2,10)}`}function gr(){const e=$e();return Object.values(e).sort((n,a)=>String(a.updatedAt).localeCompare(String(n.updatedAt)))}function xa({id:e,name:n="",answers:a={},score:s=0,email:i="",alertOptIn:o=!1,alertToken:l=null}){const u=$e(),p=e||hr(),d=new Date().toISOString(),m=u[p],g={id:p,name:n||m?.name||`Profile ${p.slice(-4)}`,answers:a,score:s,email:i,alertOptIn:!!o,alertToken:o?l||m?.alertToken||fr():null,createdAt:m?.createdAt||d,updatedAt:d};return u[p]=g,St(u),g}function ya({reason:e="autopilot",force:n=!1}={}){const a=$e(),s=Object.entries(a||{});if(!s.length)return{status:"noop",reason:e,scanned:0,updated:0,skipped:0,policyVersion:""};let i=0,o=0,l="";const u=new Date().toISOString();for(const[p,d]of s){const m=d?.answers;if(!m||typeof m!="object"){o+=1;continue}const g=Kt(m),v=Number(g?.total||0),f=String(g?.policy?.version||"");l=f||l;const c=Number(d?.score||0),M=String(d?.policyVersion||"");(n||c!==v||M!==f)&&(a[p]={...d,score:v,policyVersion:f,policyEffectiveDate:g?.policy?.effectiveDate||"",policySource:g?.policy?.source||"",policyRecalculatedAt:u},i+=1)}return i>0&&St(a),{status:i>0?"updated":"noop",reason:e,scanned:s.length,updated:i,skipped:o,policyVersion:l,recalculatedAt:u}}const Ct="crs-90-day-action-plan-v1",_t=1440*60*1e3,dt={High:3,Medium:2,Low:1},q={impact:.34,speed:.18,confidence:.22,effort:.12,laneFit:.14},X={budgetCad:3500,weeklyHours:6,examAttempts:2,relocationPreference:"balanced"},xr=[{id:"3m",label:"3 months",months:3,gainFactor:.35},{id:"6m",label:"6 months",months:6,gainFactor:.62},{id:"12m",label:"12 months",months:12,gainFactor:.88}];function k(e,n,a){return Math.max(n,Math.min(a,e))}function yr(e,n){return`Day ${e}-${n}`}function h(e,n=0){const a=Number(e);return Number.isFinite(a)?a:n}function J(e,n=0){const a=parseInt(e,10);return Number.isFinite(a)?a:n}function le(e={}){const n=e&&typeof e=="object"?e:{},a=["balanced","province","federal"].includes(n.relocationPreference)?n.relocationPreference:X.relocationPreference;return{budgetCad:k(J(n.budgetCad,X.budgetCad),500,2e4),weeklyHours:k(J(n.weeklyHours,X.weeklyHours),2,30),examAttempts:k(J(n.examAttempts,X.examAttempts),1,8),relocationPreference:a}}function wr(e=new Date){const n=new Date(e);return n.setHours(0,0,0,0),n}function Se(e,n){return new Date(e.getTime()+n*_t)}function Be(e){try{return e.toLocaleDateString(void 0,{month:"short",day:"numeric"})}catch{return e.toISOString().slice(0,10)}}function je(e,n,a){const s=Se(e,Math.max(n-1,0)),i=Se(e,Math.max(a-1,0));return{startDateIso:s.toISOString(),endDateIso:i.toISOString(),weekWindow:`Week ${Math.ceil(n/7)}-${Math.ceil(a/7)}`,dateWindow:`${Be(s)} → ${Be(i)}`}}function br(e,n){const a=h(n);return e==="listening"?a>=8.5?10:a>=8?9:a>=7.5?8:a>=6?7:a>=5.5?6:a>=5?5:0:e==="reading"?a>=8?10:a>=7?9:a>=6.5?8:a>=6?7:a>=5?6:a>=4?5:0:a>=7.5?10:a>=7?9:a>=6.5?8:a>=6?7:a>=5.5?6:a>=5?5:0}function vr(e={}){const n=["listening","reading","writing","speaking"],a=e.firstOfficialLanguage==="french",i=n.map(o=>a?J(e[`french_${o}`],0):e.langTestType==="celpip"?J(e[`celpip_${o}`],0):br(o,e[`ielts_${o}`])).filter(o=>o>0);return i.length?Math.min(...i):0}function Z(e,n,a,s="medium"){return{id:e,label:n,detail:a,severity:s}}function kr(e){return e==="high"?10:e==="medium"?5:2}function jr(e="Medium"){return e==="Easy"?100:e==="Medium"?68:38}function Sr(e=0){return e>=76?"High":e>=56?"Medium":"Low"}function Cr(e={},n,a){const s=h(n?.total),i=a-s,o=J(e.age,0),l=vr(e),u=e.hasFrench==="yes"||e.firstOfficialLanguage==="french",p=J(e.canadianWorkExp,0),d=J(e.foreignWorkExp,0),m=l>=9?18:l>=7?46:74,g=k((o>=33?28:14)+(l<7?26:l<9?16:6)+(p===0?12:4)+(d>=3?8:3),10,90),v=[{key:"answers_accuracy",label:"Profile values are accurate and complete",confidence:e.knowsScore==="yes"?"Medium":"High"},{key:"draw_trend_stability",label:"Recent draw patterns remain directionally similar",confidence:Math.abs(i)<=20?"Medium":"Low"},{key:"execution_discipline",label:"You can sustain weekly execution cadence for 90 days",confidence:g<=45?"High":g<=65?"Medium":"Low"}],f=[];return o>=33&&f.push(Z("risk-age-decay","Age-point decay risk","Delays can reduce score as age thresholds change.",o>=38?"high":"medium")),l>0&&l<7&&f.push(Z("risk-language-floor","Language floor below CLB 7","Several lanes become weaker or inaccessible below CLB 7.","high")),u||f.push(Z("risk-no-french","No French upside yet","You may miss lower-cutoff category opportunities tied to French strength.","low")),i>40&&f.push(Z("risk-large-gap","Large score gap","A single action may not close this gap; a combination strategy is likely required.","high")),{score:s,gap:i,age:o,minLanguageClb:l,hasFrench:u,canadianWorkExp:p,foreignWorkExp:d,languageHeadroom:m,profileComplexity:g,assumptions:v,globalRiskFlags:f}}function He(e={}){const n=[e.age,e.education,e.pathway,e.canadianWorkExp,e.foreignWorkExp,e.hasFrench,e.hasPNP].join("|");let a=0;for(let s=0;s<n.length;s+=1)a=(a<<5)-a+n.charCodeAt(s),a|=0;return Math.abs(a).toString(16)}function _r(e,n,a){const s=e.category==="Language"?50+n.languageHeadroom*.45:e.category==="Provincial"?72:e.category==="Combination"?76:60,i=k(s+(e.goalReached?8:0)+(e.likelihoodPercent-50)*.35,30,95),o=[];return e.estimatedMonths>=10&&o.push(Z(`${e.id}-timeline`,"Long timeline","This lane can take substantial time before score impact materializes.","medium")),e.difficulty==="Hard"&&o.push(Z(`${e.id}-effort`,"Execution intensity","Consistent weekly effort is required to avoid plan drift.","medium")),!e.goalReached&&a>0&&o.push(Z(`${e.id}-bridge`,"May require a second lane","This lane may need a backup action to fully close your gap.","low")),{id:`path-${e.id}`,title:e.title,lane:e.category,reason:e.whyItFits,scoreGain:e.potentialGain,months:e.estimatedMonths,confidence:e.likelihoodPercent,effort:e.difficulty,estimatedCostCad:h(e.estimatedCostCad,0),examSensitive:e.category==="Language"||/language|ielts|celpip|tef|tcf|french/i.test(e.title||""),laneFit:i,riskFlags:o}}function Nr({score:e,cutoff:n,eligibleCount:a,signals:s}){const i=n-e,o=i<=0?82:i<=20?64:38,l=[];return a||l.push(Z("category-not-eligible","Not category-eligible yet","A prerequisite profile change is required before this lane can be used.","high")),i>35&&l.push(Z("category-gap","Gap still material","Category targeting helps, but the score gap remains significant.","medium")),{id:"lane-category-draws",title:"Category Draw Positioning",lane:"Category Draws",reason:a>0?`You match ${a} category stream(s). Improve targeted factors to close the category cutoff gap.`:"You are not currently category-eligible; targeted profile adjustments can unlock lower-cutoff streams.",scoreGain:k(Math.round(Math.max(i,0)*.5),0,80),months:i<=0?1:i<=20?4:8,confidence:o,effort:i<=0?"Easy":i<=20?"Medium":"Hard",estimatedCostCad:1200,examSensitive:!s.hasFrench,laneFit:k((a>0?70:35)+(s.hasFrench?8:0),25,90),riskFlags:l}}function Mr(e){if(!e)return null;const n=[];return e.matchScore<55&&n.push(Z(`province-${e.id}-fit`,"Lower province fit","Province alignment is currently moderate; stream targeting needs tighter matching.","high")),e.matchScore>=55&&e.matchScore<70&&n.push(Z(`province-${e.id}-variance`,"Selection variance","Provincial intake criteria can shift and may require profile tuning.","medium")),{id:`lane-province-${e.id}`,title:`${e.name} PNP Focus`,lane:"Provincial",reason:`${e.name} has the highest profile match in your province analysis.`,scoreGain:e.matchScore>=70?600:300,months:e.matchScore>=70?6:9,confidence:k(e.matchScore,35,88),effort:e.matchScore>=70?"Medium":"Hard",estimatedCostCad:e.matchScore>=70?3200:4200,examSensitive:!1,laneFit:k(e.matchScore+(e.matchScore>=70?6:-4),25,95),riskFlags:n}}function Pr(e={},n=0){return[{key:"coreHumanCapital",label:"Core profile factors",value:h(e.coreHumanCapital)},{key:"skillTransferability",label:"Transferability factors",value:h(e.skillTransferability)},{key:"additionalPoints",label:"Additional point factors",value:h(e.additionalPoints)},{key:"spouseFactors",label:"Spouse factors",value:h(e.spouseFactors)}].map(s=>({...s,headroom:k(100-Math.round(s.value/Math.max(n,1)*100),0,100)})).sort((s,i)=>i.headroom-s.headroom).slice(0,2)}function Ar(e,n){const a=Math.max(Math.abs(n),35),s=k(Math.round(e.scoreGain/a*100),8,100),i=k(100-e.months*11,12,100),o=k(e.confidence,12,100),l=jr(e.effort),u=k(h(e.laneFit,60),10,100),p=s*q.impact+i*q.speed+o*q.confidence+l*q.effort+u*q.laneFit,d=Array.isArray(e.riskFlags)?e.riskFlags:[],m=k(d.reduce((v,f)=>v+kr(f.severity),0),0,24),g=k(Math.round(p-m),1,100);return{...e,score:g,riskPenalty:m,scoreBreakdown:[{key:"impact",label:"Impact potential",value:s,weight:q.impact},{key:"speed",label:"Speed to value",value:i,weight:q.speed},{key:"confidence",label:"Data confidence",value:o,weight:q.confidence},{key:"effort",label:"Execution ease",value:l,weight:q.effort},{key:"laneFit",label:"Profile-lane fit",value:u,weight:q.laneFit}]}}function Lr(e={}){const n=e.effort==="Hard"?10:e.effort==="Medium"?6:3,a=h(e.months,6)<=3?2:h(e.months,6)<=6?1:0;return n+a}function Dr(e={}){const n=h(e.estimatedCostCad,0);return n>0?n:e.lane==="Provincial"?3600:e.lane==="Category Draws"?1200:e.lane==="Language"?1800:2200}function Tr(e={}){return/provincial/i.test(e.lane||"")}function Er(e,n){const a=le(n),s=[],i=Dr(e),o=Lr(e);let l=0;const u=a.budgetCad/Math.max(i,1);if(u<.75){const f=Math.min(Math.round((.75-u)*20),12);l-=f,s.push({id:"budget",label:"Budget pressure",delta:-f})}else if(u>1.35){const f=Math.min(Math.round((u-1.35)*8),5);l+=f,s.push({id:"budget",label:"Budget headroom",delta:f})}const p=a.weeklyHours-o;if(p<0){const f=Math.min(Math.abs(p)*2,10);l-=f,s.push({id:"time",label:"Time constraint",delta:-f})}else if(p>0){const f=Math.min(p,4);l+=f,s.push({id:"time",label:"Time capacity",delta:f})}if(e.examSensitive){if(a.examAttempts<=1)l-=8,s.push({id:"exam",label:"Low exam retry budget",delta:-8});else if(a.examAttempts>=3){const f=Math.min((a.examAttempts-2)*2,4);l+=f,s.push({id:"exam",label:"Exam retry flexibility",delta:f})}}const d=Tr(e);if(a.relocationPreference==="province"){const f=d?8:-3;l+=f,s.push({id:"relocation",label:"Province-focused preference",delta:f})}else if(a.relocationPreference==="federal"){const f=d?-7:4;l+=f,s.push({id:"relocation",label:"Federal-focused preference",delta:f})}const m=k(Math.round(l),-24,18),g=k(e.score+m,1,100),v=k(Math.round(70+m*2),12,99);return{...e,baseScore:e.score,score:g,constraintAdjustment:m,constraintFitScore:v,constraintFactors:s,estimatedCostCad:i,requiredWeeklyHours:o}}function Or(e){const n=new Date(e?.date||"");return Number.isNaN(n.getTime())?null:n}function Ir(e={},n=10){return[...e.generalProgram||[],...e.categoryBased||[],...e.pnpDraws||[]].map(s=>({score:h(s?.score),date:Or(s),program:s?.program||"Unknown"})).filter(s=>s.score>0&&s.date).sort((s,i)=>i.date.getTime()-s.date.getTime()).slice(0,n)}function Br(e=[]){if(!e.length)return 0;const n=e.reduce((s,i)=>s+i,0)/e.length,a=e.reduce((s,i)=>s+(i-n)**2,0)/e.length;return Math.sqrt(a)}function Nt(e=0){return e>=75?"High":e>=55?"Medium":"Low"}function Ee({scoreGap:e=0,volatility:n=0,confidence:a=60}){const s=k((e+80)/160,0,1),i=k(h(n)/120,0,.26),o=k(h(a,60)/100,0,1)*.2,l=s*.72+o-i;return k(l,.02,.98)}function zr({forecast:e,averageCutoff:n,horizonMonths:a}){if(!e)return Math.round(h(n,520));const s=h(e.projectedNextCutoff,h(n,520)),i=h(e.slopePerDraw,0),o=Math.max(Math.round(a/2),1);return Math.round(k(s+i*Math.max(o-1,0),300,800))}function Fr(e=0){return e>=70?"High":e>=45?"Medium":"Low"}function Rr({strategy:e,forecast:n,actionPlan:a,averageCutoff:s,userScore:i}){const o=h(i,h(e?.score,0)),l=Math.max(h(e?.top?.scoreGain,0),0),u=k(h(a?.completionPct,0),0,100),p=k(u/100*.55+.45,.4,1),d=h(n?.volatility,14),m=h(n?.confidenceScore,e?.overallConfidence||58),g=e?.top?.title||"Primary strategy lane",v=xr.map(j=>{const C=zr({forecast:n,averageCutoff:s,horizonMonths:j.months}),T=Math.round(l*j.gainFactor*p),D=o+T,W=Math.round(D-C),L=Ee({scoreGap:W,volatility:d,confidence:m}),Y=Ee({scoreGap:W+Math.max(Math.round(l*.35),8),volatility:d*.75,confidence:m+8}),ee=Ee({scoreGap:W-Math.max(Math.round(l*.45),10),volatility:d*1.25,confidence:m-10}),F=Math.round(L*100),te=Math.round(Y*100),ne=Math.round(ee*100),_=k(Math.round(26+d*.8-m*.18),8,34),R=k(Math.round(F-_/2),1,99),G=k(Math.round(F+_/2),1,99);return{id:j.id,label:j.label,months:j.months,projectedCutoff:C,expectedScore:D,expectedGain:T,scoreGap:W,baseProbabilityPct:F,bestProbabilityPct:te,worstProbabilityPct:ne,chanceBand:Fr(F),confidenceInterval:{lowPct:R,highPct:G,uncertaintyPct:_}}}),c=[...v].sort((j,C)=>C.baseProbabilityPct!==j.baseProbabilityPct?C.baseProbabilityPct-j.baseProbabilityPct:j.months-C.months)[0]||v[0]||null,M=c?.id||"6m",N=Nt(m),x=[{id:"top_lane_gain",label:`${g} expected gain`,value:`+${Math.round(l)} pts potential`,influence:l>=20?"positive":"neutral"},{id:"execution_cadence",label:"Execution cadence",value:`${u}% action-plan completion`,influence:u>=55?"positive":u>=25?"neutral":"negative"},{id:"draw_volatility",label:"Draw volatility pressure",value:`${Number(d).toFixed(2)} volatility`,influence:d<=12?"positive":d<=24?"neutral":"negative"}];return{generatedAt:new Date().toISOString(),confidenceBand:N,recommendedHorizonId:M,topLane:g,horizons:v,keyDrivers:x,summary:c?`Best current horizon: ${c.label} with ${c.baseProbabilityPct}% base invitation probability.`:"Digital twin is preparing probability projections."}}function $r({activeDraws:e,userScore:n,baseConfidence:a=60}){const s=Ir(e,10);if(!s.length)return null;const i=s[0],o=[...s].reverse(),l=o[0],u=o[o.length-1],p=o.length,d=p>1?(u.score-l.score)/(p-1):0,m=i.score,g=Math.round(k(m+d,300,800)),v=Math.round(k(g+d,300,800)),f=Math.round(k(v+d,300,800)),c=Math.round((g+v+f)/3),M=Br(s.map(L=>L.score)),N=i.date,x=N?Math.floor((Date.now()-N.getTime())/_t):999;let j=h(a,60);j+=Math.min(p*3,18),j-=Math.min(M*1.2,24),x<=2?j+=5:x<=7?j+=1:x>14&&(j-=9),j=k(Math.round(j),20,92);const C=d>1.5?"rising":d<-1.5?"falling":"stable",T=C==="rising"?"Cutoff trend is rising":C==="falling"?"Cutoff trend is falling":"Cutoff trend is stable",D=h(n)-g,W=D>=20?"High":D>=0?"Medium":"Low";return{sampleSize:p,volatility:Number(M.toFixed(2)),slopePerDraw:Number(d.toFixed(2)),projectedNextCutoff:g,projectedThreeDrawAvg:c,projectedDraws:[g,v,f],trendDirection:C,trendLabel:T,confidenceScore:j,confidenceBand:Nt(j),invitationLikelihood:W,userGapToNext:D,latestObservedCutoff:m,latestObservedProgram:i.program,latestObservedDateIso:N?.toISOString()||""}}function Hr({answers:e,result:n,averageCutoff:a,categoryInfo:s=[],provinces:i=[],eligibleCategoryCount:o=Number.NaN,optimizerConstraints:l=X}){const u=le(l),p=h(n?.total),d=h(a,520),m=d-p,g=Cr(e,n,d),f=(Jt(e,n,{averageCutoff:d}).plans||[]).slice(0,2).map(_=>_r(_,g,m)),c=h(o,Number.NaN),M=Number.isFinite(c)?Math.max(Math.round(c),0):s.filter(_=>typeof _?.check=="function"&&_.check(e)).length,N=Nr({score:p,cutoff:d,eligibleCount:M,signals:g}),x=Mr((i||[])[0]||null),C=[...f,N,x].filter(Boolean).map(_=>Ar(_,m)).map(_=>Er(_,u)).sort((_,R)=>R.score-_.score).slice(0,4),T=C[0]||null,D=C[1]||null,W=Pr(n?.breakdown,p),L=[...g.globalRiskFlags||[],...C.slice(0,2).flatMap(_=>_.riskFlags||[])],Y=Object.values(L.reduce((_,R)=>(R?.id&&(_[R.id]||(_[R.id]=R)),_),{})).slice(0,5),ee=C.slice(0,2).map(_=>k(_.confidence-_.riskPenalty,0,100)),F=ee.length?Math.round(ee.reduce((_,R)=>_+R,0)/ee.length):36,te=Sr(F),ne=T?`Primary lane: ${T.title}. Estimated gain ${T.scoreGain} points in ~${T.months} months (${te.toLowerCase()} confidence).`:"No strong lane detected yet. Start by improving language and category eligibility.";return{score:p,cutoff:d,gap:m,ranked:C,top:T,nextBest:D,bottlenecks:W,assumptions:g.assumptions,globalRiskFlags:Y,overallConfidence:F,confidenceBand:te,profileSignals:{minLanguageClb:g.minLanguageClb,profileComplexity:g.profileComplexity,languageHeadroom:g.languageHeadroom},optimizerConstraints:u,scoreWeights:q,guidanceSummary:ne}}function Mt(e="in_progress"){return e==="ready"?100:e==="blocked"?28:62}function Wr(e={}){const n=String(e.lane||"").toLowerCase();return n.includes("provincial")?"Shortlist province streams and prep EOI documents this week.":n.includes("category")?"Align profile to category thresholds and track next category rounds.":n.includes("language")?"Book exam slot and run a focused weekly language sprint.":"Execute the next milestone from your primary lane playbook."}function Ur(e={},n=0){const a=String(e.lane||"").toLowerCase();let s=a.includes("provincial")?45:a.includes("category")?21:28;const i=h(e.months,6);return i<=3&&(s-=6),i>=9&&(s+=10),n>35&&(s+=7),n<=5&&(s-=3),k(Math.round(s),10,90)}function Gr(e=0){return e<=14?"Next 2 weeks":e<=30?"Next 30 days":e<=60?"Next 1-2 months":"Next quarter"}function de(e=0){return e>=78?"High":e>=56?"Medium":"Low"}function Vr({strategy:e,forecast:n=null,averageCutoff:a=0,userScore:s=0,eligibleCategoryCount:i=0}){const o=Array.isArray(e?.ranked)?e.ranked:[],l=h(s,h(e?.score,0)),u=h(a,h(e?.cutoff,520)),p=Math.max(Math.round(u-l),0),d=h(n?.confidenceScore,h(e?.overallConfidence,58)),m=n?.trendDirection||"stable",g=o.slice(0,4).map((x,j)=>{const C=Ur(x,p),T=Math.max(u-(l+h(x.scoreGain,0)),0),D=k(100-Math.round(T*1.7),12,100),W=k(Math.round(h(x.score,0)*.54+h(x.constraintFitScore,60)*.18+d*.18+D*.1-h(x.riskPenalty,0)*.35),1,99),L=(x.riskFlags||[]).some(Y=>Y.severity==="high")?"high":(x.riskFlags||[]).some(Y=>Y.severity==="medium")?"medium":"low";return{id:`opportunity-${x.id||j}`,title:x.title,lane:x.lane,whyNow:x.reason,opportunityScore:W,confidenceBand:de(W),scoreDeltaNeeded:Math.round(T),windowDays:C,windowLabel:Gr(C),trendDirection:m,nextAction:Wr(x),riskLevel:L}}),v=i>0?[{id:"opportunity-category-eligibility",title:"Category-eligible window",lane:"Category Draws",whyNow:`You currently match ${i} category stream(s), which can create faster draw pathways.`,opportunityScore:k(58+i*6-Math.min(p,25),28,92),confidenceBand:i>=3?"High":"Medium",scoreDeltaNeeded:Math.max(p-12,0),windowDays:p<=15?18:28,windowLabel:p<=15?"Immediate window":"Next 30 days",trendDirection:m,nextAction:"Prioritize category-specific actions and monitor nearest category rounds.",riskLevel:p>30?"medium":"low"}]:[],f=[...g,...v].sort((x,j)=>j.opportunityScore-x.opportunityScore).slice(0,5),c=f[0]||null,M=f.length?Math.round(f.slice(0,3).reduce((x,j)=>x+j.opportunityScore,0)/Math.min(f.length,3)):0,N=f.slice(0,3).map(x=>({id:`trigger-${x.id}`,title:x.title,trigger:x.scoreDeltaNeeded<=0?"Activate immediately when next draw opens.":`Activate when remaining gap is ≤ ${Math.max(x.scoreDeltaNeeded-5,0)} points.`,windowLabel:x.windowLabel}));return{generatedAt:new Date().toISOString(),readinessIndex:M,recommendedOpportunityId:c?.id||"",recommendedWindow:c?.windowLabel||"No opportunity window detected",trendDirection:m,summary:c?`${c.title} is your best near-term opportunity (${c.opportunityScore}/100) in the ${c.windowLabel.toLowerCase()}.`:"Opportunity radar is waiting for additional profile signals.",signals:f,alertTriggers:N}}function qr(e={}){const n=["age","education","pathway","canadianWorkExp","foreignWorkExp","langTestType"],a=n.filter(s=>{const i=e?.[s];return i==null?!1:typeof i=="string"?i.trim()!=="":!0}).length;return n.length>0?Math.round(a/n.length*100):0}function Zr({actionPlan:e,strategy:n,opportunityRadar:a,profileCompleteness:s,gap:i}){const o=Array.isArray(e?.tasks)?e.tasks:[],l=h(e?.completedCount,0)>0,u=!!n?.nextBest,p=Array.isArray(a?.signals)&&a.signals.length>0,d=s>=80?"ready":s>=55?"in_progress":"blocked",m=s>=85?"ready":s>=60?"in_progress":"blocked",g=u?"ready":i>20?"blocked":"in_progress",v=p?"ready":"in_progress";return[{id:"cmd-baseline",title:"Lock baseline profile + target score",owner:"Candidate",dueWindow:(o.find(c=>c.priority==="High")||o[0])?.dateWindow||"This week",status:l?"ready":d,evidence:l?"At least one high-priority plan task completed.":"Save baseline and confirm target delta."},{id:"cmd-primary-lane",title:`Execute primary lane: ${n?.top?.title||"Top strategy lane"}`,owner:"Candidate",dueWindow:n?.top?.months?`~${n.top.months} months`:"Next 30 days",status:l?"in_progress":"blocked",evidence:n?.top?.reason||"Primary lane rationale unavailable."},{id:"cmd-doc-pack",title:"Prepare application document command pack",owner:"Candidate + Consultant",dueWindow:"Days 30-60",status:m,evidence:`Profile completeness ${s}%.`},{id:"cmd-fallback",title:"Activate backup lane contingency",owner:"Consultant",dueWindow:"Before day 60",status:g,evidence:u?`Backup lane ready: ${n?.nextBest?.title}.`:"Backup lane not selected yet."},{id:"cmd-monitor",title:"Monitor upcoming draw windows and trigger rules",owner:"Candidate",dueWindow:a?.recommendedWindow||"Weekly",status:v,evidence:p?`${a?.signals?.length||0} opportunity signal(s) detected.`:"No radar opportunity signals detected yet."}]}function Yr({answers:e,result:n,strategy:a,actionPlan:s,opportunityRadar:i}){const o=h(n?.total,h(a?.score,0)),l=h(a?.cutoff,0),u=Math.max(l-o,0),p=qr(e),d=Zr({actionPlan:s,strategy:a,opportunityRadar:i,profileCompleteness:p,gap:u}),m=[];u>35&&m.push({id:"blocker-gap",label:"Large score gap",detail:`Gap remains ${Math.round(u)} points.`}),(a?.profileSignals?.minLanguageClb||0)>0&&(a?.profileSignals?.minLanguageClb||0)<7&&m.push({id:"blocker-language-floor",label:"Language floor below CLB 7",detail:"Language score floor can limit lane viability."}),p<60&&m.push({id:"blocker-profile-completeness",label:"Profile completeness is low",detail:`Completeness is ${p}%; fill missing profile fields.`});const g=d.length?Math.round(d.reduce((f,c)=>f+Mt(c.status),0)/d.length):0,v=k(Math.round(g*.45+h(s?.completionPct,0)*.35+h(a?.overallConfidence,0)*.2-Math.min(m.length*6,18)),0,100);return{generatedAt:new Date().toISOString(),readinessScore:v,readinessBand:de(v),blockers:m,profileCompleteness:p,checklist:d,summary:v>=75?"Application command center is in strong shape for near-term execution.":v>=55?"Application command center is progressing, with a few blockers to clear.":"Application command center needs foundational fixes before aggressive execution."}}function Kr({strategy:e,forecast:n,digitalTwin:a,commandCenter:s,opportunityRadar:i}){return[`Top lane: ${e?.top?.title||"N/A"} (${h(e?.top?.score,0)}/100)`,`Confidence: ${e?.confidenceBand||"Unknown"} (${h(e?.overallConfidence,0)}/100)`,`Forecast next cutoff: ${h(n?.projectedNextCutoff,h(e?.cutoff,0))}`,`Digital twin recommendation: ${(a?.recommendedHorizonId||"n/a").toUpperCase?.()||"N/A"}`,`Command readiness: ${h(s?.readinessScore,0)}/100`,`Opportunity radar top window: ${i?.recommendedWindow||"N/A"}`]}function Jr({strategy:e,forecast:n,actionPlan:a,digitalTwin:s,commandCenter:i,opportunityRadar:o}){const l=a?.nextBestTask,u=e?.top,p=o?.signals?.[0],d=Kr({strategy:e,forecast:n,digitalTwin:s,commandCenter:i,opportunityRadar:o}),m=[{id:"copilot-weekly-focus",prompt:"What should I execute this week?",response:l?`Execute "${l.title}" first, then continue "${u?.title||"your primary lane"}".`:`Prioritize "${u?.title||"your primary lane"}" this week and close one blocker.`,confidenceBand:de(h(e?.overallConfidence,0)),evidence:[d[0],`Next task: ${l?.title||"none"}`,`Action-plan completion: ${h(a?.completionPct,0)}%`],quickAction:"section-90-day-plan"},{id:"copilot-gap-clarity",prompt:"How close am I to the likely draw threshold?",response:`Your current gap is ${Math.round(Math.max(h(e?.gap,0),0))} points versus the average cutoff snapshot.`,confidenceBand:de(h(n?.confidenceScore,h(e?.overallConfidence,0))),evidence:[`Current score: ${h(e?.score,0)}`,`Cutoff reference: ${h(e?.cutoff,0)}`,`Forecast next cutoff: ${h(n?.projectedNextCutoff,h(e?.cutoff,0))}`],quickAction:"section-forecast"},{id:"copilot-opportunity-window",prompt:"Where is the fastest opportunity window?",response:p?`${p.title} is the top opportunity (${p.opportunityScore}/100) in the ${p.windowLabel.toLowerCase()}.`:"No high-confidence radar window yet; continue strengthening your top lane.",confidenceBand:p?.confidenceBand||"Low",evidence:[`Radar readiness index: ${h(o?.readinessIndex,0)}/100`,`Recommended window: ${o?.recommendedWindow||"none"}`,`Top lane fit: ${h(u?.constraintFitScore,0)}/100`],quickAction:"section-opportunity-radar"},{id:"copilot-risk-control",prompt:"What is my biggest execution risk right now?",response:i?.blockers?.[0]?`${i.blockers[0].label}. Address this before scaling to secondary lanes.`:"No major blockers detected. Keep execution cadence and monitor draw updates.",confidenceBand:de(h(i?.readinessScore,0)),evidence:[`Command readiness: ${h(i?.readinessScore,0)}/100`,`Blocker count: ${i?.blockers?.length||0}`,`Global risk flags: ${e?.globalRiskFlags?.length||0}`],quickAction:"section-command-center"}];return{generatedAt:new Date().toISOString(),modelLabel:"Grounded Strategy Copilot",groundingMode:"deterministic_rulepack_v1",cards:m,evidence:d}}function Qr({answers:e,result:n,strategy:a,actionPlan:s,commandCenter:i,copilot:o}){const l=`ws-${He(e).slice(0,10)}`,u=[{id:"collab-policy",label:"Policy snapshot attached",status:n?.policy?.version?"ready":"blocked",detail:n?.policy?.version?`Using ${n.policy.version} (${n.policy.source||"unknown source"})`:"No policy snapshot found in result payload."},{id:"collab-lane",label:"Top lane rationale documented",status:a?.top?.reason?"ready":"in_progress",detail:a?.top?.reason||"Top lane rationale missing."},{id:"collab-action-plan",label:"Action milestones assigned",status:(s?.tasks?.length||0)>=3?"ready":"in_progress",detail:`${s?.tasks?.length||0} tasks available for consultant review.`},{id:"collab-copilot",label:"Grounded advisory briefs prepared",status:(o?.cards?.length||0)>=3?"ready":"in_progress",detail:`${o?.cards?.length||0} copilot brief(s) generated.`}],p=u.length?Math.round(u.reduce((g,v)=>g+Mt(v.status),0)/u.length):0,d=k(Math.round(p*.5+h(i?.readinessScore,0)*.25+h(s?.completionPct,0)*.25),0,100),m=["Attach latest language test receipts and booking confirmations.","Highlight any province-specific ties or mobility constraints.","Confirm which lane is fallback if primary timeline slips by >20%."];return{generatedAt:new Date().toISOString(),workspaceId:l,workspaceReadiness:d,readinessBand:de(d),packageStatus:d>=72?"review_ready":d>=52?"needs_follow_up":"draft",reviewChecklist:u,collaborationNotes:m}}function Xr(e=0){return e>=90?"Top decile":e>=75?"Upper quartile":e>=50?"Above median":e>=30?"Emerging tier":"Early tier"}function ea({answers:e,result:n,strategy:a}){const s=h(n?.total,h(a?.score,0)),i=J(e?.age,30),o=String(e?.education||""),l=h(a?.profileSignals?.minLanguageClb,0),u=J(e?.canadianWorkExp,0),p=e?.hasFrench==="yes"||e?.firstOfficialLanguage==="french",d={secondary:0,one_year_post:12,two_year_post:18,bachelors:26,two_or_more:34,masters:45,doctoral:52}[o]||22,m=i>=39?-20:i>=35?-10:i<=24?-8:0,g=l>=9?38:l>=7?24:l>=5?10:0,v=k(u*8,0,24),f=p?18:0,c=Math.round(460+d+m+g+v+f),M=c+28,N=c+52,x=k(Math.round(50+(s-c)/2.1),1,99),j=Xr(x),C=[{id:"benchmark-p50",label:"Cohort median (P50)",score:c},{id:"benchmark-p75",label:"Upper quartile (P75)",score:M},{id:"benchmark-p90",label:"Top decile (P90)",score:N},{id:"benchmark-user",label:"Your current score",score:s,isUser:!0}],T=(a?.bottlenecks||[]).map(D=>({id:`benchmark-lever-${D.key}`,label:D.label,headroom:h(D.headroom,0)}));return{generatedAt:new Date().toISOString(),percentile:x,benchmarkBand:j,cohort:{ageBand:i<25?"18-24":i<30?"25-29":i<35?"30-34":i<40?"35-39":"40+",educationTier:o||"unknown",languageFloor:l},comparison:C,leverageSignals:T,summary:`You are in the ${j.toLowerCase()} at approximately P${x} against an anonymized peer cohort baseline.`}}function ta({answers:e,result:n,suggestions:a=[],averageCutoff:s,activeDraws:i,categoryInfo:o=[],provinces:l=[],progress:u={},enableAdvancedForecasting:p=!1,eligibleCategoryCount:d=Number.NaN,optimizerConstraints:m=X}){const g=Hr({answers:e,result:n,averageCutoff:s,categoryInfo:o,provinces:l,eligibleCategoryCount:d,optimizerConstraints:m}),v=na({suggestions:a,strategy:g,scoreGap:Math.max((s||0)-(n?.total||0),0),progress:u}),f=p?$r({activeDraws:i,userScore:n?.total||0,baseConfidence:g.overallConfidence}):null,c=Rr({strategy:g,forecast:f,actionPlan:v,averageCutoff:s,userScore:n?.total||0}),M=Vr({strategy:g,forecast:f,averageCutoff:s,userScore:n?.total||0,eligibleCategoryCount:d}),N=Yr({answers:e,result:n,strategy:g,actionPlan:v,opportunityRadar:M}),x=Jr({strategy:g,forecast:f,actionPlan:v,digitalTwin:c,commandCenter:N,opportunityRadar:M}),j=Qr({answers:e,result:n,strategy:g,actionPlan:v,commandCenter:N,copilot:x}),C=ea({answers:e,result:n,strategy:g});return{strategy:g,actionPlan:v,forecast:f,digitalTwin:c,opportunityRadar:M,commandCenter:N,copilot:x,collaboration:j,communityBenchmarks:C}}function oe(e,n,a,s,i,o,l,u="Medium",p,d={}){const{startDateIso:m,endDateIso:g,weekWindow:v,dateWindow:f}=je(p,s,i);return{id:e,title:n,rationale:a,window:yr(s,i),dayFrom:s,dayTo:i,impact:o,lane:l,priority:u,startDateIso:m,endDateIso:g,weekWindow:v,dateWindow:f,successMetric:d.successMetric||"Task completed with verified profile update.",checkpoint:d.checkpoint||"Run a score recalculation and note delta.",dependencies:d.dependencies||[],cadence:d.cadence||"3 focused sessions per week"}}function na({suggestions:e=[],strategy:n,scoreGap:a=0,progress:s={}}){const i=e[1],o=n?.top?.title||"Profile Optimization",l=Math.max(h(a),0),u=wr(new Date),p=[oe("plan-baseline","Lock baseline and target score",`Set a concrete target and freeze your baseline profile to avoid random changes. Current gap: ${l} points.`,1,7,0,o,"High",u,{successMetric:"Target score and top lane documented; baseline snapshot saved.",checkpoint:"Save profile with date tag and score target.",cadence:"One 45-minute planning block + one review"}),oe("plan-primary-lane",`Execute primary lane: ${o}`,n?.top?.reason||"Follow the highest-impact lane identified by optimizer.",8,30,n?.top?.scoreGain||10,o,"High",u,{successMetric:`Deliver at least 60% of ${o} milestones.`,checkpoint:"Verify measurable progress (test booking, docs, submissions, etc.)."}),oe("plan-secondary-lane",i?`Secondary boost: ${i.title}`:"Secondary boost: language and profile precision",i?.description||"Add one additional improvement path to reduce draw uncertainty.",24,50,i?.potentialGain||8,i?.title||"Secondary path","Medium",u,{successMetric:"Secondary lane started with first concrete deliverable completed.",checkpoint:"Compare score delta before/after secondary-lane kickoff.",dependencies:["plan-primary-lane"]}),oe("plan-document-pack","Prepare immigration document pack","Collect and verify key documents (identity, education, work proofs, test reports, proof-of-funds readiness).",35,68,0,"Readiness","High",u,{successMetric:"Core document checklist reaches 90% readiness.",checkpoint:"Review missing docs and issue dates.",cadence:"Two short admin sessions weekly"}),oe("plan-risk-buffer","Activate fallback lane if progress stalls","If progress velocity is below target, start a backup action immediately (e.g., category-specific adjustment or province-first route).",55,80,6,"Fallback Control","Medium",u,{successMetric:"Fallback lane is selected and started within 7 days of stall signal.",checkpoint:"Mark stall trigger if expected gain is short by 20%+.",dependencies:["plan-primary-lane"]}),oe("plan-profile-audit","Profile audit and draw readiness check","Re-evaluate score vs latest draws and category cutoffs. Trigger fallback lane if gap remains above 15 points.",75,90,0,"Risk Control","High",u,{successMetric:"Final 90-day readiness review completed with go/no-go decision.",checkpoint:"Capture current score, active cutoff delta, and next 30-day plan.",dependencies:["plan-document-pack"]})],d=[{label:"Days 1-30",objective:"Baseline lock + launch primary lane",expectedGain:p[1].impact,dateWindow:je(u,1,30).dateWindow},{label:"Days 31-60",objective:"Add secondary lane + document readiness",expectedGain:p[2].impact,dateWindow:je(u,31,60).dateWindow},{label:"Days 61-90",objective:"Fallback control + final draw readiness review",expectedGain:p[4].impact,dateWindow:je(u,61,90).dateWindow}],m=p.filter(N=>!!s[N.id]).length,g=p.length,v=g>0?Math.round(m/g*100):0,f=[...p].filter(N=>!s[N.id]).sort((N,x)=>{const j=dt[x.priority]-dt[N.priority];return j!==0?j:N.dayFrom-x.dayFrom})[0]||null,c=v>=100?"All action-plan tasks are complete. Keep a weekly score monitor to stay draw-ready.":f?`Next best task: ${f.title} (${f.dateWindow}).`:"Continue progressing through the plan in order of priority.",M=[14,30,60,90].map(N=>{const x=Se(u,N-1);return{day:N,iso:x.toISOString(),label:Be(x)}});return{tasks:p,milestones:d,completedCount:m,totalCount:g,completionPct:v,nextBestTask:f,completionGuidance:c,calendar:{planStartIso:u.toISOString(),planEndIso:Se(u,89).toISOString(),reviewDates:M}}}function ut(e={}){if(typeof window>"u")return{};const n=`${Ct}:${He(e)}`;try{const a=window.localStorage.getItem(n);return a?JSON.parse(a):{}}catch{return{}}}function ra(e={},n={}){if(typeof window>"u")return;const a=`${Ct}:${He(e)}`;try{window.localStorage.setItem(a,JSON.stringify(n||{}))}catch{}}const aa=[{key:"save_profile",label:"Save profile"},{key:"open_opportunity_radar",label:"Open opportunity radar"},{key:"open_command_center",label:"Open command center"},{key:"open_forecast",label:"Open forecast"},{key:"open_digital_twin",label:"Open digital twin"},{key:"open_90_day_plan",label:"Open 90-day plan"},{key:"open_optimizer",label:"Open optimizer"},{key:"open_grounded_copilot",label:"Open grounded copilot"},{key:"open_collaboration_workspace",label:"Open collaboration workspace"},{key:"open_community_benchmarks",label:"Open community benchmarks"},{key:"export_consultant_file",label:"Export consultant file"},{key:"copy_handoff_share_link",label:"Copy handoff share link"}];function pt({value:e}){const n=e==="High"?"priority-high":e==="Medium"?"priority-medium":"priority-low";return t.jsx("span",{className:`priority-badge ${n}`,children:e})}function mt({value:e}){const n=e==="Easy"?"effort-easy":e==="Medium"?"effort-medium":"effort-hard";return t.jsx("span",{className:`effort-badge ${n}`,children:e})}function Oe({value:e}){const n=e==="high"?"risk-high":e==="medium"?"risk-medium":"risk-low";return t.jsx("span",{className:`risk-badge ${n}`,children:e})}function sa(e=""){return e==="High"?"assumption-high":e==="Medium"?"assumption-medium":"assumption-low"}function ht(e="in_progress"){return e==="ready"?"command-ready":e==="blocked"?"command-blocked":"command-progress"}function ia(e){return e==="free"?"Free":"Pro Tracking"}function ce(e,n=null){if(typeof window>"u")return n;try{const a=window.localStorage.getItem(e);return a?JSON.parse(a):n}catch{return n}}function me(e,n){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(n))}catch{}}function oa(e={}){const n=JSON.stringify(e||{});let a=0;for(let s=0;s<n.length;s+=1)a=(a<<5)-a+n.charCodeAt(s),a|=0;return Math.abs(a).toString(16)}function ca({answers:e,result:n,suggestions:a,averageCutoff:s,activeDraws:i,activeCategoryInfo:o,provinces:l,drawFreshness:u,categoryFreshness:p,saveStatus:d,activeNavigatorTab:m="save_profile",onNavigatorTabChange:g,onJumpToSection:v,onOpenAccount:f}){const{t:c}=en(),[M,N]=w.useState(()=>ot()),[x,j]=w.useState(()=>({experimentKey:"pricing_layout_v1",variant:"control",source:"init"})),[C,T]=w.useState(()=>ut(e)),D=w.useRef(null),W=w.useRef(0),[L,Y]=w.useState(null),ee=w.useRef(""),F=w.useMemo(()=>oa(e),[e]),te=w.useMemo(()=>`crs-last-visit-snapshot-v1:${F}`,[F]),ne=w.useMemo(()=>`crs-action-reminders-v1:${F}`,[F]),_=w.useMemo(()=>`crs-optimizer-constraints-v1:${F}`,[F]),R=w.useMemo(()=>`crs-command-center-checklist-v1:${F}`,[F]),[G,We]=w.useState(null),[Ue,Ge]=w.useState(()=>ce(ne,{})||{}),[Ve,qe]=w.useState(()=>ce(R,{})||{}),[Ce,_e]=w.useState(()=>le(X)),[ie,he]=w.useState(""),[Ze,Ye]=w.useState("6m"),Ke=w.useMemo(()=>o.filter(r=>typeof r?.check=="function"&&r.check(e)).length,[o,e]);w.useEffect(()=>{T(ut(e))},[e]),w.useEffect(()=>{Ge(ce(ne,{})||{})},[ne]),w.useEffect(()=>{qe(ce(R,{})||{})},[R]),w.useEffect(()=>{const r=ce(_,X);_e(le(r))},[_]),w.useEffect(()=>{const r=()=>N(ot());return window.addEventListener("crs-runtime-flags-updated",r),()=>window.removeEventListener("crs-runtime-flags-updated",r)},[]),w.useEffect(()=>{j(kt("pricing_layout_v1",{autoTrack:!0}))},[]);const Ne=w.useMemo(()=>({answers:e,result:n,suggestions:a,averageCutoff:s,activeDraws:i,provinces:l,progress:C,enableAdvancedForecasting:M.enableAdvancedForecasting,eligibleCategoryCount:Ke,optimizerConstraints:Ce}),[i,e,s,Ke,Ce,C,l,n,M.enableAdvancedForecasting,a]);w.useEffect(()=>{let r=!1;const b=()=>{r||Y(ta(Ne))};if(typeof Worker>"u")return b(),()=>{r=!0};try{D.current||(D.current=new Worker(new URL("/assets/strategy.worker-BRx3o1ZF.js",import.meta.url),{type:"module"}));const S=D.current,V=W.current+=1,H=ve=>{const ae=ve?.data||{};if(!(r||ae.id!==V)){if(ae.status==="ok"&&ae.data){Y(ae.data);return}b()}},be=()=>{r||b()};return S.addEventListener("message",H),S.addEventListener("error",be),S.postMessage({id:V,input:Ne}),()=>{r=!0,S.removeEventListener("message",H),S.removeEventListener("error",be)}}catch{return b(),()=>{r=!0}}},[Ne]),w.useEffect(()=>()=>{D.current?.terminate?.(),D.current=null},[]);const Je=w.useMemo(()=>({score:Number(n?.total)||0,cutoff:Number(s)||0,gap:Math.max((Number(s)||0)-(Number(n?.total)||0),0),ranked:[],top:null,nextBest:null,bottlenecks:[],assumptions:[],globalRiskFlags:[],overallConfidence:0,confidenceBand:"Low",profileSignals:{profileComplexity:0,minLanguageClb:0,languageHeadroom:0},guidanceSummary:"Preparing strategic insights..."}),[s,n?.total]),Qe=w.useMemo(()=>({tasks:[],milestones:[],completedCount:0,totalCount:0,completionPct:0,nextBestTask:null,completionGuidance:"Preparing action plan...",calendar:{reviewDates:[]}}),[]),y=w.useMemo(()=>L?.strategy||Je,[L?.strategy,Je]),P=w.useMemo(()=>L?.actionPlan||Qe,[Qe,L?.actionPlan]),E=L?.forecast||null,B=L?.digitalTwin||null,O=L?.opportunityRadar||null,I=L?.commandCenter||null,K=L?.copilot||null,$=L?.collaboration||null,z=L?.communityBenchmarks||null,fe=B?.recommendedHorizonId||"",re=w.useMemo(()=>Array.isArray(B?.horizons)?B.horizons:[],[B?.horizons]),U=w.useMemo(()=>re.find(r=>r.id===Ze)||re[0]||null,[re,Ze]),Pt=P.completedCount||0,At=P.totalCount||P.tasks.length,Me=P.completionPct||0,ge=w.useMemo(()=>(I?.checklist||[]).map(r=>{const b=!!Ve[r.id];return{...r,userMarkedDone:b,effectiveStatus:b?"ready":r.status}}),[I?.checklist,Ve]),Lt=ge.filter(r=>r.effectiveStatus==="ready").length;w.useEffect(()=>{if(!L?.strategy)return;const r=ce(te,null),b={score:Number(y.score)||0,cutoff:Number(y.cutoff)||0,confidence:Number(y.overallConfidence)||0,updatedAt:new Date().toISOString()};r&&Number.isFinite(Number(r.score))?We({scoreDelta:b.score-(Number(r.score)||0),cutoffDelta:b.cutoff-(Number(r.cutoff)||0),confidenceDelta:b.confidence-(Number(r.confidence)||0),previousUpdatedAt:r.updatedAt||""}):We(null),me(te,b)},[L?.strategy,te,y.cutoff,y.overallConfidence,y.score]),w.useEffect(()=>{fe&&fe&&Ye(fe)},[fe]),w.useEffect(()=>{if(!B)return;const r=`${B.generatedAt||""}:${B.recommendedHorizonId||""}:${re.length}`;!r||r===ee.current||(ee.current=r,A("digital_twin_rendered",{recommended_horizon_id:B.recommendedHorizonId||"none",horizon_count:re.length,confidence_band:B.confidenceBand||"unknown"}))},[B,re.length]),w.useEffect(()=>{O&&A("opportunity_radar_rendered",{signal_count:O.signals?.length||0,readiness_index:Number(O.readinessIndex||0),recommended_window:O.recommendedWindow||"unknown"})},[O]),w.useEffect(()=>{I&&A("application_command_center_rendered",{readiness_score:Number(I.readinessScore||0),blocker_count:I.blockers?.length||0,checklist_count:I.checklist?.length||0})},[I]),w.useEffect(()=>{K&&A("grounded_copilot_rendered",{card_count:K.cards?.length||0,grounding_mode:K.groundingMode||"unknown"})},[K]),w.useEffect(()=>{$&&A("consultant_collaboration_workspace_rendered",{readiness_score:Number($.workspaceReadiness||0),package_status:$.packageStatus||"unknown"})},[$]),w.useEffect(()=>{z&&A("community_benchmark_rendered",{percentile:Number(z.percentile||0),benchmark_band:z.benchmarkBand||"unknown"})},[z]);const Dt=[{label:"Core Human Capital",value:n?.breakdown?.coreHumanCapital||0},{label:"Skill Transferability",value:n?.breakdown?.skillTransferability||0},{label:"Additional Points",value:n?.breakdown?.additionalPoints||0},{label:"Spouse Factors",value:n?.breakdown?.spouseFactors||0}].sort((r,b)=>b.value-r.value).slice(0,3),ue=w.useMemo(()=>{const r=u?.tier==="fresh"?92:u?.tier==="recent"?74:48,b=p?.tier==="fresh"?88:p?.tier==="recent"?72:45,S=Math.round((r+b)/2),V=Math.max(Math.min(Math.round(Me*.9+10),100),0),H=(y.globalRiskFlags||[]).filter(De=>De.severity==="high").length,be=(y.globalRiskFlags||[]).filter(De=>De.severity==="medium").length,ve=Math.min(H*12+be*6,36),ae=Number(E?.confidenceScore||y.overallConfidence||0);return{total:Math.max(Math.min(Math.round(Number(y.overallConfidence||0)*.35+S*.25+V*.2+ae*.2-ve),100),0),dataScore:S,executionScore:V,forecastScore:ae,riskPenalty:ve}},[p?.tier,Me,u?.tier,E?.confidenceScore,y.globalRiskFlags,y.overallConfidence]),Pe=w.useMemo(()=>[...P.tasks||[]].filter(r=>!C[r.id]).sort((r,b)=>{const S=(r.priority==="High"?0:r.priority==="Medium"?1:2)-(b.priority==="High"?0:b.priority==="Medium"?1:2);return S!==0?S:(r.dayFrom||0)-(b.dayFrom||0)}).slice(0,4),[P.tasks,C]),xe=(()=>{const r=gr().slice(0,8).map(S=>({id:S.id,label:S.updatedAt?new Date(S.updatedAt).toLocaleDateString():"Saved",score:Number(S.score)||0,current:!1})),b={id:"current-profile",label:"Now",score:Number(n?.total)||0,current:!0};return[...r,b].filter(S=>S.score>0).slice(-9)})(),Xe=w.useMemo(()=>cr({answers:e,result:n,strategy:y,forecast:E,actionPlan:P,opportunityRadar:O,commandCenter:I,copilot:K,collaboration:$,communityBenchmarks:z,drawData:{...i,source:u?.tier||"unknown"},categoryInfo:o}),[P,o,i,e,$,I,z,K,u?.tier,E,O,n,y]),Tt=Math.max(...xe.map(r=>r.score||0),600),Q=w.useMemo(()=>{const r=y.globalRiskFlags?.some(H=>H.severity==="high"),b=(y.profileSignals?.profileComplexity||0)>=70,S=(y.gap||0)>45,V=r||y.top?.effort==="Hard"||(y.gap||0)>22;return S&&b?{tier:"pro",badge:"Priority recommendation",rationale:"Your profile looks high-complexity with a wider gap. Pro tracking helps reduce execution risk with tighter follow-through."}:V?{tier:"pro",badge:"Recommended now",rationale:"You likely benefit from structured tracking and guided execution while closing your gap."}:{tier:"free",badge:"Sufficient for now",rationale:"Your current profile can continue with free tools while monitoring draw changes."}},[y.gap,y.globalRiskFlags,y.profileSignals?.profileComplexity,y.top?.effort]),Et=y.globalRiskFlags?.some(r=>r.severity==="high")?"Elevated":y.globalRiskFlags?.some(r=>r.severity==="medium")?"Moderate":"Low",ye=y.optimizerConstraints||Ce,et=x.variant==="pro_first",Ot=et?c("strategy.pricing.proCtaExperiment","Start Pro planning"):c("strategy.pricing.proCtaDefault","Go to Pro setup"),Ae=m==="save_profile",It=m==="open_opportunity_radar",Bt=m==="open_command_center",zt=m==="open_forecast",Ft=m==="open_digital_twin",tt=m==="open_90_day_plan",Le=m==="open_optimizer",Rt=m==="open_grounded_copilot",$t=m==="open_collaboration_workspace",Ht=m==="open_community_benchmarks",Wt=m==="export_consultant_file",Ut=m==="copy_handoff_share_link",pe=(r,b)=>{v(r),A("action_center_cta_clicked",{cta:b,target_section:r,confidence_band:y.confidenceBand,experiment_key:x.experimentKey,experiment_variant:x.variant})},Gt=()=>{f?.(),A("action_center_cta_clicked",{cta:"manage_account",target_section:"account_modal",confidence_band:y.confidenceBand,experiment_key:x.experimentKey,experiment_variant:x.variant})},nt=()=>{const r=dr(Xe);he(r?"Handoff file downloaded.":"Could not generate handoff file."),A("consultant_handoff_exported",{status:r?"ok":"failed",score:Number(n?.total)||0,confidence_band:y.confidenceBand,experiment_key:x.experimentKey,experiment_variant:x.variant}),Te("pricing_layout_v1","handoff_export",{status:r?"ok":"failed"})},rt=async()=>{const r=mr(Xe);if(!r){he("Could not generate share link.");return}try{await navigator.clipboard.writeText(r),he("Share link copied to clipboard."),A("consultant_handoff_share_link",{status:"copied",url_length:r.length,confidence_band:y.confidenceBand})}catch{he("Clipboard blocked. Copy this link manually from browser URL after opening it."),window.open(r,"_blank","noopener,noreferrer"),A("consultant_handoff_share_link",{status:"fallback_opened",url_length:r.length,confidence_band:y.confidenceBand})}},we=(r,b)=>{_e(S=>{const V=r==="relocationPreference"?b:Number(b),H=le({...S,[r]:V});return me(_,H),A("optimizer_constraints_updated",{field:r,budget_cad:H.budgetCad,weekly_hours:H.weeklyHours,exam_attempts:H.examAttempts,relocation_preference:H.relocationPreference}),H})},Vt=r=>{qe(b=>{const S={...b,[r]:!b[r]};return me(R,S),A("application_command_checklist_toggled",{item_id:r,marked_done:!!S[r]}),S})},qt=()=>{const r=le(X);_e(r),me(_,r),A("optimizer_constraints_reset",{budget_cad:r.budgetCad,weekly_hours:r.weeklyHours,exam_attempts:r.examAttempts,relocation_preference:r.relocationPreference})},Zt=r=>{const b={...C,[r]:!C[r]};T(b),ra(e,b);const S=P.tasks.filter(H=>!!b[H.id]).length,V=P.tasks.length>0?Math.round(S/P.tasks.length*100):0;A("action_plan_task_toggled",{task_id:r,completed:!!b[r],completion_pct:V,completed_count:S,total_count:P.tasks.length,next_task_id:P.nextBestTask?.id||"none"})},Yt=r=>{Ge(b=>{const S={...b,[r]:!b[r]};return me(ne,S),A("action_queue_reminder_toggled",{task_id:r,enabled:!!S[r]}),S})};return t.jsxs(t.Fragment,{children:[t.jsxs("section",{className:"card strategic-action-center",id:"section-action-center",children:[t.jsx("h3",{children:c("strategy.actionCenter.title","Action Center")}),t.jsx("p",{className:"cat-intro",children:c("strategy.actionCenter.subtitle","Use this control center to execute the highest-impact moves with clear priority and risk visibility.")}),t.jsx("div",{className:"results-tab-strip",role:"tablist","aria-label":"Action center navigation tabs",children:aa.filter(r=>M.enableAdvancedForecasting||r.key!=="open_forecast").map(r=>t.jsx("button",{type:"button",role:"tab",className:`results-tab-btn ${m===r.key?"active":""}`.trim(),"aria-selected":m===r.key,onClick:()=>{g?.(r.key,"action_center_tab"),A("action_center_tab_clicked",{tab_key:r.key,confidence_band:y.confidenceBand,experiment_key:x.experimentKey,experiment_variant:x.variant})},children:r.label},r.key))}),t.jsx("p",{className:"results-tab-helper",children:"Use tabs to focus on one workspace at a time."}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:[c("strategy.actionCenter.profileStatus","Profile save status"),": ",t.jsx("strong",{children:d||c("strategy.actionCenter.notSavedYet","Not saved yet")})]}),t.jsxs("span",{children:[c("strategy.actionCenter.planCompletion","90-day completion"),": ",t.jsxs("strong",{children:[Me,"%"]})," (",Pt,"/",At,")"]}),t.jsxs("span",{children:[c("strategy.actionCenter.confidence","Confidence"),": ",t.jsx("strong",{children:y.confidenceBand})," (",y.overallConfidence," / 100)"]}),t.jsxs("span",{children:[c("strategy.actionCenter.riskLevel","Risk level"),": ",t.jsx("strong",{children:Et})]}),!!I&&t.jsxs("span",{children:["Command readiness: ",t.jsxs("strong",{children:[I.readinessScore,"/100"]})]}),!!O&&t.jsxs("span",{children:["Radar readiness: ",t.jsxs("strong",{children:[O.readinessIndex,"/100"]})]}),!!z&&t.jsxs("span",{children:["Benchmark percentile: ",t.jsxs("strong",{children:["P",z.percentile]})]})]}),ie&&t.jsx("p",{className:"save-note",children:ie}),P.nextBestTask&&t.jsxs("div",{className:"next-task-callout",children:[t.jsxs("div",{children:[t.jsxs("strong",{children:[c("strategy.actionCenter.nextTask","Next best task"),": ",P.nextBestTask.title]}),t.jsxs("p",{children:[P.nextBestTask.dateWindow," · ",P.nextBestTask.weekWindow]}),t.jsx("small",{children:P.nextBestTask.successMetric})]}),t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>pe("section-90-day-plan","next_best_task"),children:c("strategy.actionCenter.startTask","Start task")})]})]}),Ae&&t.jsxs("section",{className:"card",id:"section-save-bridge",children:[t.jsx("h3",{children:"Save profile"}),t.jsx("p",{className:"cat-intro",children:"Use the save panel below to store your current profile and draw alerts."}),t.jsxs("div",{className:"strategic-action-grid",children:[t.jsx("button",{type:"button",className:"action-btn",onClick:()=>pe("section-save","save_profile"),children:"Open save panel"}),t.jsx("button",{type:"button",className:"action-btn",onClick:Gt,children:c("strategy.actionCenter.manageAccount","Manage account")})]}),!!d&&t.jsx("p",{className:"save-note",children:d})]}),Wt&&t.jsxs("section",{className:"card",id:"section-handoff-export",children:[t.jsx("h3",{children:c("strategy.actionCenter.exportHandoff","Export consultant handoff")}),t.jsx("p",{className:"cat-intro",children:"Generate a structured consultant handoff package from your current profile and strategy model."}),t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:nt,children:"Download consultant file"}),!!ie&&t.jsx("p",{className:"save-note",children:ie})]}),Ut&&t.jsxs("section",{className:"card",id:"section-handoff-share",children:[t.jsx("h3",{children:c("strategy.actionCenter.shareHandoff","Copy handoff share link")}),t.jsx("p",{className:"cat-intro",children:"Copy a secure handoff URL to share this profile package with your consultant."}),t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:rt,children:"Copy share link"}),!!ie&&t.jsx("p",{className:"save-note",children:ie})]}),Ae&&G&&t.jsxs("section",{className:"card change-since-last-card",children:[t.jsx("h3",{children:c("strategy.changes.title","Since your last visit")}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:["Score delta: ",t.jsxs("strong",{children:[G.scoreDelta>0?"+":"",G.scoreDelta]})]}),t.jsxs("span",{children:["Cutoff delta: ",t.jsxs("strong",{children:[G.cutoffDelta>0?"+":"",G.cutoffDelta]})]}),t.jsxs("span",{children:["Confidence delta: ",t.jsxs("strong",{children:[G.confidenceDelta>0?"+":"",G.confidenceDelta]})]})]}),G.previousUpdatedAt&&t.jsxs("p",{className:"save-note",children:["Previous snapshot: ",new Date(G.previousUpdatedAt).toLocaleString()]})]}),tt&&t.jsxs("section",{className:"card strategic-action-queue",id:"section-action-queue",children:[t.jsx("h3",{children:c("strategy.queue.title","Smart action queue")}),t.jsx("p",{className:"cat-intro",children:c("strategy.queue.subtitle","Prioritized next actions ordered by urgency and impact, with reminder toggles for follow-through.")}),!Pe.length&&t.jsx("p",{className:"save-note",children:"All queued tasks are complete. Nice work."}),!!Pe.length&&t.jsx("ul",{className:"plan-task-list",children:Pe.map(r=>t.jsxs("li",{children:[t.jsx("button",{type:"button",className:"plan-task-toggle","aria-label":`Toggle reminder for ${r.title}`,onClick:()=>Yt(r.id),children:t.jsx(Hn,{name:Ue[r.id]?"notifications-sharp":"notifications-off-sharp"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"plan-task-head",children:[t.jsx("strong",{children:r.title}),t.jsx(pt,{value:r.priority})]}),t.jsx("p",{children:r.rationale}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsx("span",{children:r.dateWindow}),t.jsx("span",{children:r.weekWindow}),t.jsxs("span",{children:["Impact +",r.impact]})]}),t.jsxs("small",{className:"plan-task-metric",children:["Reminder: ",Ue[r.id]?"Enabled":"Disabled"]})]})]},`queue-${r.id}`))})]}),It&&O&&t.jsxs("section",{className:"card strategic-opportunity-radar",id:"section-opportunity-radar",children:[t.jsx("h3",{children:c("strategy.radar.title","Opportunity Radar")}),t.jsx("p",{className:"cat-intro",children:O.summary}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:["Readiness index: ",t.jsxs("strong",{children:[O.readinessIndex,"/100"]})]}),t.jsxs("span",{children:["Recommended window: ",t.jsx("strong",{children:O.recommendedWindow||"—"})]}),t.jsxs("span",{children:["Signals detected: ",t.jsx("strong",{children:O.signals?.length||0})]})]}),!!O.alertTriggers?.length&&t.jsx("ul",{className:"opportunity-trigger-list",children:O.alertTriggers.map(r=>t.jsxs("li",{children:[t.jsx("strong",{children:r.title}),t.jsx("span",{children:r.trigger}),t.jsx("small",{children:r.windowLabel})]},r.id))}),!!O.signals?.length&&t.jsx("div",{className:"optimizer-options",children:O.signals.map((r,b)=>t.jsxs("article",{className:"optimizer-option",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:[b+1,". ",r.title]}),t.jsxs("span",{className:"optimizer-score",children:[r.opportunityScore,"/100"]})]}),t.jsx("p",{children:r.whyNow}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Lane: ",r.lane]}),t.jsxs("span",{children:["Window: ",r.windowLabel]}),t.jsxs("span",{children:["Gap to trigger: ",r.scoreDeltaNeeded]}),t.jsxs("span",{children:["Confidence: ",r.confidenceBand]}),t.jsxs("span",{children:["Risk: ",r.riskLevel]})]}),t.jsxs("small",{className:"plan-task-metric",children:["Next action: ",r.nextAction]})]},r.id))})]}),Bt&&I&&t.jsxs("section",{className:"card strategic-command-center",id:"section-command-center",children:[t.jsx("h3",{children:c("strategy.command.title","Application Command Center")}),t.jsx("p",{className:"cat-intro",children:I.summary}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:["Readiness: ",t.jsxs("strong",{children:[I.readinessScore,"/100 (",I.readinessBand,")"]})]}),t.jsxs("span",{children:["Checklist: ",t.jsxs("strong",{children:[Lt,"/",ge.length]})]}),t.jsxs("span",{children:["Profile completeness: ",t.jsxs("strong",{children:[I.profileCompleteness,"%"]})]})]}),!!I.blockers?.length&&t.jsx("ul",{className:"risk-indicator-list",children:I.blockers.map(r=>t.jsxs("li",{children:[t.jsxs("div",{children:[t.jsx("strong",{children:r.label}),t.jsx("small",{children:r.detail})]}),t.jsx(Oe,{value:"high"})]},r.id))}),!!ge.length&&t.jsx("ul",{className:"command-center-list",children:ge.map(r=>t.jsxs("li",{children:[t.jsx("button",{type:"button",className:"plan-task-toggle","aria-label":`Toggle ${r.title}`,onClick:()=>Vt(r.id),children:r.userMarkedDone?"✓":"○"}),t.jsxs("div",{children:[t.jsxs("div",{className:"plan-task-head",children:[t.jsx("strong",{children:r.title}),t.jsx("span",{className:`command-status-badge ${ht(r.effectiveStatus)}`,children:r.effectiveStatus.replace("_"," ")})]}),t.jsx("p",{children:r.evidence}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Owner: ",r.owner]}),t.jsxs("span",{children:["Due: ",r.dueWindow]})]})]})]},r.id))})]}),Rt&&K&&t.jsxs("section",{className:"card strategic-copilot",id:"section-copilot",children:[t.jsx("h3",{children:c("strategy.copilot.title","AI Strategy Copilot (Grounded)")}),t.jsxs("p",{className:"cat-intro",children:["Grounding mode: ",t.jsx("strong",{children:K.groundingMode}),". Responses are generated from your active profile and forecast context."]}),!!K.cards?.length&&t.jsx("div",{className:"copilot-card-grid",children:K.cards.map(r=>t.jsxs("article",{className:"copilot-card",children:[t.jsx("h4",{children:r.prompt}),t.jsx("p",{children:r.response}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Confidence: ",r.confidenceBand]}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>pe(r.quickAction||"section-action-center",`copilot_jump_${r.id}`),children:"Open related section"})]}),t.jsx("ul",{className:"copilot-evidence-list",children:(r.evidence||[]).map(b=>t.jsx("li",{children:b},`${r.id}-${b}`))})]},r.id))})]}),$t&&$&&t.jsxs("section",{className:"card strategic-collaboration",id:"section-collaboration",children:[t.jsx("h3",{children:c("strategy.collaboration.title","Consultant Collaboration Workspace")}),t.jsxs("p",{className:"cat-intro",children:["Workspace ",t.jsx("strong",{children:$.workspaceId})," · Status ",t.jsx("strong",{children:$.packageStatus})]}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:["Workspace readiness: ",t.jsxs("strong",{children:[$.workspaceReadiness,"/100"]})]}),t.jsxs("span",{children:["Checklist items: ",t.jsx("strong",{children:$.reviewChecklist?.length||0})]})]}),!!$.reviewChecklist?.length&&t.jsx("ul",{className:"collaboration-checklist",children:$.reviewChecklist.map(r=>t.jsxs("li",{children:[t.jsxs("div",{children:[t.jsx("strong",{children:r.label}),t.jsx("p",{children:r.detail})]}),t.jsx("span",{className:`command-status-badge ${ht(r.status)}`,children:r.status.replace("_"," ")})]},r.id))}),!!$.collaborationNotes?.length&&t.jsx("ul",{className:"copilot-evidence-list",children:$.collaborationNotes.map(r=>t.jsx("li",{children:r},r))}),t.jsxs("div",{className:"strategic-action-grid",children:[t.jsx("button",{type:"button",className:"action-btn",onClick:nt,children:"Export collaboration package"}),t.jsx("button",{type:"button",className:"action-btn",onClick:rt,children:"Copy collaboration share link"})]})]}),Ht&&z&&t.jsxs("section",{className:"card strategic-community-benchmarks",id:"section-community-benchmarks",children:[t.jsx("h3",{children:c("strategy.community.title","Community Benchmark Intelligence")}),t.jsx("p",{className:"cat-intro",children:z.summary}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:["Percentile: ",t.jsxs("strong",{children:["P",z.percentile]})]}),t.jsxs("span",{children:["Band: ",t.jsx("strong",{children:z.benchmarkBand})]}),t.jsxs("span",{children:["Cohort: ",t.jsxs("strong",{children:[z.cohort?.ageBand||"—"," · ",z.cohort?.educationTier||"—"]})]})]}),t.jsx("ul",{className:"community-benchmark-list",children:(z.comparison||[]).map(r=>t.jsxs("li",{className:r.isUser?"current":"",children:[t.jsx("span",{children:r.label}),t.jsx("strong",{children:r.score})]},r.id))}),!!z.leverageSignals?.length&&t.jsx("div",{className:"optimizer-meta",children:z.leverageSignals.map(r=>t.jsxs("span",{children:[r.label,": ",r.headroom,"% headroom"]},r.id))})]}),Ft&&B&&t.jsxs("section",{className:"card strategic-digital-twin",id:"section-digital-twin",children:[t.jsx("h3",{children:c("strategy.digitalTwin.title","Invitation probability digital twin")}),t.jsx("p",{className:"cat-intro",children:B.summary}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:[c("strategy.digitalTwin.recommended","Recommended horizon"),": ",t.jsx("strong",{children:B.recommendedHorizonId?.toUpperCase?.()||"—"})]}),t.jsxs("span",{children:[c("strategy.digitalTwin.confidenceBand","Model confidence"),": ",t.jsx("strong",{children:B.confidenceBand||"Unknown"})]}),t.jsxs("span",{children:[c("strategy.digitalTwin.topLane","Top lane"),": ",t.jsx("strong",{children:B.topLane||"—"})]})]}),t.jsx("div",{className:"digital-twin-horizon-switch",children:re.map(r=>t.jsx("button",{type:"button",className:`action-btn ${U?.id===r.id?"auth-btn-primary":""}`.trim(),onClick:()=>{Ye(r.id),A("digital_twin_horizon_selected",{horizon_id:r.id,chance_band:r.chanceBand,base_probability_pct:r.baseProbabilityPct})},children:r.label},r.id))}),U&&t.jsxs("div",{className:"digital-twin-scenario-grid",children:[t.jsxs("article",{className:"digital-twin-scenario",children:[t.jsx("h4",{children:"Base scenario"}),t.jsxs("strong",{children:[U.baseProbabilityPct,"%"]}),t.jsxs("p",{children:["Projected cutoff: ",U.projectedCutoff]}),t.jsxs("p",{children:["Expected score: ",U.expectedScore," (",U.scoreGap>=0?"+":"",U.scoreGap," gap)"]})]}),t.jsxs("article",{className:"digital-twin-scenario",children:[t.jsx("h4",{children:"Best-case execution"}),t.jsxs("strong",{children:[U.bestProbabilityPct,"%"]}),t.jsx("p",{children:"Assumes faster lane execution and lower draw variance."}),t.jsxs("p",{children:["Expected gain by horizon: +",U.expectedGain," pts"]})]}),t.jsxs("article",{className:"digital-twin-scenario",children:[t.jsx("h4",{children:"Downside scenario"}),t.jsxs("strong",{children:[U.worstProbabilityPct,"%"]}),t.jsx("p",{children:"Assumes execution slippage and higher draw volatility."}),t.jsxs("p",{children:["Confidence interval: ",U.confidenceInterval.lowPct,"%–",U.confidenceInterval.highPct,"%"]})]})]}),!!B.keyDrivers?.length&&t.jsx("ul",{className:"digital-twin-driver-list",children:B.keyDrivers.map(r=>t.jsxs("li",{children:[t.jsx("span",{children:r.label}),t.jsx("strong",{children:r.value})]},r.id))})]}),zt&&M.enableAdvancedForecasting&&E&&t.jsxs("section",{className:"card strategic-forecast",id:"section-forecast",children:[t.jsx("h3",{children:c("strategy.forecast.title","Forecast Outlook")}),t.jsx("p",{className:"cat-intro",children:c("strategy.forecast.subtitle","Projection based on recent draw cutoffs, volatility, and freshness of available data.")}),t.jsxs("div",{className:"strategic-action-status",children:[t.jsxs("span",{children:[c("strategy.forecast.trend","Trend"),": ",t.jsx("strong",{children:E.trendLabel})]}),t.jsxs("span",{children:[c("strategy.forecast.confidence","Forecast confidence"),": ",t.jsx("strong",{children:E.confidenceBand})," (",E.confidenceScore,"/100)"]}),t.jsxs("span",{children:[c("strategy.forecast.sampleSize","Sample size"),": ",t.jsx("strong",{children:E.sampleSize})]}),t.jsxs("span",{children:[c("strategy.forecast.likelihood","Invitation likelihood"),": ",t.jsx("strong",{children:E.invitationLikelihood})]})]}),t.jsxs("div",{className:"optimizer-top-callout",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:[c("strategy.forecast.nextCutoff","Projected next cutoff"),": ",E.projectedNextCutoff]}),t.jsxs("span",{className:"optimizer-score",children:[c("strategy.forecast.threeDrawAvg","3-draw avg")," ",E.projectedThreeDrawAvg]})]}),t.jsxs("p",{children:[c("strategy.forecast.latestObserved","Latest observed cutoff"),": ",E.latestObservedCutoff," · ",c("strategy.forecast.gapToProjection","Gap to projection"),": ",E.userGapToNext>0?"+":"",E.userGapToNext]}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:[c("strategy.forecast.projectedSequence","Projected sequence"),": ",E.projectedDraws.join(" → ")]}),t.jsxs("span",{children:[c("strategy.forecast.volatility","Volatility"),": ",E.volatility.toFixed(2)]}),t.jsxs("span",{children:[c("strategy.forecast.slope","Slope/draw"),": ",E.slopePerDraw]})]})]})]}),Le&&t.jsxs("section",{className:"card strategic-optimizer",id:"section-optimizer",children:[t.jsx("h3",{children:c("strategy.optimizer.title","Strategy Optimizer")}),t.jsx("p",{className:"cat-intro",children:y.guidanceSummary}),t.jsxs("div",{className:"optimizer-constraint-panel",children:[t.jsxs("div",{className:"optimizer-constraint-head",children:[t.jsx("h4",{children:c("strategy.optimizer.constraintsTitle","Constraint inputs")}),t.jsx("button",{type:"button",className:"action-btn",onClick:qt,children:c("strategy.optimizer.resetConstraints","Reset")})]}),t.jsxs("div",{className:"wi-grid",children:[t.jsxs("label",{className:"wi-field",children:[t.jsx("span",{children:c("strategy.optimizer.budgetCad","Available budget (CAD)")}),t.jsx("select",{value:ye.budgetCad,onChange:r=>we("budgetCad",r.target.value),children:[1200,2e3,3500,5e3,8e3,12e3].map(r=>t.jsx("option",{value:r,children:r.toLocaleString()},`budget-${r}`))})]}),t.jsxs("label",{className:"wi-field",children:[t.jsx("span",{children:c("strategy.optimizer.weeklyHours","Weekly execution hours")}),t.jsx("select",{value:ye.weeklyHours,onChange:r=>we("weeklyHours",r.target.value),children:[3,5,8,12,16,20].map(r=>t.jsxs("option",{value:r,children:[r,"h / week"]},`hours-${r}`))})]}),t.jsxs("label",{className:"wi-field",children:[t.jsx("span",{children:c("strategy.optimizer.examAttempts","Exam retry budget")}),t.jsx("select",{value:ye.examAttempts,onChange:r=>we("examAttempts",r.target.value),children:[1,2,3,4,5].map(r=>t.jsxs("option",{value:r,children:[r," attempt",r>1?"s":""]},`exam-${r}`))})]}),t.jsxs("label",{className:"wi-field",children:[t.jsx("span",{children:c("strategy.optimizer.relocationPreference","Relocation preference")}),t.jsxs("select",{value:ye.relocationPreference,onChange:r=>we("relocationPreference",r.target.value),children:[t.jsx("option",{value:"balanced",children:"Balanced"}),t.jsx("option",{value:"province",children:"Province-focused"}),t.jsx("option",{value:"federal",children:"Federal-focused"})]})]})]}),t.jsx("p",{className:"save-note",children:c("strategy.optimizer.constraintsHint","These constraints re-rank lanes by real-world feasibility, not just raw score gain.")})]}),y.top&&t.jsxs("div",{className:"optimizer-top-callout",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:["Top lane: ",y.top.title]}),t.jsxs("span",{className:"optimizer-score",children:["Priority ",y.top.score,"/100"]})]}),t.jsx("p",{children:y.top.reason}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Estimated gain: +",y.top.scoreGain]}),t.jsxs("span",{children:["Expected timeline: ~",y.top.months," months"]}),t.jsxs("span",{children:["Confidence: ",y.top.confidence,"%"]}),t.jsxs("span",{children:["Constraint fit: ",y.top.constraintFitScore,"/100"]}),t.jsxs("span",{children:["Estimated cost: ",Math.round(y.top.estimatedCostCad||0)," CAD"]}),t.jsxs("span",{children:["Weekly load: ~",y.top.requiredWeeklyHours||0,"h"]}),t.jsxs("span",{children:["Constraint adj: ",y.top.constraintAdjustment>0?"+":"",y.top.constraintAdjustment||0]}),t.jsx(mt,{value:y.top.effort})]}),!!y.top.riskFlags?.length&&t.jsx("ul",{className:"optimizer-risk-list",children:y.top.riskFlags.map(r=>t.jsxs("li",{children:[t.jsx(Oe,{value:r.severity}),t.jsx("span",{children:r.label})]},r.id))})]}),t.jsx("div",{className:"optimizer-options",children:y.ranked.map((r,b)=>t.jsxs("article",{className:"optimizer-option",children:[t.jsxs("div",{className:"optimizer-option-head",children:[t.jsxs("strong",{children:[b+1,". ",r.title]}),t.jsxs("div",{className:"optimizer-option-end",children:[t.jsxs("span",{className:"optimizer-score",children:["Score ",r.score]}),t.jsx(mt,{value:r.effort})]})]}),t.jsx("p",{children:r.reason}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsxs("span",{children:["Lane: ",r.lane]}),t.jsxs("span",{children:["+",r.scoreGain," pts"]}),t.jsxs("span",{children:[r.months," mo"]}),t.jsxs("span",{children:[r.confidence,"% confidence"]}),t.jsxs("span",{children:["Fit ",r.constraintFitScore,"/100"]}),t.jsxs("span",{children:["Cost ",Math.round(r.estimatedCostCad||0)," CAD"]}),t.jsxs("span",{children:["Load ~",r.requiredWeeklyHours||0,"h/wk"]}),t.jsxs("span",{children:["Adj ",r.constraintAdjustment>0?"+":"",r.constraintAdjustment||0]})]})]},r.id))})]}),tt&&t.jsxs("section",{className:"card strategic-plan",id:"section-90-day-plan",children:[t.jsx("h3",{children:c("strategy.plan.title","90-Day Action Plan")}),t.jsx("p",{className:"cat-intro",children:"Execution-focused milestones with calendar windows, measurable outcomes, and fallback controls."}),t.jsx("p",{className:"plan-guidance",children:P.completionGuidance}),t.jsx("div",{className:"plan-review-dates",children:P.calendar?.reviewDates?.map(r=>t.jsxs("span",{children:["Review D",r.day,": ",r.label]},r.day))}),t.jsx("div",{className:"plan-milestones",children:P.milestones.map(r=>t.jsxs("div",{className:"plan-milestone",children:[t.jsx("strong",{children:r.label}),t.jsx("p",{children:r.objective}),t.jsx("small",{children:r.dateWindow}),t.jsxs("small",{children:["Expected gain: +",r.expectedGain," pts"]})]},r.label))}),t.jsx("ul",{className:"plan-task-list",children:P.tasks.map(r=>{const b=!!C[r.id],S=P.nextBestTask?.id===r.id&&!b;return t.jsxs("li",{className:`${b?"done":""} ${S?"next-task":""}`.trim(),children:[t.jsx("button",{type:"button",className:"plan-task-toggle",onClick:()=>Zt(r.id),"aria-label":`Toggle ${r.title}`,children:b?"✓":"○"}),t.jsxs("div",{children:[t.jsxs("div",{className:"plan-task-head",children:[t.jsx("strong",{children:r.title}),t.jsx(pt,{value:r.priority})]}),t.jsx("p",{children:r.rationale}),t.jsxs("div",{className:"optimizer-meta",children:[t.jsx("span",{children:r.window}),t.jsx("span",{children:r.weekWindow}),t.jsx("span",{children:r.dateWindow}),t.jsxs("span",{children:["Lane: ",r.lane]}),t.jsxs("span",{children:["Impact: +",r.impact," pts"]})]}),t.jsxs("small",{className:"plan-task-metric",children:["Success metric: ",r.successMetric]}),t.jsxs("small",{className:"plan-task-metric",children:["Checkpoint: ",r.checkpoint]})]})]},r.id)})})]}),Le&&t.jsxs("section",{className:"card strategic-pricing",id:"section-pricing",children:[t.jsx("h3",{children:c("strategy.pricing.title","Plans & Upgrade Path")}),t.jsx("p",{className:"cat-intro",children:"Choose support depth based on your current gap, risk profile, and execution complexity."}),t.jsxs("div",{className:"pricing-recommendation-banner",children:[t.jsxs("strong",{children:[Q.badge,": ",ia(Q.tier)]}),t.jsx("p",{children:Q.rationale}),t.jsxs("small",{className:"pricing-experiment-note",children:[c("strategy.pricing.experimentLabel","Active experiment variant"),": ",x.variant]})]}),t.jsxs("div",{className:`pricing-grid ${et?"pro-first":""}`,children:[t.jsxs("article",{className:`pricing-tier pricing-tier-free ${Q.tier==="free"?"recommended":""}`,children:[Q.tier==="free"&&t.jsx("span",{className:"pricing-reco-badge",children:"Best fit now"}),t.jsx("h4",{children:"Free"}),t.jsx("strong",{children:"0 CAD"}),t.jsxs("ul",{children:[t.jsx("li",{children:"CRS scoring + basic suggestions"}),t.jsx("li",{children:"Scenario compare"}),t.jsx("li",{children:"Local profile save"})]}),t.jsx("button",{type:"button",className:"action-btn",onClick:()=>{Te("pricing_layout_v1","pricing_cta_click",{tier:"free"}),A("pricing_cta_clicked",{tier:"free",recommended:Q.tier==="free",experiment_key:x.experimentKey,experiment_variant:x.variant}),pe("section-optimizer","continue_free")},children:c("strategy.pricing.freeCta","Continue with Free")})]}),t.jsxs("article",{className:`pricing-tier pricing-tier-pro featured ${Q.tier==="pro"?"recommended":""}`,children:[Q.tier==="pro"&&t.jsx("span",{className:"pricing-reco-badge",children:"Recommended"}),t.jsx("h4",{children:"Pro Tracking"}),t.jsx("strong",{children:"5 CAD / month"}),t.jsxs("ul",{children:[t.jsx("li",{children:"Expert strategy coach"}),t.jsx("li",{children:"Daily action tracking"}),t.jsx("li",{children:"Cloud sync + alerts"})]}),t.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>{Te("pricing_layout_v1","pricing_cta_click",{tier:"pro_tracking"}),A("pricing_cta_clicked",{tier:"pro_tracking",recommended:Q.tier==="pro",experiment_key:x.experimentKey,experiment_variant:x.variant}),pe("section-coach","go_to_pro_setup")},children:Ot})]})]})]}),Ae&&t.jsxs("section",{className:"card strategic-profile-trend",id:"section-profile-trend",children:[t.jsx("h3",{children:c("strategy.trend.title","Profile trend timeline")}),t.jsx("p",{className:"cat-intro",children:c("strategy.trend.subtitle","Track score movement across your saved snapshots and current profile.")}),!xe.length&&t.jsx("p",{className:"save-note",children:"Save a few profiles to unlock your timeline view."}),!!xe.length&&t.jsx("ul",{className:"profile-trend-list",children:xe.map(r=>t.jsxs("li",{className:r.current?"current":"",children:[t.jsxs("div",{className:"profile-trend-label",children:[t.jsx("strong",{children:r.label}),r.current&&t.jsx("span",{className:"profile-trend-current",children:"Current"})]}),t.jsx("div",{className:"profile-trend-bar-wrap",children:t.jsx("span",{className:"profile-trend-bar",style:{width:`${Math.max(Math.min(Math.round(r.score/Tt*100),100),5)}%`}})}),t.jsx("span",{className:"profile-trend-score",children:r.score})]},r.id))})]}),Le&&t.jsxs("section",{className:"card strategic-explainability",id:"section-explainability",children:[t.jsx("h3",{children:c("strategy.explainability.title","Explainability & Confidence")}),t.jsx("p",{className:"cat-intro",children:"Structured reasoning for lane ranking, confidence, and risk assumptions."}),t.jsxs("div",{className:"explain-grid",children:[t.jsxs("article",{children:[t.jsx("h4",{children:"Top score drivers"}),t.jsx("ul",{children:Dt.map(r=>t.jsxs("li",{children:[t.jsx("span",{children:r.label}),t.jsx("strong",{children:r.value})]},r.label))})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Recommendation score factors"}),t.jsx("ul",{className:"explain-factor-list",children:(y.top?.scoreBreakdown||[]).map(r=>t.jsxs("li",{children:[t.jsxs("div",{className:"explain-factor-head",children:[t.jsx("span",{children:r.label}),t.jsx("strong",{children:r.value})]}),t.jsx("div",{className:"explain-factor-track",children:t.jsx("span",{className:"explain-factor-fill",style:{width:`${r.value}%`}})}),t.jsxs("small",{children:["Weight: ",Math.round((r.weight||0)*100),"%"]})]},r.key))})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Data confidence"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Confidence v2: ",t.jsxs("strong",{children:[ue.total,"/100"]})]}),t.jsxs("li",{children:["Overall confidence: ",t.jsxs("strong",{children:[y.confidenceBand," (",y.overallConfidence,"/100)"]})]}),t.jsxs("li",{children:["Data signal score: ",t.jsxs("strong",{children:[ue.dataScore,"/100"]})]}),t.jsxs("li",{children:["Execution signal score: ",t.jsxs("strong",{children:[ue.executionScore,"/100"]})]}),t.jsxs("li",{children:["Forecast signal score: ",t.jsxs("strong",{children:[ue.forecastScore,"/100"]})]}),t.jsxs("li",{children:["Risk penalty: ",t.jsxs("strong",{children:["-",ue.riskPenalty]})]}),t.jsxs("li",{children:["Draw freshness: ",t.jsx("strong",{children:u?.label||"Unknown"})]}),t.jsxs("li",{children:["Category freshness: ",t.jsx("strong",{children:p?.label||"Unknown"})]}),t.jsxs("li",{children:["Draw source snapshot: ",t.jsx("strong",{children:i?.lastUpdated||"Unavailable"})]})]})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Assumptions used"}),t.jsx("ul",{className:"assumption-list",children:(y.assumptions||[]).map(r=>t.jsxs("li",{children:[t.jsx("span",{children:r.label}),t.jsx("strong",{className:sa(r.confidence),children:r.confidence})]},r.key))})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Risk indicators"}),t.jsxs("ul",{className:"risk-indicator-list",children:[(y.globalRiskFlags||[]).map(r=>t.jsxs("li",{children:[t.jsxs("div",{children:[t.jsx("strong",{children:r.label}),t.jsx("small",{children:r.detail})]}),t.jsx(Oe,{value:r.severity})]},r.id)),!y.globalRiskFlags?.length&&t.jsx("li",{children:"No major risk flags detected."})]})]}),t.jsxs("article",{children:[t.jsx("h4",{children:"Trust cues"}),t.jsxs("div",{className:"trust-inline-cues",children:[t.jsx("span",{children:"Estimate model only"}),t.jsx("span",{children:"No legal advice"}),t.jsx("span",{children:"Review official IRCC before filing"})]}),t.jsxs("p",{className:"save-note",children:["Review governance in the ",t.jsx("a",{href:"/trust.html",children:"Trust Center"}),", implementation guides in ",t.jsx("a",{href:"/guides.html",children:"Guides"}),", and rights controls in ",t.jsx("a",{href:"/privacy.html",children:"Privacy Policy"}),"."]})]})]})]})]})}const wa=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"}));export{Hn as I,pa as L,wa as R,ya as a,ga as b,ma as c,Fn as d,On as e,kn as f,In as g,gn as h,xa as i,ha as j,fa as k,gr as l,ot as r,Bn as s,A as t,en as u};
