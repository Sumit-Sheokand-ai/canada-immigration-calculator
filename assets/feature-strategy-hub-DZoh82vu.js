import{r as O,j as n}from"./vendor-react-Ah1pgjPn.js";import{b as X}from"./feature-path-coach-DvhzPNyQ.js";const J="crs-analytics-queue-v2",H="crs-analytics-session-v1",W="2.0",ee=1800*1e3,ne=2500;function K(e,t){try{return e?JSON.parse(e):t}catch{return t}}function te(e,t){return typeof window>"u"?t:K(window.localStorage.getItem(e),t)}function ie(e,t){if(!(typeof window>"u"))try{window.localStorage.setItem(e,JSON.stringify(t))}catch{}}function Q(e="evt"){return`${e}_${Date.now().toString(36)}_${Math.random().toString(36).slice(2,9)}`}function se(e,t=0){const s=Number(e);return Number.isFinite(s)?s:t}function ae(e){return e?String(e).trim().toLowerCase().replace(/[^a-z0-9:_-]+/g,"_").slice(0,80):""}function re(e={}){const t={};for(const[s,a]of Object.entries(e||{}))if(!(!s||a==null)){if(typeof a=="string"){t[s]=a.slice(0,280);continue}if(typeof a=="number"||typeof a=="boolean"){t[s]=a;continue}if(Array.isArray(a)){t[s]=a.slice(0,20).map(r=>String(r).slice(0,120));continue}t[s]=String(a).slice(0,280)}return t}function oe(){return te(J,[])}function ce(e){const t=Array.isArray(e)?e.slice(-300):[];ie(J,t)}function le(){if(typeof window>"u")return{id:"server",seq:0,started_at:new Date().toISOString()};const e=Date.now(),t=K(window.sessionStorage.getItem(H),null),a=!t||!t.last_activity_ms||e-t.last_activity_ms>ee?{id:Q("sess"),seq:1,started_at:new Date().toISOString(),last_activity_ms:e}:{...t,seq:se(t.seq,0)+1,last_activity_ms:e};try{window.sessionStorage.setItem(H,JSON.stringify(a))}catch{}return a}function de(){if(typeof window>"u")return{app_version:"dev"};let e="unknown";try{e=Intl.DateTimeFormat().resolvedOptions().timeZone||"unknown"}catch{}return{app_version:"dev",lang:window.navigator?.language||"unknown",timezone:e,path:window.location?.pathname||"/"}}function ue(e){return!1}async function pe(e){if(typeof window>"u")return!1;const t=void 0;if(!ue())return!1;const s=JSON.stringify(e);if(window.navigator?.sendBeacon&&document.visibilityState==="hidden")try{if(window.navigator.sendBeacon(t,new Blob([s],{type:"application/json"})))return!0}catch{}const a=typeof AbortController<"u"?new AbortController:null;let r=null;a&&(r=window.setTimeout(()=>a.abort(),ne));try{return(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:s,keepalive:!0,signal:a?.signal})).ok}catch{return!1}finally{r&&window.clearTimeout(r)}}function he(e,t){if(!(typeof window>"u")&&typeof window.plausible=="function")try{window.plausible(e,{props:t})}catch{}}function T(e,t={}){if(typeof window>"u")return;const s=ae(e);if(!s)return;const a=le(),r=re(t),c=de(),l={event_id:Q("evt"),schema_version:W,name:s,ts:new Date().toISOString(),session_id:a.id,session_seq:a.seq,session_started_at:a.started_at,payload:r,meta:c},d=oe();d.push(l),ce(d),he(s,{...r,schema_version:W,session_seq:a.seq}),pe(l)}const V="crs-90-day-action-plan-v1",me=1440*60*1e3,G={High:3,Medium:2,Low:1},w={impact:.34,speed:.18,confidence:.22,effort:.12,laneFit:.14};function y(e,t,s){return Math.max(t,Math.min(s,e))}function fe(e,t){return`Day ${e}-${t}`}function S(e,t=0){const s=Number(e);return Number.isFinite(s)?s:t}function E(e,t=0){const s=parseInt(e,10);return Number.isFinite(s)?s:t}function ge(e=new Date){const t=new Date(e);return t.setHours(0,0,0,0),t}function R(e,t){return new Date(e.getTime()+t*me)}function B(e){try{return e.toLocaleDateString(void 0,{month:"short",day:"numeric"})}catch{return e.toISOString().slice(0,10)}}function D(e,t,s){const a=R(e,Math.max(t-1,0)),r=R(e,Math.max(s-1,0));return{startDateIso:a.toISOString(),endDateIso:r.toISOString(),weekWindow:`Week ${Math.ceil(t/7)}-${Math.ceil(s/7)}`,dateWindow:`${B(a)} → ${B(r)}`}}function xe(e,t){const s=S(t);return e==="listening"?s>=8.5?10:s>=8?9:s>=7.5?8:s>=6?7:s>=5.5?6:s>=5?5:0:e==="reading"?s>=8?10:s>=7?9:s>=6.5?8:s>=6?7:s>=5?6:s>=4?5:0:s>=7.5?10:s>=7?9:s>=6.5?8:s>=6?7:s>=5.5?6:s>=5?5:0}function ye(e={}){const t=["listening","reading","writing","speaking"],s=e.firstOfficialLanguage==="french",r=t.map(c=>s?E(e[`french_${c}`],0):e.langTestType==="celpip"?E(e[`celpip_${c}`],0):xe(c,e[`ielts_${c}`])).filter(c=>c>0);return r.length?Math.min(...r):0}function v(e,t,s,a="medium"){return{id:e,label:t,detail:s,severity:a}}function je(e){return e==="high"?10:e==="medium"?5:2}function ke(e="Medium"){return e==="Easy"?100:e==="Medium"?68:38}function be(e=0){return e>=76?"High":e>=56?"Medium":"Low"}function we(e={},t,s){const a=S(t?.total),r=s-a,c=E(e.age,0),l=ye(e),d=e.hasFrench==="yes"||e.firstOfficialLanguage==="french",h=E(e.canadianWorkExp,0),x=E(e.foreignWorkExp,0),j=l>=9?18:l>=7?46:74,g=y((c>=33?28:14)+(l<7?26:l<9?16:6)+(h===0?12:4)+(x>=3?8:3),10,90),o=[{key:"answers_accuracy",label:"Profile values are accurate and complete",confidence:e.knowsScore==="yes"?"Medium":"High"},{key:"draw_trend_stability",label:"Recent draw patterns remain directionally similar",confidence:Math.abs(r)<=20?"Medium":"Low"},{key:"execution_discipline",label:"You can sustain weekly execution cadence for 90 days",confidence:g<=45?"High":g<=65?"Medium":"Low"}],m=[];return c>=33&&m.push(v("risk-age-decay","Age-point decay risk","Delays can reduce score as age thresholds change.",c>=38?"high":"medium")),l>0&&l<7&&m.push(v("risk-language-floor","Language floor below CLB 7","Several lanes become weaker or inaccessible below CLB 7.","high")),d||m.push(v("risk-no-french","No French upside yet","You may miss lower-cutoff category opportunities tied to French strength.","low")),r>40&&m.push(v("risk-large-gap","Large score gap","A single action may not close this gap; a combination strategy is likely required.","high")),{score:a,gap:r,age:c,minLanguageClb:l,hasFrench:d,canadianWorkExp:h,foreignWorkExp:x,languageHeadroom:j,profileComplexity:g,assumptions:o,globalRiskFlags:m}}function Z(e={}){const t=[e.age,e.education,e.pathway,e.canadianWorkExp,e.foreignWorkExp,e.hasFrench,e.hasPNP].join("|");let s=0;for(let a=0;a<t.length;a+=1)s=(s<<5)-s+t.charCodeAt(a),s|=0;return Math.abs(s).toString(16)}function ve(e,t,s){const a=e.category==="Language"?50+t.languageHeadroom*.45:e.category==="Provincial"?72:e.category==="Combination"?76:60,r=y(a+(e.goalReached?8:0)+(e.likelihoodPercent-50)*.35,30,95),c=[];return e.estimatedMonths>=10&&c.push(v(`${e.id}-timeline`,"Long timeline","This lane can take substantial time before score impact materializes.","medium")),e.difficulty==="Hard"&&c.push(v(`${e.id}-effort`,"Execution intensity","Consistent weekly effort is required to avoid plan drift.","medium")),!e.goalReached&&s>0&&c.push(v(`${e.id}-bridge`,"May require a second lane","This lane may need a backup action to fully close your gap.","low")),{id:`path-${e.id}`,title:e.title,lane:e.category,reason:e.whyItFits,scoreGain:e.potentialGain,months:e.estimatedMonths,confidence:e.likelihoodPercent,effort:e.difficulty,laneFit:r,riskFlags:c}}function Se({score:e,cutoff:t,eligibleCount:s,signals:a}){const r=t-e,c=r<=0?82:r<=20?64:38,l=[];return s||l.push(v("category-not-eligible","Not category-eligible yet","A prerequisite profile change is required before this lane can be used.","high")),r>35&&l.push(v("category-gap","Gap still material","Category targeting helps, but the score gap remains significant.","medium")),{id:"lane-category-draws",title:"Category Draw Positioning",lane:"Category Draws",reason:s>0?`You match ${s} category stream(s). Improve targeted factors to close the category cutoff gap.`:"You are not currently category-eligible; targeted profile adjustments can unlock lower-cutoff streams.",scoreGain:y(Math.round(Math.max(r,0)*.5),0,80),months:r<=0?1:r<=20?4:8,confidence:c,effort:r<=0?"Easy":r<=20?"Medium":"Hard",laneFit:y((s>0?70:35)+(a.hasFrench?8:0),25,90),riskFlags:l}}function Ne(e){if(!e)return null;const t=[];return e.matchScore<55&&t.push(v(`province-${e.id}-fit`,"Lower province fit","Province alignment is currently moderate; stream targeting needs tighter matching.","high")),e.matchScore>=55&&e.matchScore<70&&t.push(v(`province-${e.id}-variance`,"Selection variance","Provincial intake criteria can shift and may require profile tuning.","medium")),{id:`lane-province-${e.id}`,title:`${e.name} PNP Focus`,lane:"Provincial",reason:`${e.name} has the highest profile match in your province analysis.`,scoreGain:e.matchScore>=70?600:300,months:e.matchScore>=70?6:9,confidence:y(e.matchScore,35,88),effort:e.matchScore>=70?"Medium":"Hard",laneFit:y(e.matchScore+(e.matchScore>=70?6:-4),25,95),riskFlags:t}}function _e(e={},t=0){return[{key:"coreHumanCapital",label:"Core profile factors",value:S(e.coreHumanCapital)},{key:"skillTransferability",label:"Transferability factors",value:S(e.skillTransferability)},{key:"additionalPoints",label:"Additional point factors",value:S(e.additionalPoints)},{key:"spouseFactors",label:"Spouse factors",value:S(e.spouseFactors)}].map(a=>({...a,headroom:y(100-Math.round(a.value/Math.max(t,1)*100),0,100)})).sort((a,r)=>r.headroom-a.headroom).slice(0,2)}function Ce(e,t){const s=Math.max(Math.abs(t),35),a=y(Math.round(e.scoreGain/s*100),8,100),r=y(100-e.months*11,12,100),c=y(e.confidence,12,100),l=ke(e.effort),d=y(S(e.laneFit,60),10,100),h=a*w.impact+r*w.speed+c*w.confidence+l*w.effort+d*w.laneFit,x=Array.isArray(e.riskFlags)?e.riskFlags:[],j=y(x.reduce((o,m)=>o+je(m.severity),0),0,24),g=y(Math.round(h-j),1,100);return{...e,score:g,riskPenalty:j,scoreBreakdown:[{key:"impact",label:"Impact potential",value:a,weight:w.impact},{key:"speed",label:"Speed to value",value:r,weight:w.speed},{key:"confidence",label:"Data confidence",value:c,weight:w.confidence},{key:"effort",label:"Execution ease",value:l,weight:w.effort},{key:"laneFit",label:"Profile-lane fit",value:d,weight:w.laneFit}]}}function Me({answers:e,result:t,averageCutoff:s,categoryInfo:a=[],provinces:r=[]}){const c=S(t?.total),l=S(s,520),d=l-c,h=we(e,t,l),j=(X(e,t,{averageCutoff:l}).plans||[]).slice(0,2).map(i=>ve(i,h,d)),g=a.filter(i=>typeof i?.check=="function"&&i.check(e)).length,o=Se({score:c,cutoff:l,eligibleCount:g,signals:h}),m=Ne((r||[])[0]||null),u=[...j,o,m].filter(Boolean).map(i=>Ce(i,d)).sort((i,p)=>p.score-i.score).slice(0,4),f=u[0]||null,N=u[1]||null,_=_e(t?.breakdown,c),I=[...h.globalRiskFlags||[],...u.slice(0,2).flatMap(i=>i.riskFlags||[])],k=Object.values(I.reduce((i,p)=>(p?.id&&(i[p.id]||(i[p.id]=p)),i),{})).slice(0,5),P=u.slice(0,2).map(i=>y(i.confidence-i.riskPenalty,0,100)),b=P.length?Math.round(P.reduce((i,p)=>i+p,0)/P.length):36,$=be(b),A=f?`Primary lane: ${f.title}. Estimated gain ${f.scoreGain} points in ~${f.months} months (${$.toLowerCase()} confidence).`:"No strong lane detected yet. Start by improving language and category eligibility.";return{score:c,cutoff:l,gap:d,ranked:u,top:f,nextBest:N,bottlenecks:_,assumptions:h.assumptions,globalRiskFlags:k,overallConfidence:b,confidenceBand:$,profileSignals:{minLanguageClb:h.minLanguageClb,profileComplexity:h.profileComplexity,languageHeadroom:h.languageHeadroom},scoreWeights:w,guidanceSummary:A}}function M(e,t,s,a,r,c,l,d="Medium",h,x={}){const{startDateIso:j,endDateIso:g,weekWindow:o,dateWindow:m}=D(h,a,r);return{id:e,title:t,rationale:s,window:fe(a,r),dayFrom:a,dayTo:r,impact:c,lane:l,priority:d,startDateIso:j,endDateIso:g,weekWindow:o,dateWindow:m,successMetric:x.successMetric||"Task completed with verified profile update.",checkpoint:x.checkpoint||"Run a score recalculation and note delta.",dependencies:x.dependencies||[],cadence:x.cadence||"3 focused sessions per week"}}function Fe({suggestions:e=[],strategy:t,scoreGap:s=0,progress:a={}}){const r=e[1],c=t?.top?.title||"Profile Optimization",l=Math.max(S(s),0),d=ge(new Date),h=[M("plan-baseline","Lock baseline and target score",`Set a concrete target and freeze your baseline profile to avoid random changes. Current gap: ${l} points.`,1,7,0,c,"High",d,{successMetric:"Target score and top lane documented; baseline snapshot saved.",checkpoint:"Save profile with date tag and score target.",cadence:"One 45-minute planning block + one review"}),M("plan-primary-lane",`Execute primary lane: ${c}`,t?.top?.reason||"Follow the highest-impact lane identified by optimizer.",8,30,t?.top?.scoreGain||10,c,"High",d,{successMetric:`Deliver at least 60% of ${c} milestones.`,checkpoint:"Verify measurable progress (test booking, docs, submissions, etc.)."}),M("plan-secondary-lane",r?`Secondary boost: ${r.title}`:"Secondary boost: language and profile precision",r?.description||"Add one additional improvement path to reduce draw uncertainty.",24,50,r?.potentialGain||8,r?.title||"Secondary path","Medium",d,{successMetric:"Secondary lane started with first concrete deliverable completed.",checkpoint:"Compare score delta before/after secondary-lane kickoff.",dependencies:["plan-primary-lane"]}),M("plan-document-pack","Prepare immigration document pack","Collect and verify key documents (identity, education, work proofs, test reports, proof-of-funds readiness).",35,68,0,"Readiness","High",d,{successMetric:"Core document checklist reaches 90% readiness.",checkpoint:"Review missing docs and issue dates.",cadence:"Two short admin sessions weekly"}),M("plan-risk-buffer","Activate fallback lane if progress stalls","If progress velocity is below target, start a backup action immediately (e.g., category-specific adjustment or province-first route).",55,80,6,"Fallback Control","Medium",d,{successMetric:"Fallback lane is selected and started within 7 days of stall signal.",checkpoint:"Mark stall trigger if expected gain is short by 20%+.",dependencies:["plan-primary-lane"]}),M("plan-profile-audit","Profile audit and draw readiness check","Re-evaluate score vs latest draws and category cutoffs. Trigger fallback lane if gap remains above 15 points.",75,90,0,"Risk Control","High",d,{successMetric:"Final 90-day readiness review completed with go/no-go decision.",checkpoint:"Capture current score, active cutoff delta, and next 30-day plan.",dependencies:["plan-document-pack"]})],x=[{label:"Days 1-30",objective:"Baseline lock + launch primary lane",expectedGain:h[1].impact,dateWindow:D(d,1,30).dateWindow},{label:"Days 31-60",objective:"Add secondary lane + document readiness",expectedGain:h[2].impact,dateWindow:D(d,31,60).dateWindow},{label:"Days 61-90",objective:"Fallback control + final draw readiness review",expectedGain:h[4].impact,dateWindow:D(d,61,90).dateWindow}],j=h.filter(f=>!!a[f.id]).length,g=h.length,o=g>0?Math.round(j/g*100):0,m=[...h].filter(f=>!a[f.id]).sort((f,N)=>{const _=G[N.priority]-G[f.priority];return _!==0?_:f.dayFrom-N.dayFrom})[0]||null,F=o>=100?"All action-plan tasks are complete. Keep a weekly score monitor to stay draw-ready.":m?`Next best task: ${m.title} (${m.dateWindow}).`:"Continue progressing through the plan in order of priority.",u=[14,30,60,90].map(f=>{const N=R(d,f-1);return{day:f,iso:N.toISOString(),label:B(N)}});return{tasks:h,milestones:x,completedCount:j,totalCount:g,completionPct:o,nextBestTask:m,completionGuidance:F,calendar:{planStartIso:d.toISOString(),planEndIso:R(d,89).toISOString(),reviewDates:u}}}function q(e={}){if(typeof window>"u")return{};const t=`${V}:${Z(e)}`;try{const s=window.localStorage.getItem(t);return s?JSON.parse(s):{}}catch{return{}}}function Pe(e={},t={}){if(typeof window>"u")return;const s=`${V}:${Z(e)}`;try{window.localStorage.setItem(s,JSON.stringify(t||{}))}catch{}}function Oe({value:e}){const t=e==="High"?"priority-high":e==="Medium"?"priority-medium":"priority-low";return n.jsx("span",{className:`priority-badge ${t}`,children:e})}function Y({value:e}){const t=e==="Easy"?"effort-easy":e==="Medium"?"effort-medium":"effort-hard";return n.jsx("span",{className:`effort-badge ${t}`,children:e})}function U({value:e}){const t=e==="high"?"risk-high":e==="medium"?"risk-medium":"risk-low";return n.jsx("span",{className:`risk-badge ${t}`,children:e})}function Te(e=""){return e==="High"?"assumption-high":e==="Medium"?"assumption-medium":"assumption-low"}function Ee(e){return e==="free"?"Free":"Pro Tracking"}function $e({answers:e,result:t,suggestions:s,averageCutoff:a,activeDraws:r,activeCategoryInfo:c,provinces:l,drawFreshness:d,categoryFreshness:h,saveStatus:x,onJumpToSection:j,onOpenAccount:g}){const o=O.useMemo(()=>Me({answers:e,result:t,averageCutoff:a,categoryInfo:c,provinces:l}),[c,e,a,l,t]),[m,F]=O.useState(()=>q(e));O.useEffect(()=>{F(q(e))},[e]);const u=O.useMemo(()=>Fe({suggestions:s,strategy:o,scoreGap:Math.max((a||0)-(t?.total||0),0),progress:m}),[a,m,t?.total,o,s]),f=u.completedCount||0,N=u.totalCount||u.tasks.length,_=u.completionPct||0,I=[{label:"Core Human Capital",value:t?.breakdown?.coreHumanCapital||0},{label:"Skill Transferability",value:t?.breakdown?.skillTransferability||0},{label:"Additional Points",value:t?.breakdown?.additionalPoints||0},{label:"Spouse Factors",value:t?.breakdown?.spouseFactors||0}].sort((i,p)=>p.value-i.value).slice(0,3),k=O.useMemo(()=>{const i=o.globalRiskFlags?.some(z=>z.severity==="high"),p=(o.profileSignals?.profileComplexity||0)>=70,C=(o.gap||0)>45,L=i||o.top?.effort==="Hard"||(o.gap||0)>22;return C&&p?{tier:"pro",badge:"Priority recommendation",rationale:"Your profile looks high-complexity with a wider gap. Pro tracking helps reduce execution risk with tighter follow-through."}:L?{tier:"pro",badge:"Recommended now",rationale:"You likely benefit from structured tracking and guided execution while closing your gap."}:{tier:"free",badge:"Sufficient for now",rationale:"Your current profile can continue with free tools while monitoring draw changes."}},[o.gap,o.globalRiskFlags,o.profileSignals?.profileComplexity,o.top?.effort]),P=o.globalRiskFlags?.some(i=>i.severity==="high")?"Elevated":o.globalRiskFlags?.some(i=>i.severity==="medium")?"Moderate":"Low",b=(i,p)=>{j(i),T("action_center_cta_clicked",{cta:p,target_section:i,confidence_band:o.confidenceBand})},$=()=>{g?.(),T("action_center_cta_clicked",{cta:"manage_account",target_section:"account_modal",confidence_band:o.confidenceBand})},A=i=>{const p={...m,[i]:!m[i]};F(p),Pe(e,p);const C=u.tasks.filter(z=>!!p[z.id]).length,L=u.tasks.length>0?Math.round(C/u.tasks.length*100):0;T("action_plan_task_toggled",{task_id:i,completed:!!p[i],completion_pct:L,completed_count:C,total_count:u.tasks.length,next_task_id:u.nextBestTask?.id||"none"})};return n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"card strategic-action-center",id:"section-action-center",children:[n.jsx("h3",{children:"Action Center"}),n.jsx("p",{className:"cat-intro",children:"Use this control center to execute the highest-impact moves with clear priority and risk visibility."}),n.jsxs("div",{className:"strategic-action-grid",children:[n.jsx("button",{type:"button",className:"action-btn",onClick:()=>b("section-save","save_profile"),children:"Save profile"}),n.jsx("button",{type:"button",className:"action-btn",onClick:()=>b("section-optimizer","open_optimizer"),children:"Open strategy optimizer"}),n.jsx("button",{type:"button",className:"action-btn",onClick:()=>b("section-90-day-plan","open_90_day_plan"),children:"Open 90-day plan"}),n.jsx("button",{type:"button",className:"action-btn",onClick:()=>b("section-pricing","compare_plans"),children:"Compare plans"}),n.jsx("button",{type:"button",className:"action-btn",onClick:()=>b("section-coach","expert_strategy_coach"),children:"Expert strategy coach"}),n.jsx("button",{type:"button",className:"action-btn",onClick:$,children:"Manage account"})]}),n.jsxs("div",{className:"strategic-action-status",children:[n.jsxs("span",{children:["Profile save status: ",n.jsx("strong",{children:x||"Not saved yet"})]}),n.jsxs("span",{children:["90-day completion: ",n.jsxs("strong",{children:[_,"%"]})," (",f,"/",N,")"]}),n.jsxs("span",{children:["Confidence: ",n.jsx("strong",{children:o.confidenceBand})," (",o.overallConfidence," / 100)"]}),n.jsxs("span",{children:["Risk level: ",n.jsx("strong",{children:P})]})]}),u.nextBestTask&&n.jsxs("div",{className:"next-task-callout",children:[n.jsxs("div",{children:[n.jsxs("strong",{children:["Next best task: ",u.nextBestTask.title]}),n.jsxs("p",{children:[u.nextBestTask.dateWindow," · ",u.nextBestTask.weekWindow]}),n.jsx("small",{children:u.nextBestTask.successMetric})]}),n.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>b("section-90-day-plan","next_best_task"),children:"Start task"})]})]}),n.jsxs("section",{className:"card strategic-optimizer",id:"section-optimizer",children:[n.jsx("h3",{children:"Strategy Optimizer"}),n.jsx("p",{className:"cat-intro",children:o.guidanceSummary}),o.top&&n.jsxs("div",{className:"optimizer-top-callout",children:[n.jsxs("div",{className:"optimizer-option-head",children:[n.jsxs("strong",{children:["Top lane: ",o.top.title]}),n.jsxs("span",{className:"optimizer-score",children:["Priority ",o.top.score,"/100"]})]}),n.jsx("p",{children:o.top.reason}),n.jsxs("div",{className:"optimizer-meta",children:[n.jsxs("span",{children:["Estimated gain: +",o.top.scoreGain]}),n.jsxs("span",{children:["Expected timeline: ~",o.top.months," months"]}),n.jsxs("span",{children:["Confidence: ",o.top.confidence,"%"]}),n.jsx(Y,{value:o.top.effort})]}),!!o.top.riskFlags?.length&&n.jsx("ul",{className:"optimizer-risk-list",children:o.top.riskFlags.map(i=>n.jsxs("li",{children:[n.jsx(U,{value:i.severity}),n.jsx("span",{children:i.label})]},i.id))})]}),n.jsx("div",{className:"optimizer-options",children:o.ranked.map((i,p)=>n.jsxs("article",{className:"optimizer-option",children:[n.jsxs("div",{className:"optimizer-option-head",children:[n.jsxs("strong",{children:[p+1,". ",i.title]}),n.jsxs("div",{className:"optimizer-option-end",children:[n.jsxs("span",{className:"optimizer-score",children:["Score ",i.score]}),n.jsx(Y,{value:i.effort})]})]}),n.jsx("p",{children:i.reason}),n.jsxs("div",{className:"optimizer-meta",children:[n.jsxs("span",{children:["Lane: ",i.lane]}),n.jsxs("span",{children:["+",i.scoreGain," pts"]}),n.jsxs("span",{children:[i.months," mo"]}),n.jsxs("span",{children:[i.confidence,"% confidence"]})]})]},i.id))})]}),n.jsxs("section",{className:"card strategic-plan",id:"section-90-day-plan",children:[n.jsx("h3",{children:"90-Day Action Plan"}),n.jsx("p",{className:"cat-intro",children:"Execution-focused milestones with calendar windows, measurable outcomes, and fallback controls."}),n.jsx("p",{className:"plan-guidance",children:u.completionGuidance}),n.jsx("div",{className:"plan-review-dates",children:u.calendar?.reviewDates?.map(i=>n.jsxs("span",{children:["Review D",i.day,": ",i.label]},i.day))}),n.jsx("div",{className:"plan-milestones",children:u.milestones.map(i=>n.jsxs("div",{className:"plan-milestone",children:[n.jsx("strong",{children:i.label}),n.jsx("p",{children:i.objective}),n.jsx("small",{children:i.dateWindow}),n.jsxs("small",{children:["Expected gain: +",i.expectedGain," pts"]})]},i.label))}),n.jsx("ul",{className:"plan-task-list",children:u.tasks.map(i=>{const p=!!m[i.id],C=u.nextBestTask?.id===i.id&&!p;return n.jsxs("li",{className:`${p?"done":""} ${C?"next-task":""}`.trim(),children:[n.jsx("button",{type:"button",className:"plan-task-toggle",onClick:()=>A(i.id),"aria-label":`Toggle ${i.title}`,children:p?"✓":"○"}),n.jsxs("div",{children:[n.jsxs("div",{className:"plan-task-head",children:[n.jsx("strong",{children:i.title}),n.jsx(Oe,{value:i.priority})]}),n.jsx("p",{children:i.rationale}),n.jsxs("div",{className:"optimizer-meta",children:[n.jsx("span",{children:i.window}),n.jsx("span",{children:i.weekWindow}),n.jsx("span",{children:i.dateWindow}),n.jsxs("span",{children:["Lane: ",i.lane]}),n.jsxs("span",{children:["Impact: +",i.impact," pts"]})]}),n.jsxs("small",{className:"plan-task-metric",children:["Success metric: ",i.successMetric]}),n.jsxs("small",{className:"plan-task-metric",children:["Checkpoint: ",i.checkpoint]})]})]},i.id)})})]}),n.jsxs("section",{className:"card strategic-pricing",id:"section-pricing",children:[n.jsx("h3",{children:"Plans & Upgrade Path"}),n.jsx("p",{className:"cat-intro",children:"Choose support depth based on your current gap, risk profile, and execution complexity."}),n.jsxs("div",{className:"pricing-recommendation-banner",children:[n.jsxs("strong",{children:[k.badge,": ",Ee(k.tier)]}),n.jsx("p",{children:k.rationale})]}),n.jsxs("div",{className:"pricing-grid",children:[n.jsxs("article",{className:`pricing-tier ${k.tier==="free"?"recommended":""}`,children:[k.tier==="free"&&n.jsx("span",{className:"pricing-reco-badge",children:"Best fit now"}),n.jsx("h4",{children:"Free"}),n.jsx("strong",{children:"0 CAD"}),n.jsxs("ul",{children:[n.jsx("li",{children:"CRS scoring + basic suggestions"}),n.jsx("li",{children:"Scenario compare"}),n.jsx("li",{children:"Local profile save"})]}),n.jsx("button",{type:"button",className:"action-btn",onClick:()=>{T("pricing_cta_clicked",{tier:"free",recommended:k.tier==="free"}),b("section-optimizer","continue_free")},children:"Continue with Free"})]}),n.jsxs("article",{className:`pricing-tier featured ${k.tier==="pro"?"recommended":""}`,children:[k.tier==="pro"&&n.jsx("span",{className:"pricing-reco-badge",children:"Recommended"}),n.jsx("h4",{children:"Pro Tracking"}),n.jsx("strong",{children:"5 CAD / month"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Expert strategy coach"}),n.jsx("li",{children:"Daily action tracking"}),n.jsx("li",{children:"Cloud sync + alerts"})]}),n.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:()=>{T("pricing_cta_clicked",{tier:"pro_tracking",recommended:k.tier==="pro"}),b("section-coach","go_to_pro_setup")},children:"Go to Pro setup"})]})]})]}),n.jsxs("section",{className:"card strategic-explainability",id:"section-explainability",children:[n.jsx("h3",{children:"Explainability & Confidence"}),n.jsx("p",{className:"cat-intro",children:"Structured reasoning for lane ranking, confidence, and risk assumptions."}),n.jsxs("div",{className:"explain-grid",children:[n.jsxs("article",{children:[n.jsx("h4",{children:"Top score drivers"}),n.jsx("ul",{children:I.map(i=>n.jsxs("li",{children:[n.jsx("span",{children:i.label}),n.jsx("strong",{children:i.value})]},i.label))})]}),n.jsxs("article",{children:[n.jsx("h4",{children:"Recommendation score factors"}),n.jsx("ul",{className:"explain-factor-list",children:(o.top?.scoreBreakdown||[]).map(i=>n.jsxs("li",{children:[n.jsxs("div",{className:"explain-factor-head",children:[n.jsx("span",{children:i.label}),n.jsx("strong",{children:i.value})]}),n.jsx("div",{className:"explain-factor-track",children:n.jsx("span",{className:"explain-factor-fill",style:{width:`${i.value}%`}})}),n.jsxs("small",{children:["Weight: ",Math.round((i.weight||0)*100),"%"]})]},i.key))})]}),n.jsxs("article",{children:[n.jsx("h4",{children:"Data confidence"}),n.jsxs("ul",{children:[n.jsxs("li",{children:["Overall confidence: ",n.jsxs("strong",{children:[o.confidenceBand," (",o.overallConfidence,"/100)"]})]}),n.jsxs("li",{children:["Draw freshness: ",n.jsx("strong",{children:d?.label||"Unknown"})]}),n.jsxs("li",{children:["Category freshness: ",n.jsx("strong",{children:h?.label||"Unknown"})]}),n.jsxs("li",{children:["Draw source snapshot: ",n.jsx("strong",{children:r?.lastUpdated||"Unavailable"})]})]})]}),n.jsxs("article",{children:[n.jsx("h4",{children:"Assumptions used"}),n.jsx("ul",{className:"assumption-list",children:(o.assumptions||[]).map(i=>n.jsxs("li",{children:[n.jsx("span",{children:i.label}),n.jsx("strong",{className:Te(i.confidence),children:i.confidence})]},i.key))})]}),n.jsxs("article",{children:[n.jsx("h4",{children:"Risk indicators"}),n.jsxs("ul",{className:"risk-indicator-list",children:[(o.globalRiskFlags||[]).map(i=>n.jsxs("li",{children:[n.jsxs("div",{children:[n.jsx("strong",{children:i.label}),n.jsx("small",{children:i.detail})]}),n.jsx(U,{value:i.severity})]},i.id)),!o.globalRiskFlags?.length&&n.jsx("li",{children:"No major risk flags detected."})]})]}),n.jsxs("article",{children:[n.jsx("h4",{children:"Trust cues"}),n.jsxs("div",{className:"trust-inline-cues",children:[n.jsx("span",{children:"Estimate model only"}),n.jsx("span",{children:"No legal advice"}),n.jsx("span",{children:"Review official IRCC before filing"})]}),n.jsxs("p",{className:"save-note",children:["Review governance in the ",n.jsx("a",{href:"/trust.html",children:"Trust Center"}),", implementation guides in ",n.jsx("a",{href:"/guides.html",children:"Guides"}),", and rights controls in ",n.jsx("a",{href:"/privacy.html",children:"Privacy Policy"}),"."]})]})]})]})]})}const Ie=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));export{Ie as R,T as t};
