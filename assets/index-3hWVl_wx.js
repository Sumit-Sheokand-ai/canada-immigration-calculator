const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthModal-vhboVZF9.js","assets/vendor-react-Ah1pgjPn.js","assets/feature-path-coach-DvhzPNyQ.js","assets/data-question-bank-F-s7nTqV.js","assets/vendor-supabase-BZ0N5lZN.js","assets/vendor-motion-DURBmaq0.js","assets/feature-strategy-hub-DZoh82vu.js","assets/WelcomeScreen-DvdFVSP0.js","assets/Wizard-CP7d_eOs.js","assets/Results-sQbQPoC1.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,c as ke}from"./vendor-react-Ah1pgjPn.js";import{u as Ee,i as le,s as y,A as _e}from"./feature-path-coach-DvhzPNyQ.js";import{t as w}from"./feature-strategy-hub-DZoh82vu.js";import{u as Ie,m as Ne,A as De}from"./vendor-motion-DURBmaq0.js";import{t as U,r as k}from"./data-question-bank-F-s7nTqV.js";import"./vendor-supabase-BZ0N5lZN.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Pe="modulepreload",Ae=function(t){return"/"+t},te={},M=function(r,n,l){let s=Promise.resolve();if(n&&n.length>0){let C=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");s=C(n.map(u=>{if(u=Ae(u),u in te)return;te[u]=!0;const p=u.endsWith(".css"),h=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const d=document.createElement("link");if(d.rel=p?"stylesheet":Pe,p||(d.as="script"),d.crossOrigin="",d.href=u,f&&d.setAttribute("nonce",f),document.head.appendChild(d),p)return new Promise((v,D)=>{d.addEventListener("load",v),d.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&o(f.reason);return r().catch(o)})},ce=a.createContext();function Re({children:t}){const[r,n]=a.useState(()=>{try{return localStorage.getItem("crs-theme")==="dark"}catch{return!1}});a.useEffect(()=>{document.documentElement.setAttribute("data-theme",r?"dark":"light");try{localStorage.setItem("crs-theme",r?"dark":"light")}catch{}},[r]);const l=()=>n(s=>!s);return e.jsx(ce.Provider,{value:{dark:r,toggle:l},children:t})}function Le(){return a.useContext(ce)}const Te={"header.title":"CRS Calculator 2026","welcome.heading":`Free CRS Calculator
for Express Entry 2026`,"welcome.sub":"Calculate your Comprehensive Ranking System (CRS) score for Canada Express Entry. Check FSW, CEC, PNP eligibility instantly. Updated with latest IRCC draw cutoffs.","welcome.btn":"Calculate My CRS Score Free","welcome.updated":"IRCC data updated:","welcome.trust":"Uses official IRCC draw data â€” last updated:","welcome.microcopy":"This will take 3 minutes â€” one question at a time.","welcome.resume":"You have an unfinished calculation.","welcome.resumeBtn":"Resume","welcome.startFresh":"Start Fresh","feature.accurate":"Official CRS Formula","feature.accurateDesc":"100% accurate IRCC scoring algorithm","feature.suggestions":"Boost Your Score","feature.suggestionsDesc":"Get personalized tips to gain +50 points","feature.draws":"2026 Draw Cutoffs","feature.drawsDesc":"Live IRCC Express Entry draw results","feature.instant":"Free & Instant","feature.instantDesc":"No signup required Â· Results in 2 minutes","wizard.step":"Step","wizard.of":"of","wizard.next":"Next â†’","wizard.back":"â† Back","wizard.calculate":"Calculate Score âœ“","results.breakdown":"Your CRS Score Breakdown","results.improve":"How to Increase Your CRS Score","results.category":"Category-Based Draw Eligibility","results.catIntro":"IRCC runs category-based draws with lower cutoffs for healthcare, STEM, trades, transport, and French speakers. Here's your eligibility:","results.timeline":"PR Timeline Estimate","results.draws":"Latest Express Entry Draws 2026","results.disclaimer":"This free CRS calculator provides an estimate based on IRCC's publicly available scoring criteria. Not affiliated with Immigration, Refugees and Citizenship Canada.","results.restart":"â†» Recalculate","results.share":"Share Results","results.pdf":"Download PDF","results.whatif":"What-If Score Simulator","results.whatifDesc":"See how improving IELTS, education, or work experience affects your CRS:","results.original":"Current","results.projected":"Projected","results.foreignWork":"Foreign Work (Skill Bonus)","footer.copy":"Free CRS Calculator 2026 Â· Not affiliated with IRCC"},Me={"header.title":"Calculateur SRC","welcome.heading":`Immigration au Canada
Calculateur de Points`,"welcome.sub":"Calculez votre score du SystÃ¨me de classement global (SCG) et dÃ©couvrez votre meilleur chemin vers la rÃ©sidence permanente canadienne.","welcome.btn":"Calculer Mon Score","welcome.updated":"DerniÃ¨re mise Ã  jour :","welcome.trust":"DonnÃ©es officielles dâ€™IRCC â€” derniÃ¨re mise Ã  jour :","welcome.microcopy":"Cela prend 3 minutes â€” une question Ã  la fois.","welcome.resume":"Vous avez un calcul en cours.","welcome.resumeBtn":"Reprendre","welcome.startFresh":"Recommencer","feature.accurate":"Score SCG PrÃ©cis","feature.accurateDesc":"Calcul complet du SystÃ¨me de classement global","feature.suggestions":"Suggestions Intelligentes","feature.suggestionsDesc":"Conseils personnalisÃ©s pour augmenter vos points","feature.draws":"Derniers Tirages","feature.drawsDesc":"RÃ©sultats Ã  jour des tirages EntrÃ©e express d'IRCC","feature.instant":"RÃ©sultats InstantanÃ©s","feature.instantDesc":"Obtenez votre score en moins de 2 minutes","wizard.step":"Ã‰tape","wizard.of":"de","wizard.next":"Suivant â†’","wizard.back":"â† Retour","wizard.calculate":"Calculer le Score âœ“","results.breakdown":"DÃ©tail de Votre Score","results.improve":"Comment AmÃ©liorer Votre Score","results.category":"AdmissibilitÃ© aux Tirages par CatÃ©gorie","results.catIntro":"Le Canada organise des tirages spÃ©ciaux pour des groupes spÃ©cifiques avec des seuils plus bas. Voici ce Ã  quoi vous pourriez Ãªtre admissible :","results.timeline":"Calendrier EstimÃ©","results.draws":"Tirages RÃ©cents EntrÃ©e Express","results.disclaimer":"Ce calculateur fournit une estimation basÃ©e sur les critÃ¨res SCG publics. Il n'est pas affiliÃ© Ã  IRCC.","results.restart":"â†» Recommencer","results.share":"Partager les RÃ©sultats","results.pdf":"TÃ©lÃ©charger PDF","results.whatif":"Comparaison HypothÃ©tique","results.whatifDesc":"Ajustez les variables pour voir comment votre score change :","results.original":"Original","results.projected":"ProjetÃ©","results.foreignWork":"Exp. Ã‰trangÃ¨re (Bonus)","footer.copy":"Calculateur SRC Â· Non affiliÃ© Ã  IRCC"},re={en:Te,fr:Me},ue=a.createContext();function Fe({children:t}){const[r,n]=a.useState(()=>{try{return localStorage.getItem("crs-lang")||"en"}catch{return"en"}}),l=a.useCallback(o=>{n(o);try{localStorage.setItem("crs-lang",o)}catch{}},[]),s=a.useCallback(o=>re[r]?.[o]||re.en[o]||o,[r]);return e.jsx(ue.Provider,{value:{lang:r,setLang:l,t:s},children:t})}function de(){return a.useContext(ue)}const ze=a.lazy(()=>M(()=>import("./AuthModal-vhboVZF9.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Oe={en:"EN",fr:"FR"};function Be({canInstallApp:t=!1,onInstallApp:r=()=>{},motionIntensity:n="full"}){const l=Ie()||n!=="full",{dark:s,toggle:o}=Le(),{lang:c,setLang:f,t:C}=de(),{user:u}=Ee(),[p,h]=a.useState(!1);return a.useEffect(()=>{const d=()=>h(!0);return window.addEventListener("crs-open-account-modal",d),()=>{window.removeEventListener("crs-open-account-modal",d)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(Ne.header,{className:"header",initial:l?!1:{y:-60,opacity:0},animate:{y:0,opacity:1},transition:l?{duration:0}:{type:"spring",stiffness:120,damping:20},children:e.jsxs("div",{className:"header-inner",children:[e.jsxs("div",{className:"logo",children:[e.jsx("span",{className:"logo-leaf",children:"ðŸ"}),e.jsx("span",{children:C("header.title")})]}),e.jsxs("div",{className:"header-actions",children:[t&&e.jsx("button",{type:"button",className:"install-btn",onClick:r,"aria-label":"Install app",title:"Add app shortcut",children:"Install app"}),e.jsx("button",{type:"button",className:"auth-toggle",onClick:()=>{h(!0),w("account_modal_opened",{source:"header_button",is_authenticated:!!u})},"aria-label":u?"Manage account":"Login or signup",title:u?u.email:"Login / Signup",children:u?"Account":"Login"}),e.jsx("select",{className:"lang-select",value:c,onChange:d=>f(d.target.value),"aria-label":"Select language",children:Object.entries(Oe).map(([d,v])=>e.jsx("option",{value:d,children:v},d))}),e.jsx("button",{type:"button",className:"theme-toggle",onClick:o,"aria-label":s?"Switch to light mode":"Switch to dark mode",title:s?"Light mode":"Dark mode",children:s?"Light":"Dark"})]})]})}),p&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"auth-modal-backdrop",role:"presentation",children:e.jsx("div",{className:"auth-modal auth-modal-loading",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"auth-modal-head",children:[e.jsx("h3",{children:"Loading accountâ€¦"}),e.jsx("button",{type:"button",className:"auth-close",onClick:()=>h(!1),"aria-label":"Close dialog",children:"Ã—"})]})})}),children:e.jsx(ze,{open:p,onClose:()=>h(!1)})})]})}function B(){const t=Array.from({length:9});return e.jsxs("div",{className:"uv-loader",children:[t.map((r,n)=>e.jsx("div",{className:"uv-text",children:e.jsx("span",{children:"Loading"})},n)),e.jsx("div",{className:"uv-line"})]})}function qe(t,r){const n=t.answers||{};return{id:t.id,user_id:r||null,name:t.name||null,score:Number(t.score)||0,email:t.email||null,alert_opt_in:!!t.alertOptIn,alert_token:t.alertToken||null,profile_json:{answers:n,tracking:{userId:r||null,savedAt:new Date().toISOString()}},updated_at:new Date().toISOString()}}function F(t){const r=String(t?.message||"");return/column\s+["']?user_id["']?\s+does not exist/i.test(r)}function I(t,r){const n=r?.message||r?.hint||String(r);return`${t}: ${n}`}function N(){return le&&!!y}async function ct(t,r={}){if(!N())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=r.userId||null,l=qe(t,n);let s,o;if({data:s,error:o}=await y.from("saved_profiles").upsert(l,{onConflict:"id"}).select(),o&&n&&F(o)){const{user_id:c,...f}=l;({data:s,error:o}=await y.from("saved_profiles").upsert(f,{onConflict:"id"}).select())}if(o)throw new Error(I("Supabase upsert failed",o));return{status:"ok",data:s||[]}}async function Ue(t){if(!t)return{status:"skipped",reason:"Missing token"};if(!N())return{status:"skipped",reason:"Supabase env vars are not configured"};const{data:r,error:n}=await y.from("saved_profiles").update({alert_opt_in:!1,updated_at:new Date().toISOString()}).eq("alert_token",t).select();if(n)throw new Error(I("Supabase unsubscribe failed",n));return r?.length?{status:"ok",data:r[0]}:{status:"not-found"}}async function ut(t){if(!t)return{status:"skipped",reason:"Missing user id"};if(!N())return{status:"skipped",reason:"Supabase env vars are not configured"};const{data:r,error:n}=await y.from("saved_profiles").select("id,name,score,email,updated_at").eq("user_id",t).order("updated_at",{ascending:!1}).limit(12);if(n&&F(n))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(n)throw new Error(I("Supabase profile list failed",n));return{status:"ok",data:r||[]}}async function dt(t,r){if(!t)return{status:"skipped",reason:"Missing user id"};if(!N())return{status:"skipped",reason:"Supabase env vars are not configured"};const{error:n,data:l}=await y.from("saved_profiles").update({alert_opt_in:!!r,updated_at:new Date().toISOString()}).eq("user_id",t).select("id");if(n&&F(n))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(n)throw new Error(I("Supabase alert preference update failed",n));return{status:"ok",updatedCount:l?.length||0}}async function mt(t,r){if(!t)return{status:"skipped",reason:"Missing user id"};if(!N())return{status:"skipped",reason:"Supabase env vars are not configured"};const n=r?String(r).trim().toLowerCase():null,{error:l,data:s}=await y.from("saved_profiles").update({email:n||null,updated_at:new Date().toISOString()}).eq("user_id",t).select("id");if(l&&F(l))return{status:"skipped",reason:"saved_profiles.user_id column not found; run the latest supabase/schema.sql"};if(l)throw new Error(I("Supabase profile email update failed",l));return{status:"ok",updatedCount:s?.length||0}}const me=300*1e3;let x={data:null,source:"none",fetchedAt:0},_={data:null,source:"none",fetchedAt:0};function We(t){return!!t&&typeof t=="object"&&Array.isArray(t.generalProgram)&&Array.isArray(t.categoryBased)&&Array.isArray(t.pnpDraws)&&Number.isFinite(Number(t.averageCutoff))}function Ye(t){return We(t)?{...t,generalProgram:t.generalProgram||[],categoryBased:t.categoryBased||[],pnpDraws:t.pnpDraws||[],averageCutoff:Number(t.averageCutoff)||k.averageCutoff,lastUpdated:t.lastUpdated||k.lastUpdated,pnpRanges:t.pnpRanges||k.pnpRanges}:null}function se(){return k}function q(){return U}async function Ge({forceRefresh:t=!1}={}){if(!t&&x.data&&Date.now()-x.fetchedAt<me)return{status:"ok",source:x.source,data:x.data};if(le&&y)try{const{data:r,error:n}=await y.from("draw_snapshots").select("payload,last_updated").order("last_updated",{ascending:!1}).limit(1);if(!n){const l=r?.[0],s=Ye(l?.payload);if(s)return x={data:s,source:"supabase",fetchedAt:Date.now()},{status:"ok",source:"supabase",data:s}}}catch{}return x={data:k,source:"local-fallback",fetchedAt:Date.now()},{status:"ok",source:"local-fallback",data:k}}async function Ve({forceRefresh:t=!1}={}){return!t&&_.data&&Date.now()-_.fetchedAt<me?{status:"ok",source:_.source,data:_.data}:(_={data:U,source:"local-fallback",fetchedAt:Date.now()},{status:"ok",source:"local-fallback",data:U})}const fe="crs-account-settings-v1",j={profileName:"",contactEmail:"",defaultDrawAlerts:!1,autoSyncProfiles:!0,autoSaveProgress:!0,motionIntensity:"full"};function ae(){try{const t=localStorage.getItem(fe);if(!t)return{...j};const r=JSON.parse(t);return!r||typeof r!="object"?{...j}:{...j,...r}}catch{return{...j}}}function ft(t){const r={...j,...t||{}};["off","subtle","full"].includes(r.motionIntensity)||(r.motionIntensity=j.motionIntensity);try{localStorage.setItem(fe,JSON.stringify(r))}catch{}try{window.dispatchEvent(new Event("crs-account-settings-updated"))}catch{}return r}const $e=a.lazy(()=>M(()=>import("./WelcomeScreen-DvdFVSP0.js"),__vite__mapDeps([7,1,2,3,4,5,6]))),He=a.lazy(()=>M(()=>import("./Wizard-CP7d_eOs.js"),__vite__mapDeps([8,1,3,2,4,5,6]))),Je=a.lazy(()=>M(()=>import("./Results-sQbQPoC1.js"),__vite__mapDeps([9,1,2,3,4,5,6]))),W="crs-progress";function ne(){try{const t=localStorage.getItem(W);return t?JSON.parse(t):null}catch{return null}}function Ke(t){try{localStorage.setItem(W,JSON.stringify(t))}catch{}}function oe(){try{localStorage.removeItem(W)}catch{}}function Xe(){try{return new URLSearchParams(window.location.search).get("unsubscribe")}catch{return null}}function Qe(){return{}}function Ze(){const t=typeof navigator<"u"?navigator:null;if(!t)return!1;const n=!!(t.connection||t.mozConnection||t.webkitConnection)?.saveData,l=Number(t.deviceMemory||0),s=Number(t.hardwareConcurrency||0),o=Number.isFinite(l)&&l>0&&l<=4,c=Number.isFinite(s)&&s>0&&s<=4;return n||o||c}function et(t){return new Promise(r=>window.setTimeout(r,t))}async function ie(t,{retries:r=2,baseDelayMs:n=250}={}){let l=null;for(let s=0;s<=r;s+=1)try{return await t()}catch(o){if(l=o,s===r)break;await et(n*2**s)}throw l||new Error("Retry attempts exhausted.")}function tt(){const{t}=de(),[r,n]=a.useState(()=>ae()),l=r.autoSaveProgress!==!1,s=["off","subtle","full"].includes(r.motionIntensity)?r.motionIntensity:"full",o=a.useMemo(()=>Ze(),[]),c=s==="off"?"off":o&&s==="full"?"subtle":s,f=Xe(),C=Qe(),[u,p]=a.useState(()=>f?"unsubscribe":Object.keys(C).length>0?"results":"welcome"),[h,d]=a.useState(()=>C),[v,D]=a.useState(()=>f?"loading":"idle"),[Y,G]=a.useState(()=>se()),[V,$]=a.useState("local-fallback"),[pe,z]=a.useState(()=>q()),[H,J]=a.useState(()=>({syncing:!1,lastError:"",lastSyncedAt:""}));a.useEffect(()=>{if(!f)return;let i=!0;return Ue(f).then(g=>{i&&D(g.status==="ok"?"success":"notfound")}).catch(()=>{i&&D("error")}),()=>{i=!1}},[f]);const P=a.useCallback(async({forceRefresh:i=!1,reason:g="initial"}={})=>{J(m=>({...m,syncing:!0,lastError:""}));let S=null,A=null;try{const m=await ie(()=>Ge({forceRefresh:i}),{retries:2,baseDelayMs:250});m?.status==="ok"&&m.data&&(G(m.data),$(m.source||"local-fallback"))}catch(m){S=m,G(se()),$("local-fallback")}try{const m=await ie(()=>Ve({forceRefresh:i}),{retries:2,baseDelayMs:250});m?.status==="ok"&&Array.isArray(m.data)&&m.data.length>0?z(m.data):z(q())}catch(m){A=m,z(q())}const b=!!S||!!A;J({syncing:!1,lastError:b?"Live sync is currently unavailable. Showing local data mode.":"",lastSyncedAt:new Date().toISOString()}),b?w("draw_data_sync_degraded",{reason:g,latest_error:String(S?.message||""),category_error:String(A?.message||"")}):w("draw_data_sync_ok",{reason:g,source:"live"})},[]),ge=a.useCallback(()=>{P({forceRefresh:!0,reason:"manual_retry"})},[P]);a.useEffect(()=>{const i=window.setTimeout(()=>{P()},0);return()=>window.clearTimeout(i)},[P]);const he=a.useCallback(i=>{if(i&&l){const g=ne();g&&d(g)}w("wizard_started",{resumed:!!i}),p("wizard")},[l]),we=a.useCallback(i=>{d(i),oe(),w("wizard_completed",{answer_count:Object.keys(i||{}).length}),p("results"),window.scrollTo({top:0,behavior:"smooth"})},[]),be=a.useCallback(()=>{d({}),oe(),w("calculator_restarted"),window.history.replaceState(null,"",window.location.pathname),p("welcome"),window.scrollTo({top:0,behavior:"smooth"})},[]),ye=l&&!!ne(),[ve,Se]=a.useState(!1),[E,O]=a.useState(null),[Ce,xe]=a.useState(()=>{const i=window.matchMedia?.("(display-mode: standalone)")?.matches,g=window.navigator?.standalone===!0;return!!(i||g)});a.useEffect(()=>{const i=()=>Se(window.scrollY>400);return window.addEventListener("scroll",i,{passive:!0}),()=>window.removeEventListener("scroll",i)},[]),a.useEffect(()=>{const i=S=>{typeof S?.prompt=="function"&&O(S)},g=()=>{O(null),xe(!0)};return window.addEventListener("beforeinstallprompt",i),window.addEventListener("appinstalled",g),()=>{window.removeEventListener("beforeinstallprompt",i),window.removeEventListener("appinstalled",g)}},[]);const je=a.useCallback(async()=>{if(!E)return;w("install_prompt_triggered"),E.prompt(),(await E.userChoice)?.outcome==="accepted"?(O(null),w("install_prompt_accepted")):w("install_prompt_dismissed")},[E]);return a.useEffect(()=>{const i=()=>{n(ae())};return window.addEventListener("storage",i),window.addEventListener("crs-account-settings-updated",i),()=>{window.removeEventListener("storage",i),window.removeEventListener("crs-account-settings-updated",i)}},[]),a.useEffect(()=>{document.documentElement.setAttribute("data-motion",c)},[c]),a.useEffect(()=>{const i=document.documentElement,g=window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches,S=window.matchMedia?.("(pointer: fine)")?.matches;if(!(c!=="off"&&!g&&!!S)){i.style.setProperty("--pointer-x","50%"),i.style.setProperty("--pointer-y","40%"),i.style.setProperty("--pointer-glow","0");return}i.style.setProperty("--pointer-glow",c==="subtle"?"0.45":"1");let b=0,m=50,R=40,L=50,T=40;const K=()=>{m+=(L-m)*.12,R+=(T-R)*.12,i.style.setProperty("--pointer-x",`${m.toFixed(2)}%`),i.style.setProperty("--pointer-y",`${R.toFixed(2)}%`),Math.abs(L-m)>.05||Math.abs(T-R)>.05?b=window.requestAnimationFrame(K):b=0},X=()=>{b||(b=window.requestAnimationFrame(K))},Q=ee=>{L=ee.clientX/window.innerWidth*100,T=ee.clientY/window.innerHeight*100,X()},Z=()=>{L=50,T=40,X()};return window.addEventListener("pointermove",Q,{passive:!0}),window.addEventListener("pointerleave",Z,{passive:!0}),()=>{window.removeEventListener("pointermove",Q),window.removeEventListener("pointerleave",Z),b&&window.cancelAnimationFrame(b)}},[c]),e.jsxs("div",{className:"app",children:[e.jsxs("div",{className:"anime-bg","aria-hidden":"true",children:[e.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--one"}),e.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--two"}),e.jsx("span",{className:"anime-bg-aurora anime-bg-aurora--three"}),e.jsx("span",{className:"anime-bg-grid"}),e.jsx("span",{className:"anime-bg-noise"}),e.jsx("span",{className:"anime-bg-pointer-glow"}),e.jsx("span",{className:"anime-bg-flare"}),e.jsx("span",{className:"anime-bg-vignette"}),e.jsxs("div",{className:"anime-bg-sparks",children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]}),e.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),e.jsx(Be,{canInstallApp:!Ce&&!!E,onInstallApp:je,motionIntensity:c}),e.jsx("main",{className:"main",role:"main",id:"main-content",children:e.jsxs(De,{mode:"wait",children:[u==="welcome"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"loading-fallback",children:e.jsx(B,{})}),children:e.jsx($e,{onStart:he,hasSaved:ye,drawData:Y,drawSource:V,motionIntensity:c},"welcome")}),u==="wizard"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"loading-fallback",children:e.jsx(B,{})}),children:e.jsx(He,{onFinish:we,onProgress:l?Ke:void 0,initialAnswers:h,motionIntensity:c},"wizard")}),u==="unsubscribe"&&e.jsxs("div",{className:"card unsubscribe-card",children:[e.jsx("h3",{children:"Draw alert preferences"}),v==="loading"&&e.jsx("p",{children:"Processing your unsubscribe requestâ€¦"}),v==="success"&&e.jsx("p",{children:"Youâ€™ve been unsubscribed from draw alerts successfully."}),v==="notfound"&&e.jsx("p",{children:"This unsubscribe link is invalid or already inactive."}),v==="error"&&e.jsx("p",{children:"We couldnâ€™t process this request right now. Please try again later."}),e.jsx("button",{type:"button",className:"btn-restart",onClick:()=>p("welcome"),children:"Back to calculator"})]}),u==="results"&&e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"loading-fallback",children:e.jsx(B,{})}),children:e.jsx(Je,{answers:h,onRestart:be,drawData:Y,drawSource:V,categoryInfo:pe,motionIntensity:c,onRetryDataSync:ge,isDataSyncing:H.syncing,dataSyncError:H.lastError},"results")})]})}),e.jsxs("footer",{className:"footer",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," ",t("footer.copy")]}),e.jsxs("p",{className:"footer-legal-links",children:[e.jsx("a",{href:"/guides.html",children:"Guides"}),e.jsx("span",{"aria-hidden":"true",children:" Â· "}),e.jsx("a",{href:"/terms.html",children:"Terms of Service"}),e.jsx("span",{"aria-hidden":"true",children:" Â· "}),e.jsx("a",{href:"/privacy.html",children:"Privacy Policy"}),e.jsx("span",{"aria-hidden":"true",children:" Â· "}),e.jsx("a",{href:"/trust.html",children:"Trust Center"})]})]}),ve&&e.jsx("button",{type:"button",className:"btn-top",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),"aria-label":"Back to top",children:"â†‘"})]})}class rt extends a.Component{constructor(r){super(r),this.state={hasError:!1,errorMessage:""}}static getDerivedStateFromError(r){return{hasError:!0,errorMessage:r?.message||"Unexpected application error."}}componentDidCatch(r,n){w("app_error_boundary_triggered",{message:String(r?.message||"unknown_error"),stack:String(n?.componentStack||"").slice(0,280)})}handleTryAgain=()=>{this.setState({hasError:!1,errorMessage:""})};render(){return this.state.hasError?e.jsx("main",{className:"error-boundary-screen",role:"alert","aria-live":"assertive",children:e.jsxs("section",{className:"error-boundary-card",children:[e.jsx("h1",{children:"Something went wrong"}),e.jsx("p",{children:"We hit an unexpected issue while rendering this page."}),e.jsx("p",{className:"error-boundary-message",children:this.state.errorMessage}),e.jsxs("div",{className:"error-boundary-actions",children:[e.jsx("button",{type:"button",className:"action-btn auth-btn-primary",onClick:this.handleTryAgain,children:"Try again"}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>window.location.reload(),children:"Reload app"})]})]})}):this.props.children}}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("[SW] Service Worker registered:",t)}).catch(t=>{console.error("[SW] Service Worker registration failed:",t)})});ke.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(rt,{children:e.jsx(_e,{children:e.jsx(Re,{children:e.jsx(Fe,{children:e.jsx(tt,{})})})})})}));export{B as L,M as _,se as a,ct as b,dt as c,mt as d,q as g,N as i,ut as l,ae as r,ft as s,de as u};
